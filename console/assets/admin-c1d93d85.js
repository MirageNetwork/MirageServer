import{s as Nt,u as K,d as q,r as mt,i as ne,n as Ot,e as vt,f as It,g as Tt,h as pt,j as gt,p as Oe,k as E,w as ke,l as $e,o as p,c as y,m as t,t as P,q as _t,v as xt,x as xe,y as X,z as B,T as ie,A as Y,B as ee,F as re,C as ge,D as Z,E as Xe,G as ye,a as Ee,H as se,I as Lt,_ as zt,J as Ht,K as Dt,b as Vt}from"./plugin-vueexport-helper-b6eeb441.js";import{u as Ve,_ as Ue,p as Ut}from"./Toast-a6f32ffd.js";/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const ce=typeof window<"u";function Kt(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const I=Object.assign;function Ie(e,s){const n={};for(const o in s){const a=s[o];n[o]=J(a)?a.map(e):e(a)}return n}const ve=()=>{},J=Array.isArray,Gt=/\/$/,qt=e=>e.replace(Gt,"");function Te(e,s,n="/"){let o,a={},c="",v="";const d=s.indexOf("#");let r=s.indexOf("?");return d<r&&d>=0&&(r=-1),r>-1&&(o=s.slice(0,r),c=s.slice(r+1,d>-1?d:s.length),a=e(c)),d>-1&&(o=o||s.slice(0,d),v=s.slice(d,s.length)),o=Yt(o??s,n),{fullPath:o+(c&&"?")+c+v,path:o,query:a,hash:v}}function Ft(e,s){const n=s.query?e(s.query):"";return s.path+(n&&"?")+n+(s.hash||"")}function Ze(e,s){return!s||!e.toLowerCase().startsWith(s.toLowerCase())?e:e.slice(s.length)||"/"}function Wt(e,s,n){const o=s.matched.length-1,a=n.matched.length-1;return o>-1&&o===a&&ue(s.matched[o],n.matched[a])&&bt(s.params,n.params)&&e(s.query)===e(n.query)&&s.hash===n.hash}function ue(e,s){return(e.aliasOf||e)===(s.aliasOf||s)}function bt(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(!Qt(e[n],s[n]))return!1;return!0}function Qt(e,s){return J(e)?Je(e,s):J(s)?Je(s,e):e===s}function Je(e,s){return J(s)?e.length===s.length&&e.every((n,o)=>n===s[o]):e.length===1&&e[0]===s}function Yt(e,s){if(e.startsWith("/"))return e;if(!e)return s;const n=s.split("/"),o=e.split("/");let a=n.length-1,c,v;for(c=0;c<o.length;c++)if(v=o[c],v!==".")if(v==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+o.slice(c-(c===o.length?1:0)).join("/")}var _e;(function(e){e.pop="pop",e.push="push"})(_e||(_e={}));var pe;(function(e){e.back="back",e.forward="forward",e.unknown=""})(pe||(pe={}));function Xt(e){if(!e)if(ce){const s=document.querySelector("base");e=s&&s.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),qt(e)}const Zt=/^[^#]+#/;function Jt(e,s){return e.replace(Zt,"#")+s}function es(e,s){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:s.behavior,left:o.left-n.left-(s.left||0),top:o.top-n.top-(s.top||0)}}const Re=()=>({left:window.pageXOffset,top:window.pageYOffset});function ts(e){let s;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;s=es(a,e)}else s=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(s):window.scrollTo(s.left!=null?s.left:window.pageXOffset,s.top!=null?s.top:window.pageYOffset)}function et(e,s){return(history.state?history.state.position-s:-1)+e}const ze=new Map;function ss(e,s){ze.set(e,s)}function ns(e){const s=ze.get(e);return ze.delete(e),s}let os=()=>location.protocol+"//"+location.host;function yt(e,s){const{pathname:n,search:o,hash:a}=s,c=e.indexOf("#");if(c>-1){let d=a.includes(e.slice(c))?e.slice(c).length:1,r=a.slice(d);return r[0]!=="/"&&(r="/"+r),Ze(r,"")}return Ze(n,e)+o+a}function as(e,s,n,o){let a=[],c=[],v=null;const d=({state:m})=>{const g=yt(e,location),_=n.value,N=s.value;let f=0;if(m){if(n.value=g,s.value=m,v&&v===_){v=null;return}f=N?m.position-N.position:0}else o(g);a.forEach(w=>{w(n.value,_,{delta:f,type:_e.pop,direction:f?f>0?pe.forward:pe.back:pe.unknown})})};function r(){v=n.value}function l(m){a.push(m);const g=()=>{const _=a.indexOf(m);_>-1&&a.splice(_,1)};return c.push(g),g}function i(){const{history:m}=window;m.state&&m.replaceState(I({},m.state,{scroll:Re()}),"")}function h(){for(const m of c)m();c=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",i)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",i),{pauseListeners:r,listen:l,destroy:h}}function tt(e,s,n,o=!1,a=!1){return{back:e,current:s,forward:n,replaced:o,position:window.history.length,scroll:a?Re():null}}function is(e){const{history:s,location:n}=window,o={value:yt(e,n)},a={value:s.state};a.value||c(o.value,{back:null,current:o.value,forward:null,position:s.length-1,replaced:!0,scroll:null},!0);function c(r,l,i){const h=e.indexOf("#"),m=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+r:os()+e+r;try{s[i?"replaceState":"pushState"](l,"",m),a.value=l}catch(g){console.error(g),n[i?"replace":"assign"](m)}}function v(r,l){const i=I({},s.state,tt(a.value.back,r,a.value.forward,!0),l,{position:a.value.position});c(r,i,!0),o.value=r}function d(r,l){const i=I({},a.value,s.state,{forward:r,scroll:Re()});c(i.current,i,!0);const h=I({},tt(o.value,r,null),{position:i.position+1},l);c(r,h,!1),o.value=r}return{location:o,state:a,push:d,replace:v}}function rs(e){e=Xt(e);const s=is(e),n=as(e,s.state,s.location,s.replace);function o(c,v=!0){v||n.pauseListeners(),history.go(c)}const a=I({location:"",base:e,go:o,createHref:Jt.bind(null,e)},s,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>s.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>s.state.value}),a}function ls(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),rs(e)}function cs(e){return typeof e=="string"||e&&typeof e=="object"}function wt(e){return typeof e=="string"||typeof e=="symbol"}const oe={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},kt=Symbol("");var st;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(st||(st={}));function de(e,s){return I(new Error,{type:e,[kt]:!0},s)}function te(e,s){return e instanceof Error&&kt in e&&(s==null||!!(e.type&s))}const nt="[^/]+?",us={sensitive:!1,strict:!1,start:!0,end:!0},ds=/[.+*?^${}()[\]/\\]/g;function hs(e,s){const n=I({},us,s),o=[];let a=n.start?"^":"";const c=[];for(const l of e){const i=l.length?[]:[90];n.strict&&!l.length&&(a+="/");for(let h=0;h<l.length;h++){const m=l[h];let g=40+(n.sensitive?.25:0);if(m.type===0)h||(a+="/"),a+=m.value.replace(ds,"\\$&"),g+=40;else if(m.type===1){const{value:_,repeatable:N,optional:f,regexp:w}=m;c.push({name:_,repeatable:N,optional:f});const S=w||nt;if(S!==nt){g+=10;try{new RegExp(`(${S})`)}catch(G){throw new Error(`Invalid custom RegExp for param "${_}" (${S}): `+G.message)}}let z=N?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;h||(z=f&&l.length<2?`(?:/${z})`:"/"+z),f&&(z+="?"),a+=z,g+=20,f&&(g+=-8),N&&(g+=-20),S===".*"&&(g+=-50)}i.push(g)}o.push(i)}if(n.strict&&n.end){const l=o.length-1;o[l][o[l].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&(a+="(?:/|$)");const v=new RegExp(a,n.sensitive?"":"i");function d(l){const i=l.match(v),h={};if(!i)return null;for(let m=1;m<i.length;m++){const g=i[m]||"",_=c[m-1];h[_.name]=g&&_.repeatable?g.split("/"):g}return h}function r(l){let i="",h=!1;for(const m of e){(!h||!i.endsWith("/"))&&(i+="/"),h=!1;for(const g of m)if(g.type===0)i+=g.value;else if(g.type===1){const{value:_,repeatable:N,optional:f}=g,w=_ in l?l[_]:"";if(J(w)&&!N)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const S=J(w)?w.join("/"):w;if(!S)if(f)m.length<2&&(i.endsWith("/")?i=i.slice(0,-1):h=!0);else throw new Error(`Missing required param "${_}"`);i+=S}}return i||"/"}return{re:v,score:o,keys:c,parse:d,stringify:r}}function fs(e,s){let n=0;for(;n<e.length&&n<s.length;){const o=s[n]-e[n];if(o)return o;n++}return e.length<s.length?e.length===1&&e[0]===40+40?-1:1:e.length>s.length?s.length===1&&s[0]===40+40?1:-1:0}function ms(e,s){let n=0;const o=e.score,a=s.score;for(;n<o.length&&n<a.length;){const c=fs(o[n],a[n]);if(c)return c;n++}if(Math.abs(a.length-o.length)===1){if(ot(o))return 1;if(ot(a))return-1}return a.length-o.length}function ot(e){const s=e[e.length-1];return e.length>0&&s[s.length-1]<0}const vs={type:0,value:""},ps=/[a-zA-Z0-9_]/;function gs(e){if(!e)return[[]];if(e==="/")return[[vs]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function s(g){throw new Error(`ERR (${n})/"${l}": ${g}`)}let n=0,o=n;const a=[];let c;function v(){c&&a.push(c),c=[]}let d=0,r,l="",i="";function h(){l&&(n===0?c.push({type:0,value:l}):n===1||n===2||n===3?(c.length>1&&(r==="*"||r==="+")&&s(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),c.push({type:1,value:l,regexp:i,repeatable:r==="*"||r==="+",optional:r==="*"||r==="?"})):s("Invalid state to consume buffer"),l="")}function m(){l+=r}for(;d<e.length;){if(r=e[d++],r==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:r==="/"?(l&&h(),v()):r===":"?(h(),n=1):m();break;case 4:m(),n=o;break;case 1:r==="("?n=2:ps.test(r)?m():(h(),n=0,r!=="*"&&r!=="?"&&r!=="+"&&d--);break;case 2:r===")"?i[i.length-1]=="\\"?i=i.slice(0,-1)+r:n=3:i+=r;break;case 3:h(),n=0,r!=="*"&&r!=="?"&&r!=="+"&&d--,i="";break;default:s("Unknown state");break}}return n===2&&s(`Unfinished custom RegExp for param "${l}"`),h(),v(),a}function _s(e,s,n){const o=hs(gs(e.path),n),a=I(o,{record:e,parent:s,children:[],alias:[]});return s&&!a.record.aliasOf==!s.record.aliasOf&&s.children.push(a),a}function xs(e,s){const n=[],o=new Map;s=rt({strict:!1,end:!0,sensitive:!1},s);function a(i){return o.get(i)}function c(i,h,m){const g=!m,_=bs(i);_.aliasOf=m&&m.record;const N=rt(s,i),f=[_];if("alias"in i){const z=typeof i.alias=="string"?[i.alias]:i.alias;for(const G of z)f.push(I({},_,{components:m?m.record.components:_.components,path:G,aliasOf:m?m.record:_}))}let w,S;for(const z of f){const{path:G}=z;if(h&&G[0]!=="/"){const x=h.record.path,C=x[x.length-1]==="/"?"":"/";z.path=h.record.path+(G&&C+G)}if(w=_s(z,h,N),m?m.alias.push(w):(S=S||w,S!==w&&S.alias.push(w),g&&i.name&&!it(w)&&v(i.name)),_.children){const x=_.children;for(let C=0;C<x.length;C++)c(x[C],w,m&&m.children[C])}m=m||w,(w.record.components&&Object.keys(w.record.components).length||w.record.name||w.record.redirect)&&r(w)}return S?()=>{v(S)}:ve}function v(i){if(wt(i)){const h=o.get(i);h&&(o.delete(i),n.splice(n.indexOf(h),1),h.children.forEach(v),h.alias.forEach(v))}else{const h=n.indexOf(i);h>-1&&(n.splice(h,1),i.record.name&&o.delete(i.record.name),i.children.forEach(v),i.alias.forEach(v))}}function d(){return n}function r(i){let h=0;for(;h<n.length&&ms(i,n[h])>=0&&(i.record.path!==n[h].record.path||!$t(i,n[h]));)h++;n.splice(h,0,i),i.record.name&&!it(i)&&o.set(i.record.name,i)}function l(i,h){let m,g={},_,N;if("name"in i&&i.name){if(m=o.get(i.name),!m)throw de(1,{location:i});N=m.record.name,g=I(at(h.params,m.keys.filter(S=>!S.optional).map(S=>S.name)),i.params&&at(i.params,m.keys.map(S=>S.name))),_=m.stringify(g)}else if("path"in i)_=i.path,m=n.find(S=>S.re.test(_)),m&&(g=m.parse(_),N=m.record.name);else{if(m=h.name?o.get(h.name):n.find(S=>S.re.test(h.path)),!m)throw de(1,{location:i,currentLocation:h});N=m.record.name,g=I({},h.params,i.params),_=m.stringify(g)}const f=[];let w=m;for(;w;)f.unshift(w.record),w=w.parent;return{name:N,path:_,params:g,matched:f,meta:ws(f)}}return e.forEach(i=>c(i)),{addRoute:c,resolve:l,removeRoute:v,getRoutes:d,getRecordMatcher:a}}function at(e,s){const n={};for(const o of s)o in e&&(n[o]=e[o]);return n}function bs(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:ys(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function ys(e){const s={},n=e.props||!1;if("component"in e)s.default=n;else for(const o in e.components)s[o]=typeof n=="boolean"?n:n[o];return s}function it(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ws(e){return e.reduce((s,n)=>I(s,n.meta),{})}function rt(e,s){const n={};for(const o in e)n[o]=o in s?s[o]:e[o];return n}function $t(e,s){return s.children.some(n=>n===e||$t(e,n))}const Et=/#/g,ks=/&/g,$s=/\//g,Es=/=/g,Rs=/\?/g,Rt=/\+/g,Cs=/%5B/g,Ps=/%5D/g,Ct=/%5E/g,Ss=/%60/g,Pt=/%7B/g,Ms=/%7C/g,St=/%7D/g,As=/%20/g;function Ke(e){return encodeURI(""+e).replace(Ms,"|").replace(Cs,"[").replace(Ps,"]")}function js(e){return Ke(e).replace(Pt,"{").replace(St,"}").replace(Ct,"^")}function He(e){return Ke(e).replace(Rt,"%2B").replace(As,"+").replace(Et,"%23").replace(ks,"%26").replace(Ss,"`").replace(Pt,"{").replace(St,"}").replace(Ct,"^")}function Bs(e){return He(e).replace(Es,"%3D")}function Ns(e){return Ke(e).replace(Et,"%23").replace(Rs,"%3F")}function Os(e){return e==null?"":Ns(e).replace($s,"%2F")}function we(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Is(e){const s={};if(e===""||e==="?")return s;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<o.length;++a){const c=o[a].replace(Rt," "),v=c.indexOf("="),d=we(v<0?c:c.slice(0,v)),r=v<0?null:we(c.slice(v+1));if(d in s){let l=s[d];J(l)||(l=s[d]=[l]),l.push(r)}else s[d]=r}return s}function lt(e){let s="";for(let n in e){const o=e[n];if(n=Bs(n),o==null){o!==void 0&&(s+=(s.length?"&":"")+n);continue}(J(o)?o.map(c=>c&&He(c)):[o&&He(o)]).forEach(c=>{c!==void 0&&(s+=(s.length?"&":"")+n,c!=null&&(s+="="+c))})}return s}function Ts(e){const s={};for(const n in e){const o=e[n];o!==void 0&&(s[n]=J(o)?o.map(a=>a==null?null:""+a):o==null?o:""+o)}return s}const Ge=Symbol(""),ct=Symbol(""),Ce=Symbol(""),qe=Symbol(""),De=Symbol("");function fe(){let e=[];function s(o){return e.push(o),()=>{const a=e.indexOf(o);a>-1&&e.splice(a,1)}}function n(){e=[]}return{add:s,list:()=>e,reset:n}}function Mt(e,s,n){const o=()=>{e[s].delete(n)};vt(o),It(o),Tt(()=>{e[s].add(n)}),e[s].add(n)}function Ls(e){const s=ne(Ge,{}).value;s&&Mt(s,"leaveGuards",e)}function zs(e){const s=ne(Ge,{}).value;s&&Mt(s,"updateGuards",e)}function ae(e,s,n,o,a){const c=o&&(o.enterCallbacks[a]=o.enterCallbacks[a]||[]);return()=>new Promise((v,d)=>{const r=h=>{h===!1?d(de(4,{from:n,to:s})):h instanceof Error?d(h):cs(h)?d(de(2,{from:s,to:h})):(c&&o.enterCallbacks[a]===c&&typeof h=="function"&&c.push(h),v())},l=e.call(o&&o.instances[a],s,n,r);let i=Promise.resolve(l);e.length<3&&(i=i.then(r)),i.catch(h=>d(h))})}function Le(e,s,n,o){const a=[];for(const c of e)for(const v in c.components){let d=c.components[v];if(!(s!=="beforeRouteEnter"&&!c.instances[v]))if(Hs(d)){const l=(d.__vccOpts||d)[s];l&&a.push(ae(l,n,o,c,v))}else{let r=d();a.push(()=>r.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${v}" at "${c.path}"`));const i=Kt(l)?l.default:l;c.components[v]=i;const m=(i.__vccOpts||i)[s];return m&&ae(m,n,o,c,v)()}))}}return a}function Hs(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ut(e){const s=ne(Ce),n=ne(qe),o=q(()=>s.resolve(K(e.to))),a=q(()=>{const{matched:r}=o.value,{length:l}=r,i=r[l-1],h=n.matched;if(!i||!h.length)return-1;const m=h.findIndex(ue.bind(null,i));if(m>-1)return m;const g=dt(r[l-2]);return l>1&&dt(i)===g&&h[h.length-1].path!==g?h.findIndex(ue.bind(null,r[l-2])):m}),c=q(()=>a.value>-1&&Ks(n.params,o.value.params)),v=q(()=>a.value>-1&&a.value===n.matched.length-1&&bt(n.params,o.value.params));function d(r={}){return Us(r)?s[K(e.replace)?"replace":"push"](K(e.to)).catch(ve):Promise.resolve()}return{route:o,href:q(()=>o.value.href),isActive:c,isExactActive:v,navigate:d}}const Ds=pt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ut,setup(e,{slots:s}){const n=mt(ut(e)),{options:o}=ne(Ce),a=q(()=>({[ht(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[ht(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const c=s.default&&s.default(n);return e.custom?c:gt("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},c)}}}),Vs=Ds;function Us(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const s=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return e.preventDefault&&e.preventDefault(),!0}}function Ks(e,s){for(const n in s){const o=s[n],a=e[n];if(typeof o=="string"){if(o!==a)return!1}else if(!J(a)||a.length!==o.length||o.some((c,v)=>c!==a[v]))return!1}return!0}function dt(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ht=(e,s,n)=>e??s??n,Gs=pt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:s,slots:n}){const o=ne(De),a=q(()=>e.route||o.value),c=ne(ct,0),v=q(()=>{let l=K(c);const{matched:i}=a.value;let h;for(;(h=i[l])&&!h.components;)l++;return l}),d=q(()=>a.value.matched[v.value]);Oe(ct,q(()=>v.value+1)),Oe(Ge,d),Oe(De,a);const r=E();return ke(()=>[r.value,d.value,e.name],([l,i,h],[m,g,_])=>{i&&(i.instances[h]=l,g&&g!==i&&l&&l===m&&(i.leaveGuards.size||(i.leaveGuards=g.leaveGuards),i.updateGuards.size||(i.updateGuards=g.updateGuards))),l&&i&&(!g||!ue(i,g)||!m)&&(i.enterCallbacks[h]||[]).forEach(N=>N(l))},{flush:"post"}),()=>{const l=a.value,i=e.name,h=d.value,m=h&&h.components[i];if(!m)return ft(n.default,{Component:m,route:l});const g=h.props[i],_=g?g===!0?l.params:typeof g=="function"?g(l):g:null,f=gt(m,I({},_,s,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[i]=null)},ref:r}));return ft(n.default,{Component:f,route:l})||f}}});function ft(e,s){if(!e)return null;const n=e(s);return n.length===1?n[0]:n}const qs=Gs;function Fs(e){const s=xs(e.routes,e),n=e.parseQuery||Is,o=e.stringifyQuery||lt,a=e.history,c=fe(),v=fe(),d=fe(),r=Nt(oe);let l=oe;ce&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const i=Ie.bind(null,u=>""+u),h=Ie.bind(null,Os),m=Ie.bind(null,we);function g(u,k){let b,$;return wt(u)?(b=s.getRecordMatcher(u),$=k):$=u,s.addRoute($,b)}function _(u){const k=s.getRecordMatcher(u);k&&s.removeRoute(k)}function N(){return s.getRoutes().map(u=>u.record)}function f(u){return!!s.getRecordMatcher(u)}function w(u,k){if(k=I({},k||r.value),typeof u=="string"){const A=Te(n,u,k.path),U=s.resolve({path:A.path},k),he=a.createHref(A.fullPath);return I(A,U,{params:m(U.params),hash:we(A.hash),redirectedFrom:void 0,href:he})}let b;if("path"in u)b=I({},u,{path:Te(n,u.path,k.path).path});else{const A=I({},u.params);for(const U in A)A[U]==null&&delete A[U];b=I({},u,{params:h(u.params)}),k.params=h(k.params)}const $=s.resolve(b,k),L=u.hash||"";$.params=i(m($.params));const V=Ft(o,I({},u,{hash:js(L),path:$.path})),j=a.createHref(V);return I({fullPath:V,hash:L,query:o===lt?Ts(u.query):u.query||{}},$,{redirectedFrom:void 0,href:j})}function S(u){return typeof u=="string"?Te(n,u,r.value.path):I({},u)}function z(u,k){if(l!==u)return de(8,{from:k,to:u})}function G(u){return O(u)}function x(u){return G(I(S(u),{replace:!0}))}function C(u){const k=u.matched[u.matched.length-1];if(k&&k.redirect){const{redirect:b}=k;let $=typeof b=="function"?b(u):b;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=S($):{path:$},$.params={}),I({query:u.query,hash:u.hash,params:"path"in $?{}:u.params},$)}}function O(u,k){const b=l=w(u),$=r.value,L=u.state,V=u.force,j=u.replace===!0,A=C(b);if(A)return O(I(S(A),{state:typeof A=="object"?I({},L,A.state):L,force:V,replace:j}),k||b);const U=b;U.redirectedFrom=k;let he;return!V&&Wt(o,$,b)&&(he=de(16,{to:U,from:$}),Qe($,$,!0,!1)),(he?Promise.resolve(he):T(U,$)).catch(Q=>te(Q)?te(Q,2)?Q:Ae(Q):Me(Q,U,$)).then(Q=>{if(Q){if(te(Q,2))return O(I({replace:j},S(Q.to),{state:typeof Q.to=="object"?I({},L,Q.to.state):L,force:V}),k||U)}else Q=D(U,$,!0,j,L);return M(U,$,Q),Q})}function H(u,k){const b=z(u,k);return b?Promise.reject(b):Promise.resolve()}function T(u,k){let b;const[$,L,V]=Ws(u,k);b=Le($.reverse(),"beforeRouteLeave",u,k);for(const A of $)A.leaveGuards.forEach(U=>{b.push(ae(U,u,k))});const j=H.bind(null,u,k);return b.push(j),le(b).then(()=>{b=[];for(const A of c.list())b.push(ae(A,u,k));return b.push(j),le(b)}).then(()=>{b=Le(L,"beforeRouteUpdate",u,k);for(const A of L)A.updateGuards.forEach(U=>{b.push(ae(U,u,k))});return b.push(j),le(b)}).then(()=>{b=[];for(const A of u.matched)if(A.beforeEnter&&!k.matched.includes(A))if(J(A.beforeEnter))for(const U of A.beforeEnter)b.push(ae(U,u,k));else b.push(ae(A.beforeEnter,u,k));return b.push(j),le(b)}).then(()=>(u.matched.forEach(A=>A.enterCallbacks={}),b=Le(V,"beforeRouteEnter",u,k),b.push(j),le(b))).then(()=>{b=[];for(const A of v.list())b.push(ae(A,u,k));return b.push(j),le(b)}).catch(A=>te(A,8)?A:Promise.reject(A))}function M(u,k,b){for(const $ of d.list())$(u,k,b)}function D(u,k,b,$,L){const V=z(u,k);if(V)return V;const j=k===oe,A=ce?history.state:{};b&&($||j?a.replace(u.fullPath,I({scroll:j&&A&&A.scroll},L)):a.push(u.fullPath,L)),r.value=u,Qe(u,k,b,j),Ae()}let R;function F(){R||(R=a.listen((u,k,b)=>{if(!Ye.listening)return;const $=w(u),L=C($);if(L){O(I(L,{replace:!0}),$).catch(ve);return}l=$;const V=r.value;ce&&ss(et(V.fullPath,b.delta),Re()),T($,V).catch(j=>te(j,12)?j:te(j,2)?(O(j.to,$).then(A=>{te(A,20)&&!b.delta&&b.type===_e.pop&&a.go(-1,!1)}).catch(ve),Promise.reject()):(b.delta&&a.go(-b.delta,!1),Me(j,$,V))).then(j=>{j=j||D($,V,!1),j&&(b.delta&&!te(j,8)?a.go(-b.delta,!1):b.type===_e.pop&&te(j,20)&&a.go(-1,!1)),M($,V,j)}).catch(ve)}))}let W=fe(),Se=fe(),be;function Me(u,k,b){Ae(u);const $=Se.list();return $.length?$.forEach(L=>L(u,k,b)):console.error(u),Promise.reject(u)}function Bt(){return be&&r.value!==oe?Promise.resolve():new Promise((u,k)=>{W.add([u,k])})}function Ae(u){return be||(be=!u,F(),W.list().forEach(([k,b])=>u?b(u):k()),W.reset()),u}function Qe(u,k,b,$){const{scrollBehavior:L}=e;if(!ce||!L)return Promise.resolve();const V=!b&&ns(et(u.fullPath,0))||($||!b)&&history.state&&history.state.scroll||null;return Ot().then(()=>L(u,k,V)).then(j=>j&&ts(j)).catch(j=>Me(j,u,k))}const je=u=>a.go(u);let Be;const Ne=new Set,Ye={currentRoute:r,listening:!0,addRoute:g,removeRoute:_,hasRoute:f,getRoutes:N,resolve:w,options:e,push:G,replace:x,go:je,back:()=>je(-1),forward:()=>je(1),beforeEach:c.add,beforeResolve:v.add,afterEach:d.add,onError:Se.add,isReady:Bt,install(u){const k=this;u.component("RouterLink",Vs),u.component("RouterView",qs),u.config.globalProperties.$router=k,Object.defineProperty(u.config.globalProperties,"$route",{enumerable:!0,get:()=>K(r)}),ce&&!Be&&r.value===oe&&(Be=!0,G(a.location).catch(L=>{}));const b={};for(const L in oe)b[L]=q(()=>r.value[L]);u.provide(Ce,k),u.provide(qe,mt(b)),u.provide(De,r);const $=u.unmount;Ne.add(u),u.unmount=function(){Ne.delete(u),Ne.size<1&&(l=oe,R&&R(),R=null,r.value=oe,Be=!1,be=!1),$()}}};return Ye}function le(e){return e.reduce((s,n)=>s.then(()=>n()),Promise.resolve())}function Ws(e,s){const n=[],o=[],a=[],c=Math.max(s.matched.length,e.matched.length);for(let v=0;v<c;v++){const d=s.matched[v];d&&(e.matched.find(l=>ue(l,d))?o.push(d):n.push(d));const r=e.matched[v];r&&(s.matched.find(l=>ue(l,r))||a.push(r))}return[n,o,a]}function Fe(){return ne(Ce)}function We(){return ne(qe)}const Qs="/img/logo.svg",Ys={class:"dropdown bg-white rounded-md py-1 z-50",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},Xs={class:"block px-4 py-2"},Zs={class:"opacity-75"},Js=t("div",{class:"my-1 border-b border-base-300"},null,-1),en=t("div",{class:"relative block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},[t("a",{class:"stretched-link",href:"/admin/logout"},"登出")],-1),tn={__name:"UserMenu",props:{userName:String,userAccount:String,toleft:Number,totop:Number},emits:["close"],setup(e,{emit:s}){const n=e;Ve();const o=E(null),a=q(()=>{var d;return String(String(n.toleft+32-((d=o.value)==null?void 0:d.clientWidth)))}),c=q(()=>String(n.totop+40)),v=d=>{s("close")};return(d,r)=>{const l=xt("click-away");return $e((p(),y("div",{ref_key:"userMenu",ref:o,class:"shadow-lg border border-base-300 rounded-md",style:_t("position: fixed; left: "+K(a)+"px; top: "+K(c)+"px; min-width: max-content; z-index: 50; --radix-popper-transform-origin: 100% 0px;")},[t("div",Ys,[t("div",Xs,[t("div",null,[t("strong",null,P(e.userName),1)]),t("div",Zs,P(e.userAccount),1)]),Js,en])],4)),[[l,v]])}}};const sn={class:"bg-base-200 border-b border-base-300 pt-4 mb-6"},nn={class:"container mx-auto mb-4 md:mb-6"},on={class:"flex justify-between items-center px-2 md:px-0"},an={href:"/",class:"flex items-center",style:{"max-width":"80%"}},rn=t("img",{width:"18",height:"18",src:Qs},null,-1),ln={role:"banner",class:"text-lg font-semibold ml-3 truncate"},cn=t("span",{class:"badge badge-secondary"},"仅供测试",-1),un={class:"flex items-center"},dn=t("a",{class:"hidden text-gray-600 hover:text-gray-800 sm:inline-block px-2 py-1",href:"https://github.com/gps949/tailscale/releases",target:"_blank",rel:"noopener noreferrer"},"下载客户端",-1),hn={class:"relative rounded-full"},fn={class:"relative shrink-0 rounded-full overflow-hidden w-8 h-8"},mn={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-8 h-8",style:{"background-color":"rgb(161, 56, 33)"}},vn={class:"relative overflow-hidden",style:{top:"1px"}},pn={id:"nav",class:"navigation flex items-center overflow-auto left-1 relative md:container md:mx-auto md:px-0 md:-left-3"},gn=["stroke-width"],_n=t("rect",{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"},null,-1),xn=t("rect",{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"},null,-1),bn=t("line",{x1:"6",y1:"6",x2:"6.01",y2:"6"},null,-1),yn=t("line",{x1:"6",y1:"18",x2:"6.01",y2:"18"},null,-1),wn=[_n,xn,bn,yn],kn=["stroke-width"],$n=t("circle",{cx:"12",cy:"12",r:"3"},null,-1),En=t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1),Rn=[$n,En],Cn={__name:"Console",setup(e){Fe();const s=We(),n=E(null),o=E(0),a=E(0);function c(){var _,N;o.value=(_=n.value)==null?void 0:_.getBoundingClientRect().left,a.value=(N=n.value)==null?void 0:N.getBoundingClientRect().top}const v=E(!1);function d(){v.value=!v.value,v.value?document.body.style.pointerEvents="none":document.body.style.removeProperty("pointer-events")}const r=q(()=>{let _=s.path;if(_=="/"||_.substring(0,8)=="/machine")return"machine";if(_.substring(0,8)=="/setting")return"setting"}),l=E(""),i=E(""),h=E(""),m=E(""),g=E("");return xe(()=>{c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),axios.get("/admin/api/self").then(function(_){(_.data.errormsg==null||_.data.errormsg==="")&&(l.value=_.data.useraccount,i.value=_.data.basedomain,h.value=_.data.username,m.value=_.data.usernamehead,g.value=_.data.orgname)}).catch(function(_){alert(_)}).then(function(){})}),(_,N)=>{const f=ge("router-link"),w=ge("router-view");return p(),y(re,null,[t("div",sn,[t("div",nn,[t("header",on,[t("a",an,[rn,t("div",ln,P(g.value),1),cn]),t("nav",un,[dn,t("div",{ref_key:"userAvatar",ref:n,onClick:d,class:"heart-wrapper ml-2"},[t("button",hn,[t("div",fn,[t("div",mn,P(m.value),1)])])],512),(p(),X(ie,{to:"body"},[v.value?(p(),X(tn,{key:0,toleft:o.value,totop:a.value,"user-account":l.value,"user-name":h.value,onClose:d},null,8,["toleft","totop","user-account","user-name"])):B("",!0)]))])])]),t("div",vn,[t("nav",pn,[Y(f,{class:"whitespace-nowrap py-2 group relative",to:"/machines"},{default:ee(()=>[t("div",{class:Z([{"text-blue-600 after:visible":K(r)=="machine","text-gray-600 group-hover:text-gray-800 after:invisible":K(r)!="machine"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(p(),y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":K(r)=="machine"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},wn,8,gn)),t("div",{class:Z({"font-medium":K(r)=="machine"})},"设备",2)],2)]),_:1}),Y(f,{class:"whitespace-nowrap py-2 group relative",to:"/settings"},{default:ee(()=>[t("div",{class:Z([{"text-blue-600 after:visible":K(r)=="setting","text-gray-600 group-hover:text-gray-800 after:invisible":K(r)!="setting"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(p(),y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":K(r)=="setting"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},Rn,8,kn)),t("div",{class:Z({"font-medium":K(r)=="setting"})},"设置",2)],2)]),_:1})])])]),Y(w)],64)}}},Pn={class:"dropdown bg-white rounded-md py-1 z-50",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},Sn=["hidden"],Mn=["hidden"],An=t("div",{class:"my-1 border-b border-base-300"},null,-1),jn=["hidden"],Bn=["hidden"],Nn=t("div",{class:"my-1 border-b border-base-300"},null,-1),At={__name:"MachineMenu",props:{toleft:Number,totop:Number,neverExpires:Boolean},emits:["close"],setup(e,{emit:s}){const n=e,o=E(!0);Ve();const a=E(null),c=q(()=>{var r;return String(String(n.toleft+32-((r=a.value)==null?void 0:r.clientWidth)))}),v=q(()=>{var r;return n.totop<=window.innerHeight/2?String(n.totop+36):String(n.totop-10-((r=a.value)==null?void 0:r.clientHeight))}),d=r=>{s("close")};return(r,l)=>{const i=xt("click-away");return $e((p(),y("div",{ref_key:"machineMenu",ref:a,class:"shadow-xl border border-base-300 rounded-md",style:_t("position: fixed; left: "+K(c)+"px; top: "+K(v)+"px; min-width: max-content; z-index: 50; --radix-popper-transform-origin: 0% 0px;")},[t("div",Pn,[t("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 编辑机器名称…",8,Sn),t("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 分享…",8,Mn),t("div",{onClick:l[0]||(l[0]=h=>r.$emit("set-expires")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},P(e.neverExpires?"启用密钥过期":"禁用密钥过期"),1),An,t("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 编辑子网转发…",8,jn),t("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 编辑ACL标签…",8,Bn),Nn,t("div",{onClick:l[1]||(l[1]=h=>r.$emit("showdialog-remove")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100 text-red-400"}," 移除…")])],4)),[[i,d]])}}},On={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},In={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},Tn={class:"font-semibold text-lg truncate"},Ln=t("p",{class:"text-gray-700 mb-4"},"这个设备将从您的蜃境网络中永久删除！如需重新添加该设备，您将需要在该设备上重新进行授权",-1),zn={class:"flex mt-10 justify-end space-x-4"},Hn=t("button",{class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit",type:"submit"},"删除设备",-1),Dn=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),Vn=[Dn],jt={__name:"RemoveMachine",props:{machineName:String},setup(e){return Ve(),(s,n)=>(p(),y("div",{onClick:n[3]||(n[3]=Xe(o=>s.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-10 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[t("div",On,[t("header",In,[t("div",Tn,"删除 "+P(e.machineName),1)]),t("form",{onSubmit:n[1]||(n[1]=Xe(o=>s.$emit("confirm"),["prevent"]))},[Ln,t("footer",zn,[t("button",{onClick:n[0]||(n[0]=o=>s.$emit("close")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消"),Hn])],32),t("button",{onClick:n[2]||(n[2]=o=>s.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},Vn)])]))}},Un={class:"container mx-auto pb-20 md:pb-24"},Kn={class:"mb-24"},Gn=t("header",{class:"mb-8"},[t("div",{class:"flex justify-between items-center"},[t("div",{class:"flex items-center"},[t("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2",tabindex:"-1"}," 设备 ")])])],-1),qn={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-full px-2 py-1 leading-none text-sm mb-8"},Fn={class:"table w-full"},Wn=t("thead",null,[t("tr",null,[t("th",{class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"}," 设备 "),t("th",{class:"hidden md:table-cell md:w-1/4"},"IP"),t("th",{class:"hidden md:table-cell w-1/4 lg:w-1/5"},"系统"),t("th",{class:"hidden lg:table-cell md:flex-auto"},"状态"),t("th",{class:"table-cell justify-end ml-auto md:ml-0 relative w-1/6 lg:w-12"},[t("span",{class:"sr-only"},"设备操作菜单")])])],-1),Qn=["id","v-if","onMouseenter","onMouseleave"],Yn={class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"},Xn={class:"items-center text-gray-900"},Zn={class:"font-semibold hover:text-blue-500"},Jn={class:"stretched-link"},eo={class:"md:hidden flex space-x-1 truncate"},to={class:"text-sm"},so=t("span",null,"·",-1),no={class:"md:hidden text-gray-600 text-sm",title:"m.version"},oo={class:"flex items-center text-gray-600 text-sm"},ao={class:"my-1"},io={key:0},ro=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1),lo=[ro],co={key:1},uo=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1),ho=[uo],fo={key:2},mo=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1),vo=[mo],po={key:3},go=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1),_o=[go],xo={key:4},bo={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},yo={key:5},wo=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"}," 出口节点 ",-1),ko=[wo],$o={key:6},Eo=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"}," 子网转发 ",-1),Ro=[Eo],Co={class:"hidden md:table-cell md:w-1/4"},Po={class:"font-medium pr-6"},So={class:"truncate"},Mo={key:0,class:"absolute -mt-1 -ml-2 -top-px -left-px shadow-md cursor-pointer rounded-md active:shadow-sm transition-shadow duration-100 ease-in-out z-50",style:{visibility:"visible","max-width":"934px"}},Ao={class:"flex border rounded-md button-outline bg-white"},jo={class:"inline-block select-none truncate"},Bo=t("span",{class:"cursor-pointer text-blue-500 pl-2"},"复制",-1),No={class:"hidden md:table-cell w-1/4 lg:w-1/5"},Oo={class:"flex items-center relative"},Io={class:"text-sm text-gray-600"},To={class:"hidden lg:table-cell md:flex-auto"},Lo={class:"inline-flex items-center cursor-default"},zo=["data-tip"],Ho=["data-tip"],Do={class:"table-cell justify-end ml-auto md:ml-0 relative w-12 justify-items-end items-center md:items-start"},Vo=["onClick"],Uo=Ee('<button class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-50"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></button>',1),Ko=[Uo],Go=["onClick"],qo=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[t("circle",{cx:"12",cy:"12",r:"1"}),t("circle",{cx:"19",cy:"12",r:"1"}),t("circle",{cx:"5",cy:"12",r:"1"})],-1),Fo=[qo],Wo={__name:"Machines",setup(e){const s=E(null),n=E(0),o=E(0);function a(){var T,M;s.value!=null&&(n.value=((T=s.value)==null?void 0:T.getBoundingClientRect().left)+14,o.value=(M=s.value)==null?void 0:M.getBoundingClientRect().top)}function c(T,M){var D,R,F,W;for(s.value=M.target;((D=s.value)==null?void 0:D.tagName)!="DIV"&&((R=s.value)==null?void 0:R.tagName)!="div";)s.value=s.value.parentNode;l.value=T,n.value=((F=s.value)==null?void 0:F.getBoundingClientRect().left)+14,o.value=(W=s.value)==null?void 0:W.getBoundingClientRect().top,g.value=!0}function v(){s.value=null,g.value=!1}const d=E(!1),r=E("");ke(d,()=>{d.value&&setTimeout(function(){d.value=!1},5e3)});const l=E("-1");function i(T){l.value=T,_.value=!0}function h(){_.value=!1}const m=E(!1),g=E(!1),_=E(!1),N=E(!1);function f(){_.value=!1,v(l.value),N.value=!0}const w=E({}),S=q(()=>Object.getOwnPropertyNames(w.value).length);let z;function G(){return new Promise((T,M)=>{axios.get("/admin/api/machines").then(function(D){if((D.data.needreauth!=null||D.data.needreauth==!0)&&(r.value=D.data.needreauthreason+"，登录状态失效，请重新登录",d.value=!0,M()),D.data.errormsg==null||D.data.errormsg===""){for(var R in D.data.mlist){w.value[R]=D.data.mlist[R];let F=w.value[R].expirydesc.slice(-2);w.value[R].expirydesc=="马上就要过期"||F=="分钟"||F=="小时"||F=="1天"?w.value[R].soonexpiry=!0:w.value[R].soonexpiry=!1}T()}else D.data.errormsg!=null&&(r.value="获取机器信息出错："+D.data.errormsg,d.value=!0,M())}).catch(function(D){r.value="更新页面出错："+D,d.value=!0,M()}).then(function(){})})}xe(()=>{a(),window.addEventListener("resize",a),window.addEventListener("scroll",a),G().then().catch(),z=setInterval(()=>{G().then().catch()},15e3)}),vt(()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a)}),Ls(()=>{clearInterval(z)});function x(T){v(),axios.post("/admin/api/machines",{mid:T,state:"set-expires"}).then(function(M){M.data.status=="success"?(w.value[T].neverExpires=M.data.data.neverExpires,w.value[T].expirydesc=M.data.data.expires,M.data.data.neverExpires==!0?r.value="已禁用密钥过期":r.value="已启用密钥过期",d.value=!0):(r.value="失败："+M.data.status.substring(6),d.value=!0)}).catch(function(M){console.log(M)})}function C(T){axios.post("/admin/api/machine/remove",{mid:T}).then(function(M){M.data.status=="OK"?(N.value=!1,r.value=w.value[T].givename+"已从您的蜃境网络移除！",d.value=!0,delete w.value[T]):alert("失败："+M.data.errmsg)}).catch(function(M){console.log(M)})}function O(){navigator.clipboard.writeText(w.value[l.value].mipv4).then(function(){r.value="蜃境网络IPv4地址已复制到粘贴板！",d.value=!0})}function H(){navigator.clipboard.writeText(w.value[l.value].mipv6).then(function(){r.value="蜃境网络IPv6地址已复制到粘贴板！",d.value=!0})}return(T,M)=>{const D=ge("router-link");return p(),y(re,null,[t("main",Un,[t("section",Kn,[Gn,t("div",qn,P(K(S))+" 个设备 ",1),t("table",Fn,[Wn,t("tbody",null,[(p(!0),y(re,null,ye(w.value,(R,F)=>(p(),y("tr",{id:F,"v-if":w.value[F]!=T.nil,onMouseenter:W=>i(F),onMouseleave:W=>h(),class:"w-full px-0.5 hover"},[t("td",Yn,[Y(D,{class:"relative",to:"/machines/"+R.mipv4},{default:ee(()=>[t("div",Xn,[t("p",Zn,[t("span",{class:Z([{"bg-green-500":R.ifonline,"bg-gray-300":!R.ifonline},"inline-block w-2 h-2 rounded-full relative -top-px lg:hidden mr-2"])},null,2),t("a",Jn,P(R.givename),1)]),t("div",eo,[t("span",to,P(R.mipv4),1),so,t("span",no,P(R.os),1)])]),t("div",null,[t("div",oo,[t("span",null,P(R.useraccount),1)])])]),_:2},1032,["to"]),t("div",ao,[t("div",null,[R.issharedin?(p(),y("span",io,lo)):B("",!0),R.issharedout?(p(),y("span",co,ho)):B("",!0),R.expirydesc=="已过期"?(p(),y("span",fo,vo)):B("",!0),R.neverExpires?(p(),y("span",po,_o)):B("",!0),R.soonexpiry?(p(),y("span",xo,[t("div",bo,P(R.expirydesc),1)])):B("",!0),R.isexitnode?(p(),y("span",yo,ko)):B("",!0),R.issubnet?(p(),y("span",$o,Ro)):B("",!0)])])]),t("td",Co,[t("ul",null,[t("li",Po,[t("div",{onMouseenter:M[0]||(M[0]=W=>m.value=!0),onMouseleave:M[1]||(M[1]=W=>m.value=!1),class:"flex relative min-w-0"},[t("div",So,[t("span",null,P(R.mipv4),1)]),m.value&&l.value==F?(p(),y("div",Mo,[t("div",Ao,[t("div",{onClick:O,class:"flex min-w-0 py-1 px-2 hover:bg-gray-100 rounded-l-md"},[t("span",jo,[t("span",null,P(R.mipv4),1)]),Bo]),t("div",{onClick:H,class:"text-blue-500 py-1 px-2 border-l hover:bg-gray-100 rounded-r-md"}," IPv6 ")])])):B("",!0)],32)]),(p(!0),y(re,null,ye(R.msubnetlist,(W,Se)=>(p(),y("li",null,[t("span",null,P(W),1)]))),256))])]),t("td",No,[t("div",Oo,[t("div",null,P(R.os),1)]),t("div",Io,P(R.version),1)]),t("td",To,[t("span",null,[t("div",Lo,[t("span",{class:Z(["inline-block w-2 h-2 rounded-full mr-2",{"bg-green-500":R.ifonline,"bg-gray-300":!R.ifonline}])},null,2),R.ifonline?(p(),y("span",{key:0,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+R.lastseen},"已连接",8,zo)):(p(),y("span",{key:1,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+R.lastseen},P(R.lastseen),9,Ho))])])]),t("td",Do,[!_.value&&!g.value||l.value!=F?(p(),y("div",{key:0,onClick:W=>c(F,W),class:"flex-none w-12 -mt-0.5 relative"},Ko,8,Vo)):B("",!0),(_.value||g.value)&&l.value==F?(p(),y("div",{key:1,onClick:W=>c(F,W),class:"flex-none w-12 border button-outline bg-white shadow-md cursor-pointer focus:outline-none focus:ring -mt-0.5 relative py-0.5 px-2 rounded-md border-gray-300/100 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 transition-shadow duration-100 ease-in-out z-50"},Fo,8,Go)):B("",!0)])],40,Qn))),256))])])])]),(p(),X(ie,{to:".toast-container"},[Y(Ue,{show:d.value,msg:r.value,onClose:M[2]||(M[2]=R=>d.value=!1)},null,8,["show","msg"])])),(p(),X(ie,{to:"body"},[g.value?(p(),X(At,{key:0,toleft:n.value,totop:o.value,neverExpires:w.value[l.value].neverExpires,onClose:v,onSetExpires:M[3]||(M[3]=R=>x(l.value)),onShowdialogRemove:f},null,8,["toleft","totop","neverExpires"])):B("",!0)])),(p(),X(ie,{to:"body"},[N.value?(p(),X(jt,{key:0,"machine-name":w.value[l.value].givename,onClose:M[4]||(M[4]=R=>N.value=!1),onConfirm:M[5]||(M[5]=R=>C(l.value))},null,8,["machine-name"])):B("",!0)]))],64)}}},Qo={class:"container mx-auto pb-20 md:pb-24"},Yo={class:"mb-24"},Xo={class:"pb-4 mb-8"},Zo={class:"font-medium space-x-2 mb-5 truncate flex"},Jo=t("span",{class:"text-gray-400"},"/",-1),ea={class:"flex flex-wrap gap-2 items-center justify-between"},ta={class:"text-2xl font-semibold tracking-tight leading-tight truncate flex-shrink-0 max-w-full",tabindex:"-1"},sa={class:"flex"},na={class:"flex gap-2 flex-wrap"},oa=t("div",{class:"flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]),se("设备设置 ")],-1),aa=[oa],ia={class:"flex border-t border-gray-200 text-sm mt-4 pt-4"},ra={class:"max-w-sm"},la=t("div",{class:"text-gray-500 mb-2"},"归属于",-1),ca={class:"mt-0.5"},ua={class:"flex items-center text-gray-600 text-sm"},da={class:"relative shrink-0 rounded-full overflow-hidden w-5 h-5 text-xs mr-2"},ha={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-5 h-5 text-xs",style:{"background-color":"rgb(161, 56, 33)"}},fa={"data-state":"closed"},ma={key:0,class:"max-w-sm border-l border-gray-200 ml-4 pl-4"},va=t("p",{class:"text-gray-500 mb-2"},"状态",-1),pa={key:0},ga=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1),_a=[ga],xa={key:1},ba=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1),ya=[ba],wa={key:2},ka=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1),$a=[ka],Ea={key:3},Ra=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1),Ca=[Ra],Pa={key:4},Sa={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},Ma={key:5},Aa=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"}," 子网转发 ",-1),ja=[Aa],Ba={key:6},Na=t("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"}," 出口节点 ",-1),Oa=[Na],Ia={class:"mb-8"},Ta={class:"flex justify-between mb-4"},La=t("div",{class:"max-w-xl"},[t("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"子网转发"),t("p",{class:"text-gray-600"}," “子网转发”允许你暴露设备可访问物理网络路由给您的蜃境网络 ")],-1),za={key:0},Ha=t("button",{class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 mt-2"}," 配置 ",-1),Da=[Ha],Va={key:0,class:"p-4 md:p-6 border border-gray-200 rounded-md"},Ua=Ee('<ul class="leading-normal"><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 192.168.0.0/24 </li><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 192.168.1.0/24 </li><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 192.168.166.0/24 </li><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 192.168.168.0/24 </li><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 198.18.0.0/16 </li></ul>',1),Ka=[Ua],Ga={key:1,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},qa=t("div",{class:"flex justify-center"},[t("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备未暴露任何子网可供转发 ")],-1),Fa=[qa],Wa={key:2,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},Qa=t("div",{class:"flex justify-center"},[t("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备来自外部共享，不能暴露子网转发给你 ")],-1),Ya=[Qa],Xa={class:"mb-8"},Za=t("header",{class:"max-w-xl mb-4"},[t("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"设备信息"),t("p",{class:"text-gray-600"},"关于该设备网络的信息，用于调试连接问题")],-1),Ja={class:"p-4 md:p-6 border border-gray-200 rounded-md grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-2"},ei={class:"space-y-2"},ti={class:"flex text-sm"},si=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建者",-1),ni={class:"min-w-0 truncate"},oi={class:"flex text-sm"},ai=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备名称",-1),ii={class:"min-w-0"},ri={class:"flex relative min-w-0"},li={class:"truncate"},ci={key:0,class:"cursor-pointer text-blue-500 pl-2"},ui={class:"flex text-sm"},di=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"域名",-1),hi={class:"min-w-0"},fi={class:"flex relative min-w-0"},mi={class:"truncate"},vi={key:0,class:"cursor-pointer text-blue-500 pl-2"},pi={class:"flex text-sm"},gi=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"系统主机名",-1),_i={class:"min-w-0 truncate"},xi={class:"flex text-sm"},bi=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"操作系统",-1),yi={class:"min-w-0 truncate"},wi={class:"flex text-sm"},ki=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境客户端版本",-1),$i={class:"min-w-0 truncate"},Ei={class:"flex items-center"},Ri={class:"flex text-sm"},Ci=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv4",-1),Pi={class:"min-w-0"},Si={class:"flex relative min-w-0"},Mi={class:"truncate"},Ai={key:0,class:"cursor-pointer text-blue-500 pl-2"},ji={class:"flex text-sm"},Bi=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv6",-1),Ni={class:"min-w-0"},Oi={class:"flex relative min-w-0"},Ii={class:"truncate"},Ti={class:"inline-flex justify-start min-w-0 max-w-full"},Li={class:"truncate w-fit flex-shrink"},zi={key:0,class:"cursor-pointer text-blue-500 pl-2"},Hi={class:"flex text-sm"},Di=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备ID",-1),Vi={class:"min-w-0 truncate"},Ui={class:"flex text-sm"},Ki=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备端点信息",-1),Gi={class:"min-w-0 truncate"},qi={class:"pl-3 -indent-3"},Fi={class:"select-all"},Wi={class:"flex text-sm"},Qi=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"中继器",-1),Yi={class:"min-w-0 truncate"},Xi={key:0},Zi=t("li",null," 中继器未设定或出错 ",-1),Ji=[Zi],er={key:1},tr={class:"font-medium"},sr={key:0,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"relative inline-block ml-1 -top-px"},nr=t("polyline",{points:"20 6 9 17 4 12"},null,-1),or=[nr],ar={class:"space-y-2"},ir={class:"flex text-sm"},rr=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建于",-1),lr={class:"min-w-0 truncate"},cr={class:"flex text-sm"},ur=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"最近更新",-1),dr={class:"min-w-0 truncate"},hr={class:"flex text-sm"},fr=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"密钥过期",-1),mr={key:0,class:"min-w-0 truncate"},vr={key:1,class:"min-w-0 truncate"},pr=t("h2",{class:"pt-2 text-xs uppercase font-semibold text-gray-500 tracking-wide"}," 客户端连通性 ",-1),gr={class:"flex text-sm"},_r=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"复杂网络 Varies",-1),xr={key:0,class:"min-w-0 truncate"},br={key:1,class:"min-w-0 truncate"},yr={class:"flex text-sm"},wr=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"}," 需发夹机制 Hairpinning ",-1),kr={key:0,class:"min-w-0 truncate"},$r={key:1,class:"min-w-0 truncate"},Er={class:"flex text-sm"},Rr=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"IPv6",-1),Cr={key:0,class:"min-w-0 truncate"},Pr={key:1,class:"min-w-0 truncate"},Sr={class:"flex text-sm"},Mr=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UDP",-1),Ar={key:0,class:"min-w-0 truncate"},jr={key:1,class:"min-w-0 truncate"},Br={class:"flex text-sm"},Nr=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UPnP",-1),Or={key:0,class:"min-w-0 truncate"},Ir={key:1,class:"min-w-0 truncate"},Tr={class:"flex text-sm"},Lr=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"PCP",-1),zr={key:0,class:"min-w-0 truncate"},Hr={key:1,class:"min-w-0 truncate"},Dr={class:"flex text-sm"},Vr=t("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"NAT-PMP",-1),Ur={key:0,class:"min-w-0 truncate"},Kr={key:1,class:"min-w-0 truncate"},Gr={__name:"Machine",setup(e){const s=E(!1),n=Fe(),o=We(),a=E(!1),c=E("");ke(a,()=>{a.value&&setTimeout(function(){a.value=!1},5e3)});const v=q(()=>f.value.issharedin||f.value.issharedout||f.value.expirydesc=="已过期"||f.value.neverExpires||f.value.soonexpiry||f.value.isexitnode||f.value.issubnet),d=E(null),r=E(0),l=E(0),i=E(!1);function h(){var x,C;d.value!=null&&(r.value=((x=d.value)==null?void 0:x.getBoundingClientRect().left)+78,l.value=((C=d.value)==null?void 0:C.getBoundingClientRect().top)+20),window.onresize=()=>{var O,H;d.value!=null&&(r.value=((O=d.value)==null?void 0:O.getBoundingClientRect().left)+78,l.value=((H=d.value)==null?void 0:H.getBoundingClientRect().top)+20)},window.onscroll=()=>{var O,H;d.value!=null&&(r.value=((O=d.value)==null?void 0:O.getBoundingClientRect().left)+78,l.value=((H=d.value)==null?void 0:H.getBoundingClientRect().top)+20)}}function m(x){var C,O,H,T,M;for(d.value=x.target;((C=d.value)==null?void 0:C.tagName)!="BUTTON"&&((O=d.value)==null?void 0:O.tagName)!="button";)d.value=(H=d.value)==null?void 0:H.parentNode;r.value=((T=d.value)==null?void 0:T.getBoundingClientRect().left)+78,l.value=((M=d.value)==null?void 0:M.getBoundingClientRect().top)+20,i.value=!0}function g(){d.value=null,i.value=!1}const _=E(!1);function N(){g(),_.value=!0}const f=E({}),w=E(""),S=E("");xe(()=>{h(),axios.get("/admin/api/machines").then(function(x){if((x.data.needreauth!=null||x.data.needreauth==!0)&&(c.value=x.data.needreauthreason+"，登录状态失效，请重新登录",a.value=!0,reject()),x.data.errormsg==null||x.data.errormsg===""){S.value=x.data.basedomain;for(var C in x.data.mlist)if(x.data.mlist[C].mipv4===o.params.mip){f.value=x.data.mlist[C],w.value=C;let O=f.value.expirydesc.slice(-2);f.value.expirydesc=="马上就要过期"||O=="分钟"||O=="小时"||O=="1天"?f.value.soonexpiry=!0:f.value.soonexpiry=!1;break}}}).catch(function(x){alert(x)}).then(function(){})});function z(){g(),axios.post("/admin/api/machines",{mid:w.value,state:"set-expires"}).then(function(x){x.data.status=="success"?(f.value.neverExpires=x.data.data.neverExpires,f.value.expirydesc=x.data.data.expires,x.data.data.neverExpires==!0?c.value="已禁用密钥过期":c.value="已启用密钥过期",a.value=!0):(c.value="失败："+x.data.status.substring(6),a.value=!0)}).catch(function(x){console.log(x)})}function G(){axios.post("/admin/api/machine/remove",{mid:w}).then(function(x){x.data.status=="OK"?(_.value=!1,c.value=f.value.givename+"已从您的蜃境网络移除！",a.value=!0,n.push("/machines")):alert("失败："+x.data.errmsg)}).catch(function(x){console.log(x)})}return(x,C)=>{const O=ge("router-link");return p(),y(re,null,[t("main",Qo,[t("section",Yo,[t("header",Xo,[t("div",Zo,[Y(O,{to:"/machines",class:"text-blue-500"},{default:ee(()=>[se("全部设备")]),_:1}),Jo,t("span",null,P(f.value.mipv4),1)]),t("div",ea,[t("h1",ta,P(f.value.givename),1),t("div",sa,[t("div",na,[t("button",{onClick:C[0]||(C[0]=H=>m(H)),class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 min-w-0"},aa)])])]),t("div",ia,[t("div",ra,[la,t("div",ca,[t("div",ua,[t("div",da,[t("div",ha,P(f.value.usernamehead),1)]),t("span",fa,P(f.value.useraccount),1)])])]),K(v)?(p(),y("div",ma,[va,t("div",null,[f.value.issharedin?(p(),y("span",pa,_a)):B("",!0),f.value.issharedout?(p(),y("span",xa,ya)):B("",!0),f.value.expirydesc=="已过期"?(p(),y("span",wa,$a)):B("",!0),f.value.neverExpires?(p(),y("span",Ea,Ca)):B("",!0),f.value.soonexpiry?(p(),y("span",Pa,[t("div",Sa,P(f.value.expirydesc),1)])):B("",!0),f.value.isexitnode?(p(),y("span",Ma,ja)):B("",!0),f.value.issubnet?(p(),y("span",Ba,Oa)):B("",!0)])])):B("",!0)])]),t("section",Ia,[t("header",Ta,[La,f.value.issubnet?(p(),y("div",za,Da)):B("",!0)]),f.value.issubnet?(p(),y("div",Va,Ka)):B("",!0),!f.value.issubnet&&!f.value.issharedin?(p(),y("div",Ga,Fa)):B("",!0),f.value.issharedin?(p(),y("div",Wa,Ya)):B("",!0)]),t("section",Xa,[Za,t("div",Ja,[t("div",ei,[t("dl",ti,[si,t("dd",ni,P(f.value.useraccount),1)]),t("dl",oi,[ai,t("dd",ii,[t("div",ri,[t("div",li,P(f.value.givename),1),s.value?(p(),y("div",ci,"复制")):B("",!0)])])]),t("dl",ui,[di,t("dd",hi,[t("div",fi,[t("div",mi,P(f.value.givename)+"."+P(f.value.useraccount)+"."+P(S.value),1),s.value?(p(),y("div",vi,"复制")):B("",!0)])])]),t("dl",pi,[gi,t("dd",_i,P(f.value.oshostname),1)]),t("dl",xi,[bi,t("dd",yi,P(f.value.os),1)]),t("dl",wi,[ki,t("dd",$i,[t("div",Ei,P(f.value.version),1)])]),t("dl",Ri,[Ci,t("dd",Pi,[t("div",Si,[t("div",Mi,[t("span",null,P(f.value.mipv4),1)]),s.value?(p(),y("div",Ai,"复制")):B("",!0)])])]),t("dl",ji,[Bi,t("dd",Ni,[t("div",Oi,[t("div",Ii,[t("span",Ti,[t("span",Li,P(f.value.mipv6),1)])]),s.value?(p(),y("div",zi,"复制")):B("",!0)])])]),t("dl",Hi,[Di,t("dd",Vi,P(w.value),1)]),t("dl",Ui,[Ki,t("dd",Gi,[t("ul",qi,[(p(!0),y(re,null,ye(f.value.eps,H=>(p(),y("li",Fi,[t("span",null,P(H),1)]))),256))])])]),t("dl",Wi,[Qi,t("dd",Yi,[f.value.usederp=="x"?(p(),y("ul",Xi,Ji)):(p(),y("ul",er,[(p(!0),y(re,null,ye(f.value.derps,(H,T)=>(p(),y("li",null,[t("strong",tr,P(T)+" 号中继",1),se(": "+P(H)+" ms ",1),f.value.usederp==T?(p(),y("svg",sr,or)):B("",!0)]))),256))]))])])]),t("div",ar,[t("dl",ir,[rr,t("dd",lr,P(f.value.createat),1)]),t("dl",cr,[ur,t("dd",dr,P(f.value.lastseen),1)]),t("dl",hr,[fr,f.value.neverExpires?(p(),y("dd",mr," 永不过期 ")):B("",!0),f.value.neverExpires?B("",!0):(p(),y("dd",vr,P(f.value.expirydesc),1))]),pr,t("dl",gr,[_r,f.value.varies?(p(),y("dd",xr,"是")):(p(),y("dd",br,"否"))]),t("dl",yr,[wr,f.value.hairpinning?(p(),y("dd",kr,"是")):(p(),y("dd",$r,"否"))]),t("dl",Er,[Rr,f.value.ipv6en?(p(),y("dd",Cr,"是")):(p(),y("dd",Pr,"否"))]),t("dl",Sr,[Mr,f.value.udpen?(p(),y("dd",Ar,"是")):(p(),y("dd",jr,"否"))]),t("dl",Br,[Nr,f.value.upnpen?(p(),y("dd",Or,"是")):(p(),y("dd",Ir,"否"))]),t("dl",Tr,[Lr,f.value.pcpen?(p(),y("dd",zr,"是")):(p(),y("dd",Hr,"否"))]),t("dl",Dr,[Vr,f.value.pmpen?(p(),y("dd",Ur,"是")):(p(),y("dd",Kr,"否"))])])])])])]),(p(),X(ie,{to:".toast-container"},[Y(Ue,{show:a.value,msg:c.value,onClose:C[1]||(C[1]=H=>a.value=!1)},null,8,["show","msg"])])),(p(),X(ie,{to:"body"},[i.value?(p(),X(At,{key:0,toleft:r.value,totop:l.value,neverExpires:f.value.neverExpires,onClose:g,onSetExpires:z,onShowdialogRemove:N},null,8,["toleft","totop","neverExpires"])):B("",!0)])),(p(),X(ie,{to:"body"},[_.value?(p(),X(jt,{key:0,"machine-name":f.value.givename,onClose:C[2]||(C[2]=H=>_.value=!1),onConfirm:G},null,8,["machine-name"])):B("",!0)]))],64)}}},qr={class:"flex-1"},Fr=t("div",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"},[t("h1",{class:"mr-2",tabindex:"-1"},"通用")],-1),Wr=t("div",{class:"text-gray-600 mt-3 mb-10"},[t("p",null,"管理您的蜃境网络配置")],-1),Qr={class:"mt-10"},Yr={class:"space-y-10"},Xr=t("header",{class:"max-w-2xl"},[t("h3",{class:"text-xl font-semibold tracking-tight"},"机构"),t("p",{class:"mt-1 text-gray-600"}," 这是您所属机构名称（个人用户显示您的账户），无法修改！ ")],-1),Zr={class:"mt-4"},Jr={class:"max-w-sm"},el={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0"},tl=["value"],sl=t("header",{class:"max-w-2xl"},[t("h3",{class:"text-xl font-semibold tracking-tight"},"密钥过期"),t("p",{class:"mt-1 text-gray-600"}," 设置设备可以保持登录蜃境网络而不需重新登录认证的天数 ")],-1),nl={class:"mt-4"},ol={class:"flex"},al={class:"relative"},il={class:"bg-white top-1 bottom-1 right-1 rounded-r-md absolute flex items-center"},rl={class:"flex items-center"},ll=["disabled"],cl=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),ul=[cl],dl=["disabled"],hl=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),fl=[hl],ml=t("div",{class:"flex items-center px-3 bg-gray-50 text-gray-500 border rounded-r border-l-0 border-gray-300"}," 天 ",-1),vl=t("p",{class:"text-sm text-gray-500 mt-1"},"请设置为1~180天",-1),pl={class:"mt-4"},gl=["disabled"],_l=["disabled"],xl={class:"mt-8"},bl=t("header",{class:"max-w-2xl"},[t("h3",{class:"text-xl font-semibold tracking-tight"},"注销蜃境"),t("p",{class:"mt-1 text-gray-600"}," 永久注销蜃境网络（删除所有设备及用户信息），无法恢复！ ")],-1),yl={class:"mt-4"},wl=["disabled"],me={__name:"General",setup(e){const s=E(!0),n=E(!1),o=E("");ke(n,()=>{n.value&&setTimeout(function(){n.value=!1},5e3)});const a=E(""),c=E(""),v=E(""),d=E(""),r=E(""),l=E(180),i=E(180),h=E(!1),m=E(!1),g=E(!1),_=E("复制");function N(){navigator.clipboard.writeText(r.value).then(function(){_.value="已复制!",setTimeout(()=>{_.value="复制"},3e3)})}function f(){Number(i.value)>1?h.value=!1:h.value=!0,Number(i.value)<180?m.value=!1:m.value=!0,Number(i.value)!=l.value?g.value=!1:g.value=!0}function w(x){i.value=i.value.replace(/[^\d]+/g,"").replace(/^0+(\d)/,"$1"),i.value==""&&(i.value=0),x&&Number(i.value)>180&&(i.value=180),f()}function S(x){x==!0?i.value=Number(i.value)+1:i.value=Number(i.value)-1,f()}function z(){i.value=l.value,f()}xe(()=>{axios.get("/admin/api/self").then(function(x){(x.data.errormsg==null||x.data.errormsg==="")&&(a.value=x.data.useraccount,c.value=x.data.basedomain,v.value=x.data.username,d.value=x.data.usernamehead,r.value=x.data.orgname)}).catch(function(x){alert(x)}).then(function(){}),axios.get("/admin/api/netsettings").then(function(x){x.data.status=="success"?(l.value=x.data.data.maxKeyDurationDays,i.value=x.data.data.maxKeyDurationDays,f()):x.data.status.substring(6)=="用户信息核对失败"}).catch(function(x){alert(x)}).then(function(){})});function G(){axios.post("/admin/api/netsetting/updatekeyexpiry",{maxKeyDurationDays:Number(i.value)}).then(function(x){x.data.status=="success"?(l.value=x.data.data,f(),o.value="已更新您网络中节点密钥最长有效期！",n.value=!0):(o.value="失败："+x.data.status.substring(6),n.value=!0)}).catch(function(x){console.log(x)})}return(x,C)=>(p(),y(re,null,[t("div",qr,[Fr,Wr,t("div",Qr,[t("div",Yr,[t("div",null,[Xr,t("div",Zr,[t("div",Jr,[t("div",el,[t("input",{class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:r.value},null,8,tl),t("button",{onClick:N,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},P(_.value),1)])])])]),t("div",null,[sl,t("div",nl,[t("div",ol,[t("div",al,[$e(t("input",{"onUpdate:modelValue":C[0]||(C[0]=O=>i.value=O),onInput:C[1]||(C[1]=O=>w(!1)),onBlur:C[2]||(C[2]=O=>w(!0)),class:"input z-10 border focus:outline-blue-500/60 hover:border border-stone-200 hover:border-stone-400 rounded-r-none h-9 min-h-fit",inputmode:"numeric",pattern:"[0-9]*",id:"key-expiry-duration",tabindex:"0"},null,544),[[Lt,i.value]]),t("div",il,[t("div",rl,[t("button",{onClick:C[3]||(C[3]=O=>S(!1)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:h.value,type:"button",tabindex:"-1"},ul,8,ll),t("button",{onClick:C[4]||(C[4]=O=>S(!0)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:m.value,type:"button",tabindex:"-1"},fl,8,dl)])])]),ml]),vl,t("div",pl,[t("button",{onClick:G,class:"btn border-0 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-600/60 text-white disabled:text-white/60 h-9 min-h-fit",disabled:g.value}," 保存 ",8,gl),t("button",{onClick:z,class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3",disabled:g.value}," 重置 ",8,_l)])])])]),t("div",xl,[bl,t("div",yl,[t("button",{disabled:s.value,class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit"}," 注销蜃境… ",8,wl)])])])]),(p(),X(ie,{to:".toast-container"},[Y(Ue,{show:n.value,msg:o.value,onClose:C[5]||(C[5]=O=>n.value=!1)},null,8,["show","msg"])]))],64))}},kl={},$l={class:"flex-1"},El=Ee('<div class="text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"><h1 class="mr-2" tabindex="-1">密钥管理</h1></div><div class="text-gray-600 mt-3 mb-10"><p>查看和管理您的<strong>授权密钥</strong>和<strong>API密钥</strong></p><p class="mt-2">您个人设备的私钥<strong>不</strong>在此管理，它们永远是<strong>私有</strong>并存在于您的设备上，<strong>不</strong>向蜃境披露</p></div><div class="mt-10"><div class="flex justify-between items-center mt-16"><div><h3 class="text-xl font-semibold tracking-tight">授权密钥</h3><p class="text-gray-600">用于无需交互式登录即可实现设备鉴别接入 </p></div><button class="btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"> 生成授权密钥…</button></div><div class="rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"><div class="flex justify-center"><div class="w-full text-center max-w-xl text-gray-500">你还没有任何密钥</div></div></div><div class="flex justify-between items-center mt-16"><div><h3 class="text-xl font-semibold tracking-tight">API 密钥</h3><p class="text-gray-600">API 密钥用于访问蜃境API.</p></div><button class="btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"> 生成 API 密钥…</button></div><div class="rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"><div class="flex justify-center"><div class="w-full text-center max-w-xl text-gray-500">你还没有任何密钥</div></div></div></div>',3),Rl=[El];function Cl(e,s){return p(),y("div",$l,Rl)}const Pl=zt(kl,[["render",Cl]]),Sl={class:"container mx-auto pb-20 md:pb-24"},Ml={class:"md:flex md:mt-16"},Al={class:"mb-10 md:mr-20 lg:mr-40"},jl={class:"hidden md:block"},Bl={class:"flex flex-row mb-12"},Nl=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),t("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),Ol={class:"ml-4"},Il=t("h2",{class:"text-gray-500 font-medium"},"网络配置",-1),Tl={class:"flex flex-row mb-12"},Ll=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[t("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t("circle",{cx:"12",cy:"7",r:"4"})],-1),zl={class:"ml-4"},Hl=t("h2",{class:"text-gray-500 font-medium"},"个人设置",-1),Dl={class:"select-with-arrow md:hidden mb-4"},Vl=Ee('<optgroup label="网络配置"><option value="features">敬请期待</option><option value="general">通用</option><option value="webhooks">敬请期待</option><option value="billing">敬请期待</option><option value="contact-preferences">敬请期待</option></optgroup><optgroup label="个人设置"><option value="keys">密钥管理</option></optgroup>',2),Ul=[Vl],Kl={__name:"Settings",setup(e){const s={general:me,features:me,webhooks:me,billing:me,"contact-preferences":me,keys:Pl},n=We(),o=Fe(),a=E("");function c(v){o.push("/settings/"+v.target.value)}return zs((v,d)=>{a.value=v.params.setpart}),xe(()=>{a.value=n.params.setpart}),(v,d)=>{const r=ge("router-link");return p(),y("main",Sl,[t("section",Ml,[t("div",Al,[t("div",jl,[t("div",Bl,[Nl,t("div",Ol,[Il,Y(r,{class:Z(["flex font-medium mt-4",{"text-blue-600":a.value=="general","text-gray-700":a.value!="general"}]),to:"/settings/general"},{default:ee(()=>[se("通用")]),_:1},8,["class"]),Y(r,{class:Z(["flex font-medium mt-4",{"text-blue-600":a.value=="features","text-gray-700":a.value!="features"}]),to:"/settings/features"},{default:ee(()=>[se("敬请期待")]),_:1},8,["class"]),Y(r,{class:Z(["flex font-medium mt-4",{"text-blue-600":a.value=="webhooks","text-gray-700":a.value!="webhooks"}]),to:"/settings/webhooks"},{default:ee(()=>[se("敬请期待")]),_:1},8,["class"]),Y(r,{class:Z(["flex font-medium mt-4",{"text-blue-600":a.value=="billing","text-gray-700":a.value!="billing"}]),to:"/settings/billing"},{default:ee(()=>[se("敬请期待")]),_:1},8,["class"]),Y(r,{class:Z(["flex font-medium mt-4",{"text-blue-600":a.value=="contact-preferences","text-gray-700":a.value!="contact-preferences"}]),to:"/settings/contact-preferences"},{default:ee(()=>[se("敬请期待")]),_:1},8,["class"])])]),t("div",Tl,[Ll,t("div",zl,[Hl,Y(r,{class:Z(["flex font-medium mt-4",{"text-blue-600":a.value=="keys","text-gray-700":a.value!="keys"}]),to:"/settings/keys"},{default:ee(()=>[se("密钥管理")]),_:1},8,["class"])])])]),t("div",Dl,[$e(t("select",{"onUpdate:modelValue":d[0]||(d[0]=l=>a.value=l),onChange:c,class:"select select-bordered w-full text-lg"},Ul,544),[[Ht,a.value,void 0,{lazy:!0}]])])]),(p(),X(Dt(s[a.value])))])])}}},Gl=[{path:"/",redirect:"/machines"},{path:"/machines",component:Wo},{path:"/machines/:mip",component:Gr},{path:"/settings",redirect:"/settings/general"},{path:"/settings/:setpart",component:Kl}],ql=Fs({history:ls(),routes:Gl}),Pe=Vt(Cn);Pe.config.errorHandler=e=>{};Pe.use(Ut);Pe.use(ql);Pe.mount("#app");
