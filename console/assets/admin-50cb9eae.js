import{s as Wt,u as O,d as G,r as Et,i as ge,n as we,e as Pt,f as Qt,g as Xt,h as Rt,j as Mt,p as Ye,k as y,w as ke,l as ue,o as u,c as f,m as e,t as C,q as Nt,v as jt,x as be,y as K,z as $,A as Q,T as he,B as oe,C as ce,F as X,D as He,E as ae,G as re,_ as je,H as Ue,I as ot,J as Ie,K as Be,L as ie,a as fe,M as Yt,N as Zt,O as Jt,b as es}from"./plugin-vueexport-helper-902391c9.js";import{u as Ae,_ as Ke,p as ts}from"./Toast-6fc3935b.js";/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Re=typeof window<"u";function ss(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const H=Object.assign;function Ze(t,s){const n={};for(const a in s){const o=s[a];n[a]=ve(o)?o.map(t):t(o)}return n}const Te=()=>{},ve=Array.isArray,ns=/\/$/,os=t=>t.replace(ns,"");function Je(t,s,n="/"){let a,o={},c="",p="";const d=s.indexOf("#");let r=s.indexOf("?");return d<r&&d>=0&&(r=-1),r>-1&&(a=s.slice(0,r),c=s.slice(r+1,d>-1?d:s.length),o=t(c)),d>-1&&(a=a||s.slice(0,d),p=s.slice(d,s.length)),a=rs(a??s,n),{fullPath:a+(c&&"?")+c+p,path:a,query:o,hash:p}}function as(t,s){const n=s.query?t(s.query):"";return s.path+(n&&"?")+n+(s.hash||"")}function ut(t,s){return!s||!t.toLowerCase().startsWith(s.toLowerCase())?t:t.slice(s.length)||"/"}function ls(t,s,n){const a=s.matched.length-1,o=n.matched.length-1;return a>-1&&a===o&&Me(s.matched[a],n.matched[o])&&It(s.params,n.params)&&t(s.query)===t(n.query)&&s.hash===n.hash}function Me(t,s){return(t.aliasOf||t)===(s.aliasOf||s)}function It(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(!is(t[n],s[n]))return!1;return!0}function is(t,s){return ve(t)?ht(t,s):ve(s)?ht(s,t):t===s}function ht(t,s){return ve(s)?t.length===s.length&&t.every((n,a)=>n===s[a]):t.length===1&&t[0]===s}function rs(t,s){if(t.startsWith("/"))return t;if(!t)return s;const n=s.split("/"),a=t.split("/");let o=n.length-1,c,p;for(c=0;c<a.length;c++)if(p=a[c],p!==".")if(p==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+a.slice(c-(c===a.length?1:0)).join("/")}var Ve;(function(t){t.pop="pop",t.push="push"})(Ve||(Ve={}));var ze;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ze||(ze={}));function ds(t){if(!t)if(Re){const s=document.querySelector("base");t=s&&s.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),os(t)}const cs=/^[^#]+#/;function us(t,s){return t.replace(cs,"#")+s}function hs(t,s){const n=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:s.behavior,left:a.left-n.left-(s.left||0),top:a.top-n.top-(s.top||0)}}const qe=()=>({left:window.pageXOffset,top:window.pageYOffset});function vs(t){let s;if("el"in t){const n=t.el,a=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;s=hs(o,t)}else s=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(s):window.scrollTo(s.left!=null?s.left:window.pageXOffset,s.top!=null?s.top:window.pageYOffset)}function vt(t,s){return(history.state?history.state.position-s:-1)+t}const tt=new Map;function fs(t,s){tt.set(t,s)}function ms(t){const s=tt.get(t);return tt.delete(t),s}let ps=()=>location.protocol+"//"+location.host;function Bt(t,s){const{pathname:n,search:a,hash:o}=s,c=t.indexOf("#");if(c>-1){let d=o.includes(t.slice(c))?t.slice(c).length:1,r=o.slice(d);return r[0]!=="/"&&(r="/"+r),ut(r,"")}return ut(n,t)+a+o}function gs(t,s,n,a){let o=[],c=[],p=null;const d=({state:v})=>{const _=Bt(t,location),x=n.value,P=s.value;let E=0;if(v){if(n.value=_,s.value=v,p&&p===x){p=null;return}E=P?v.position-P.position:0}else a(_);o.forEach(w=>{w(n.value,x,{delta:E,type:Ve.pop,direction:E?E>0?ze.forward:ze.back:ze.unknown})})};function r(){p=n.value}function i(v){o.push(v);const _=()=>{const x=o.indexOf(v);x>-1&&o.splice(x,1)};return c.push(_),_}function l(){const{history:v}=window;v.state&&v.replaceState(H({},v.state,{scroll:qe()}),"")}function h(){for(const v of c)v();c=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",l),{pauseListeners:r,listen:i,destroy:h}}function ft(t,s,n,a=!1,o=!1){return{back:t,current:s,forward:n,replaced:a,position:window.history.length,scroll:o?qe():null}}function bs(t){const{history:s,location:n}=window,a={value:Bt(t,n)},o={value:s.state};o.value||c(a.value,{back:null,current:a.value,forward:null,position:s.length-1,replaced:!0,scroll:null},!0);function c(r,i,l){const h=t.indexOf("#"),v=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+r:ps()+t+r;try{s[l?"replaceState":"pushState"](i,"",v),o.value=i}catch(_){console.error(_),n[l?"replace":"assign"](v)}}function p(r,i){const l=H({},s.state,ft(o.value.back,r,o.value.forward,!0),i,{position:o.value.position});c(r,l,!0),a.value=r}function d(r,i){const l=H({},o.value,s.state,{forward:r,scroll:qe()});c(l.current,l,!0);const h=H({},ft(a.value,r,null),{position:l.position+1},i);c(r,h,!1),a.value=r}return{location:a,state:o,push:d,replace:p}}function _s(t){t=ds(t);const s=bs(t),n=gs(t,s.state,s.location,s.replace);function a(c,p=!0){p||n.pauseListeners(),history.go(c)}const o=H({location:"",base:t,go:a,createHref:us.bind(null,t)},s,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>s.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>s.state.value}),o}function xs(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),_s(t)}function ys(t){return typeof t=="string"||t&&typeof t=="object"}function At(t){return typeof t=="string"||typeof t=="symbol"}const _e={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Dt=Symbol("");var mt;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(mt||(mt={}));function Ne(t,s){return H(new Error,{type:t,[Dt]:!0},s)}function pe(t,s){return t instanceof Error&&Dt in t&&(s==null||!!(t.type&s))}const pt="[^/]+?",ws={sensitive:!1,strict:!1,start:!0,end:!0},ks=/[.+*?^${}()[\]/\\]/g;function $s(t,s){const n=H({},ws,s),a=[];let o=n.start?"^":"";const c=[];for(const i of t){const l=i.length?[]:[90];n.strict&&!i.length&&(o+="/");for(let h=0;h<i.length;h++){const v=i[h];let _=40+(n.sensitive?.25:0);if(v.type===0)h||(o+="/"),o+=v.value.replace(ks,"\\$&"),_+=40;else if(v.type===1){const{value:x,repeatable:P,optional:E,regexp:w}=v;c.push({name:x,repeatable:P,optional:E});const b=w||pt;if(b!==pt){_+=10;try{new RegExp(`(${b})`)}catch(m){throw new Error(`Invalid custom RegExp for param "${x}" (${b}): `+m.message)}}let I=P?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;h||(I=E&&i.length<2?`(?:/${I})`:"/"+I),E&&(I+="?"),o+=I,_+=20,E&&(_+=-8),P&&(_+=-20),b===".*"&&(_+=-50)}l.push(_)}a.push(l)}if(n.strict&&n.end){const i=a.length-1;a[i][a[i].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const p=new RegExp(o,n.sensitive?"":"i");function d(i){const l=i.match(p),h={};if(!l)return null;for(let v=1;v<l.length;v++){const _=l[v]||"",x=c[v-1];h[x.name]=_&&x.repeatable?_.split("/"):_}return h}function r(i){let l="",h=!1;for(const v of t){(!h||!l.endsWith("/"))&&(l+="/"),h=!1;for(const _ of v)if(_.type===0)l+=_.value;else if(_.type===1){const{value:x,repeatable:P,optional:E}=_,w=x in i?i[x]:"";if(ve(w)&&!P)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const b=ve(w)?w.join("/"):w;if(!b)if(E)v.length<2&&(l.endsWith("/")?l=l.slice(0,-1):h=!0);else throw new Error(`Missing required param "${x}"`);l+=b}}return l||"/"}return{re:p,score:a,keys:c,parse:d,stringify:r}}function Cs(t,s){let n=0;for(;n<t.length&&n<s.length;){const a=s[n]-t[n];if(a)return a;n++}return t.length<s.length?t.length===1&&t[0]===40+40?-1:1:t.length>s.length?s.length===1&&s[0]===40+40?1:-1:0}function Ss(t,s){let n=0;const a=t.score,o=s.score;for(;n<a.length&&n<o.length;){const c=Cs(a[n],o[n]);if(c)return c;n++}if(Math.abs(o.length-a.length)===1){if(gt(a))return 1;if(gt(o))return-1}return o.length-a.length}function gt(t){const s=t[t.length-1];return t.length>0&&s[s.length-1]<0}const Es={type:0,value:""},Ps=/[a-zA-Z0-9_]/;function Rs(t){if(!t)return[[]];if(t==="/")return[[Es]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function s(_){throw new Error(`ERR (${n})/"${i}": ${_}`)}let n=0,a=n;const o=[];let c;function p(){c&&o.push(c),c=[]}let d=0,r,i="",l="";function h(){i&&(n===0?c.push({type:0,value:i}):n===1||n===2||n===3?(c.length>1&&(r==="*"||r==="+")&&s(`A repeatable param (${i}) must be alone in its segment. eg: '/:ids+.`),c.push({type:1,value:i,regexp:l,repeatable:r==="*"||r==="+",optional:r==="*"||r==="?"})):s("Invalid state to consume buffer"),i="")}function v(){i+=r}for(;d<t.length;){if(r=t[d++],r==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:r==="/"?(i&&h(),p()):r===":"?(h(),n=1):v();break;case 4:v(),n=a;break;case 1:r==="("?n=2:Ps.test(r)?v():(h(),n=0,r!=="*"&&r!=="?"&&r!=="+"&&d--);break;case 2:r===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+r:n=3:l+=r;break;case 3:h(),n=0,r!=="*"&&r!=="?"&&r!=="+"&&d--,l="";break;default:s("Unknown state");break}}return n===2&&s(`Unfinished custom RegExp for param "${i}"`),h(),p(),o}function Ms(t,s,n){const a=$s(Rs(t.path),n),o=H(a,{record:t,parent:s,children:[],alias:[]});return s&&!o.record.aliasOf==!s.record.aliasOf&&s.children.push(o),o}function Ns(t,s){const n=[],a=new Map;s=xt({strict:!1,end:!0,sensitive:!1},s);function o(l){return a.get(l)}function c(l,h,v){const _=!v,x=js(l);x.aliasOf=v&&v.record;const P=xt(s,l),E=[x];if("alias"in l){const I=typeof l.alias=="string"?[l.alias]:l.alias;for(const m of I)E.push(H({},x,{components:v?v.record.components:x.components,path:m,aliasOf:v?v.record:x}))}let w,b;for(const I of E){const{path:m}=I;if(h&&m[0]!=="/"){const k=h.record.path,V=k[k.length-1]==="/"?"":"/";I.path=h.record.path+(m&&V+m)}if(w=Ms(I,h,P),v?v.alias.push(w):(b=b||w,b!==w&&b.alias.push(w),_&&l.name&&!_t(w)&&p(l.name)),x.children){const k=x.children;for(let V=0;V<k.length;V++)c(k[V],w,v&&v.children[V])}v=v||w,(w.record.components&&Object.keys(w.record.components).length||w.record.name||w.record.redirect)&&r(w)}return b?()=>{p(b)}:Te}function p(l){if(At(l)){const h=a.get(l);h&&(a.delete(l),n.splice(n.indexOf(h),1),h.children.forEach(p),h.alias.forEach(p))}else{const h=n.indexOf(l);h>-1&&(n.splice(h,1),l.record.name&&a.delete(l.record.name),l.children.forEach(p),l.alias.forEach(p))}}function d(){return n}function r(l){let h=0;for(;h<n.length&&Ss(l,n[h])>=0&&(l.record.path!==n[h].record.path||!Ot(l,n[h]));)h++;n.splice(h,0,l),l.record.name&&!_t(l)&&a.set(l.record.name,l)}function i(l,h){let v,_={},x,P;if("name"in l&&l.name){if(v=a.get(l.name),!v)throw Ne(1,{location:l});P=v.record.name,_=H(bt(h.params,v.keys.filter(b=>!b.optional).map(b=>b.name)),l.params&&bt(l.params,v.keys.map(b=>b.name))),x=v.stringify(_)}else if("path"in l)x=l.path,v=n.find(b=>b.re.test(x)),v&&(_=v.parse(x),P=v.record.name);else{if(v=h.name?a.get(h.name):n.find(b=>b.re.test(h.path)),!v)throw Ne(1,{location:l,currentLocation:h});P=v.record.name,_=H({},h.params,l.params),x=v.stringify(_)}const E=[];let w=v;for(;w;)E.unshift(w.record),w=w.parent;return{name:P,path:x,params:_,matched:E,meta:Bs(E)}}return t.forEach(l=>c(l)),{addRoute:c,resolve:i,removeRoute:p,getRoutes:d,getRecordMatcher:o}}function bt(t,s){const n={};for(const a of s)a in t&&(n[a]=t[a]);return n}function js(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Is(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Is(t){const s={},n=t.props||!1;if("component"in t)s.default=n;else for(const a in t.components)s[a]=typeof n=="boolean"?n:n[a];return s}function _t(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Bs(t){return t.reduce((s,n)=>H(s,n.meta),{})}function xt(t,s){const n={};for(const a in t)n[a]=a in s?s[a]:t[a];return n}function Ot(t,s){return s.children.some(n=>n===t||Ot(t,n))}const Lt=/#/g,As=/&/g,Ds=/\//g,Os=/=/g,Ls=/\?/g,Ut=/\+/g,Us=/%5B/g,Ts=/%5D/g,Tt=/%5E/g,zs=/%60/g,zt=/%7B/g,Hs=/%7C/g,Ht=/%7D/g,Vs=/%20/g;function at(t){return encodeURI(""+t).replace(Hs,"|").replace(Us,"[").replace(Ts,"]")}function Gs(t){return at(t).replace(zt,"{").replace(Ht,"}").replace(Tt,"^")}function st(t){return at(t).replace(Ut,"%2B").replace(Vs,"+").replace(Lt,"%23").replace(As,"%26").replace(zs,"`").replace(zt,"{").replace(Ht,"}").replace(Tt,"^")}function Ks(t){return st(t).replace(Os,"%3D")}function qs(t){return at(t).replace(Lt,"%23").replace(Ls,"%3F")}function Fs(t){return t==null?"":qs(t).replace(Ds,"%2F")}function Ge(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Ws(t){const s={};if(t===""||t==="?")return s;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<a.length;++o){const c=a[o].replace(Ut," "),p=c.indexOf("="),d=Ge(p<0?c:c.slice(0,p)),r=p<0?null:Ge(c.slice(p+1));if(d in s){let i=s[d];ve(i)||(i=s[d]=[i]),i.push(r)}else s[d]=r}return s}function yt(t){let s="";for(let n in t){const a=t[n];if(n=Ks(n),a==null){a!==void 0&&(s+=(s.length?"&":"")+n);continue}(ve(a)?a.map(c=>c&&st(c)):[a&&st(a)]).forEach(c=>{c!==void 0&&(s+=(s.length?"&":"")+n,c!=null&&(s+="="+c))})}return s}function Qs(t){const s={};for(const n in t){const a=t[n];a!==void 0&&(s[n]=ve(a)?a.map(o=>o==null?null:""+o):a==null?a:""+a)}return s}const lt=Symbol(""),wt=Symbol(""),Fe=Symbol(""),it=Symbol(""),nt=Symbol("");function Oe(){let t=[];function s(a){return t.push(a),()=>{const o=t.indexOf(a);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:s,list:()=>t,reset:n}}function Vt(t,s,n){const a=()=>{t[s].delete(n)};Pt(a),Qt(a),Xt(()=>{t[s].add(n)}),t[s].add(n)}function Xs(t){const s=ge(lt,{}).value;s&&Vt(s,"leaveGuards",t)}function Ys(t){const s=ge(lt,{}).value;s&&Vt(s,"updateGuards",t)}function xe(t,s,n,a,o){const c=a&&(a.enterCallbacks[o]=a.enterCallbacks[o]||[]);return()=>new Promise((p,d)=>{const r=h=>{h===!1?d(Ne(4,{from:n,to:s})):h instanceof Error?d(h):ys(h)?d(Ne(2,{from:s,to:h})):(c&&a.enterCallbacks[o]===c&&typeof h=="function"&&c.push(h),p())},i=t.call(a&&a.instances[o],s,n,r);let l=Promise.resolve(i);t.length<3&&(l=l.then(r)),l.catch(h=>d(h))})}function et(t,s,n,a){const o=[];for(const c of t)for(const p in c.components){let d=c.components[p];if(!(s!=="beforeRouteEnter"&&!c.instances[p]))if(Zs(d)){const i=(d.__vccOpts||d)[s];i&&o.push(xe(i,n,a,c,p))}else{let r=d();o.push(()=>r.then(i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${p}" at "${c.path}"`));const l=ss(i)?i.default:i;c.components[p]=l;const v=(l.__vccOpts||l)[s];return v&&xe(v,n,a,c,p)()}))}}return o}function Zs(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function kt(t){const s=ge(Fe),n=ge(it),a=G(()=>s.resolve(O(t.to))),o=G(()=>{const{matched:r}=a.value,{length:i}=r,l=r[i-1],h=n.matched;if(!l||!h.length)return-1;const v=h.findIndex(Me.bind(null,l));if(v>-1)return v;const _=$t(r[i-2]);return i>1&&$t(l)===_&&h[h.length-1].path!==_?h.findIndex(Me.bind(null,r[i-2])):v}),c=G(()=>o.value>-1&&sn(n.params,a.value.params)),p=G(()=>o.value>-1&&o.value===n.matched.length-1&&It(n.params,a.value.params));function d(r={}){return tn(r)?s[O(t.replace)?"replace":"push"](O(t.to)).catch(Te):Promise.resolve()}return{route:a,href:G(()=>a.value.href),isActive:c,isExactActive:p,navigate:d}}const Js=Rt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:kt,setup(t,{slots:s}){const n=Et(kt(t)),{options:a}=ge(Fe),o=G(()=>({[Ct(t.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[Ct(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const c=s.default&&s.default(n);return t.custom?c:Mt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},c)}}}),en=Js;function tn(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const s=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return t.preventDefault&&t.preventDefault(),!0}}function sn(t,s){for(const n in s){const a=s[n],o=t[n];if(typeof a=="string"){if(a!==o)return!1}else if(!ve(o)||o.length!==a.length||a.some((c,p)=>c!==o[p]))return!1}return!0}function $t(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ct=(t,s,n)=>t??s??n,nn=Rt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:s,slots:n}){const a=ge(nt),o=G(()=>t.route||a.value),c=ge(wt,0),p=G(()=>{let i=O(c);const{matched:l}=o.value;let h;for(;(h=l[i])&&!h.components;)i++;return i}),d=G(()=>o.value.matched[p.value]);Ye(wt,G(()=>p.value+1)),Ye(lt,d),Ye(nt,o);const r=y();return ke(()=>[r.value,d.value,t.name],([i,l,h],[v,_,x])=>{l&&(l.instances[h]=i,_&&_!==l&&i&&i===v&&(l.leaveGuards.size||(l.leaveGuards=_.leaveGuards),l.updateGuards.size||(l.updateGuards=_.updateGuards))),i&&l&&(!_||!Me(l,_)||!v)&&(l.enterCallbacks[h]||[]).forEach(P=>P(i))},{flush:"post"}),()=>{const i=o.value,l=t.name,h=d.value,v=h&&h.components[l];if(!v)return St(n.default,{Component:v,route:i});const _=h.props[l],x=_?_===!0?i.params:typeof _=="function"?_(i):_:null,E=Mt(v,H({},x,s,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[l]=null)},ref:r}));return St(n.default,{Component:E,route:i})||E}}});function St(t,s){if(!t)return null;const n=t(s);return n.length===1?n[0]:n}const on=nn;function an(t){const s=Ns(t.routes,t),n=t.parseQuery||Ws,a=t.stringifyQuery||yt,o=t.history,c=Oe(),p=Oe(),d=Oe(),r=Wt(_e);let i=_e;Re&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=Ze.bind(null,g=>""+g),h=Ze.bind(null,Fs),v=Ze.bind(null,Ge);function _(g,R){let S,N;return At(g)?(S=s.getRecordMatcher(g),N=R):N=g,s.addRoute(N,S)}function x(g){const R=s.getRecordMatcher(g);R&&s.removeRoute(R)}function P(){return s.getRoutes().map(g=>g.record)}function E(g){return!!s.getRecordMatcher(g)}function w(g,R){if(R=H({},R||r.value),typeof g=="string"){const D=Je(n,g,R.path),J=s.resolve({path:D.path},R),De=o.createHref(D.fullPath);return H(D,J,{params:v(J.params),hash:Ge(D.hash),redirectedFrom:void 0,href:De})}let S;if("path"in g)S=H({},g,{path:Je(n,g.path,R.path).path});else{const D=H({},g.params);for(const J in D)D[J]==null&&delete D[J];S=H({},g,{params:h(g.params)}),R.params=h(R.params)}const N=s.resolve(S,R),q=g.hash||"";N.params=l(v(N.params));const Z=as(a,H({},g,{hash:Gs(q),path:N.path})),U=o.createHref(Z);return H({fullPath:Z,hash:q,query:a===yt?Qs(g.query):g.query||{}},N,{redirectedFrom:void 0,href:U})}function b(g){return typeof g=="string"?Je(n,g,r.value.path):H({},g)}function I(g,R){if(i!==g)return Ne(8,{from:R,to:g})}function m(g){return te(g)}function k(g){return m(H(b(g),{replace:!0}))}function V(g){const R=g.matched[g.matched.length-1];if(R&&R.redirect){const{redirect:S}=R;let N=typeof S=="function"?S(g):S;return typeof N=="string"&&(N=N.includes("?")||N.includes("#")?N=b(N):{path:N},N.params={}),H({query:g.query,hash:g.hash,params:"path"in N?{}:g.params},N)}}function te(g,R){const S=i=w(g),N=r.value,q=g.state,Z=g.force,U=g.replace===!0,D=V(S);if(D)return te(H(b(D),{state:typeof D=="object"?H({},q,D.state):q,force:Z,replace:U}),R||S);const J=S;J.redirectedFrom=R;let De;return!Z&&ls(a,N,S)&&(De=Ne(16,{to:J,from:N}),M(N,N,!0,!1)),(De?Promise.resolve(De):Ce(J,N)).catch(le=>pe(le)?pe(le,2)?le:F(le):L(le,J,N)).then(le=>{if(le){if(pe(le,2))return te(H({replace:U},b(le.to),{state:typeof le.to=="object"?H({},q,le.to.state):q,force:Z}),R||J)}else le=Ee(J,N,!0,U,q);return Se(J,N,le),le})}function $e(g,R){const S=I(g,R);return S?Promise.reject(S):Promise.resolve()}function Ce(g,R){let S;const[N,q,Z]=ln(g,R);S=et(N.reverse(),"beforeRouteLeave",g,R);for(const D of N)D.leaveGuards.forEach(J=>{S.push(xe(J,g,R))});const U=$e.bind(null,g,R);return S.push(U),Pe(S).then(()=>{S=[];for(const D of c.list())S.push(xe(D,g,R));return S.push(U),Pe(S)}).then(()=>{S=et(q,"beforeRouteUpdate",g,R);for(const D of q)D.updateGuards.forEach(J=>{S.push(xe(J,g,R))});return S.push(U),Pe(S)}).then(()=>{S=[];for(const D of g.matched)if(D.beforeEnter&&!R.matched.includes(D))if(ve(D.beforeEnter))for(const J of D.beforeEnter)S.push(xe(J,g,R));else S.push(xe(D.beforeEnter,g,R));return S.push(U),Pe(S)}).then(()=>(g.matched.forEach(D=>D.enterCallbacks={}),S=et(Z,"beforeRouteEnter",g,R),S.push(U),Pe(S))).then(()=>{S=[];for(const D of p.list())S.push(xe(D,g,R));return S.push(U),Pe(S)}).catch(D=>pe(D,8)?D:Promise.reject(D))}function Se(g,R,S){for(const N of d.list())N(g,R,S)}function Ee(g,R,S,N,q){const Z=I(g,R);if(Z)return Z;const U=R===_e,D=Re?history.state:{};S&&(N||U?o.replace(g.fullPath,H({scroll:U&&D&&D.scroll},q)):o.push(g.fullPath,q)),r.value=g,M(g,R,S,U),F()}let me;function B(){me||(me=o.listen((g,R,S)=>{if(!ct.listening)return;const N=w(g),q=V(N);if(q){te(H(q,{replace:!0}),N).catch(Te);return}i=N;const Z=r.value;Re&&fs(vt(Z.fullPath,S.delta),qe()),Ce(N,Z).catch(U=>pe(U,12)?U:pe(U,2)?(te(U.to,N).then(D=>{pe(D,20)&&!S.delta&&S.type===Ve.pop&&o.go(-1,!1)}).catch(Te),Promise.reject()):(S.delta&&o.go(-S.delta,!1),L(U,N,Z))).then(U=>{U=U||Ee(N,Z,!1),U&&(S.delta&&!pe(U,8)?o.go(-S.delta,!1):S.type===Ve.pop&&pe(U,20)&&o.go(-1,!1)),Se(N,Z,U)}).catch(Te)}))}let z=Oe(),W=Oe(),T;function L(g,R,S){F(g);const N=W.list();return N.length?N.forEach(q=>q(g,R,S)):console.error(g),Promise.reject(g)}function j(){return T&&r.value!==_e?Promise.resolve():new Promise((g,R)=>{z.add([g,R])})}function F(g){return T||(T=!g,B(),z.list().forEach(([R,S])=>g?S(g):R()),z.reset()),g}function M(g,R,S,N){const{scrollBehavior:q}=t;if(!Re||!q)return Promise.resolve();const Z=!S&&ms(vt(g.fullPath,0))||(N||!S)&&history.state&&history.state.scroll||null;return we().then(()=>q(g,R,Z)).then(U=>U&&vs(U)).catch(U=>L(U,g,R))}const Y=g=>o.go(g);let ee;const Xe=new Set,ct={currentRoute:r,listening:!0,addRoute:_,removeRoute:x,hasRoute:E,getRoutes:P,resolve:w,options:t,push:m,replace:k,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:c.add,beforeResolve:p.add,afterEach:d.add,onError:W.add,isReady:j,install(g){const R=this;g.component("RouterLink",en),g.component("RouterView",on),g.config.globalProperties.$router=R,Object.defineProperty(g.config.globalProperties,"$route",{enumerable:!0,get:()=>O(r)}),Re&&!ee&&r.value===_e&&(ee=!0,m(o.location).catch(q=>{}));const S={};for(const q in _e)S[q]=G(()=>r.value[q]);g.provide(Fe,R),g.provide(it,Et(S)),g.provide(nt,r);const N=g.unmount;Xe.add(g),g.unmount=function(){Xe.delete(g),Xe.size<1&&(i=_e,me&&me(),me=null,r.value=_e,ee=!1,T=!1),N()}}};return ct}function Pe(t){return t.reduce((s,n)=>s.then(()=>n()),Promise.resolve())}function ln(t,s){const n=[],a=[],o=[],c=Math.max(s.matched.length,t.matched.length);for(let p=0;p<c;p++){const d=s.matched[p];d&&(t.matched.find(i=>Me(i,d))?a.push(d):n.push(d));const r=t.matched[p];r&&(s.matched.find(i=>Me(i,r))||o.push(r))}return[n,a,o]}function rt(){return ge(Fe)}function dt(){return ge(it)}const rn="/img/logo.svg",dn={class:"dropdown bg-white rounded-md py-1 z-20",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},cn={class:"block px-4 py-2"},un={class:"opacity-75"},hn=e("div",{class:"my-1 border-b border-base-300"},null,-1),vn=e("div",{class:"relative block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},[e("a",{class:"stretched-link",href:"/admin/logout"},"登出")],-1),fn={__name:"UserMenu",props:{userName:String,userAccount:String,toleft:Number,totop:Number},emits:["close"],setup(t,{emit:s}){const n=t;Ae();const a=y(null),o=G(()=>{var d;return String(String(n.toleft+32-((d=a.value)==null?void 0:d.clientWidth)))}),c=G(()=>String(n.totop+40)),p=d=>{s("close")};return(d,r)=>{const i=jt("click-away");return ue((u(),f("div",{ref_key:"userMenu",ref:a,class:"shadow-lg border border-base-300 rounded-md z-20",style:Nt("position: fixed; left: "+O(o)+"px; top: "+O(c)+"px; min-width: max-content; --radix-popper-transform-origin: 100% 0px;")},[e("div",dn,[e("div",cn,[e("div",null,[e("strong",null,C(t.userName),1)]),e("div",un,C(t.userAccount),1)]),hn,vn])],4)),[[i,p]])}}};const mn={key:0,class:"bg-amber-700 text-white font-medium py-2 px-4 text-center"},pn=["href"],gn={class:"bg-base-200 border-b border-base-300 pt-4 mb-6"},bn={class:"container mx-auto mb-4 md:mb-6"},_n={class:"flex justify-between items-center px-2 md:px-0"},xn={href:"/",class:"flex items-center",style:{"max-width":"80%"}},yn=e("img",{width:"18",height:"18",src:rn},null,-1),wn={role:"banner",class:"text-lg font-semibold ml-3 truncate"},kn=e("span",{class:"badge badge-secondary"},"仅供测试",-1),$n={class:"flex items-center"},Cn=e("a",{class:"hidden text-gray-600 hover:text-gray-800 sm:inline-block px-2 py-1",href:"https://github.com/gps949/tailscale/releases",target:"_blank",rel:"noopener noreferrer"},"下载客户端",-1),Sn={class:"relative rounded-full"},En={class:"relative shrink-0 rounded-full overflow-hidden w-8 h-8"},Pn={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-8 h-8",style:{"background-color":"rgb(161, 56, 33)"}},Rn={class:"relative overflow-hidden",style:{top:"1px"}},Mn={id:"nav",class:"navigation flex items-center overflow-auto left-1 relative md:container md:mx-auto md:px-0 md:-left-3"},Nn=["stroke-width"],jn=e("rect",{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"},null,-1),In=e("rect",{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"},null,-1),Bn=e("line",{x1:"6",y1:"6",x2:"6.01",y2:"6"},null,-1),An=e("line",{x1:"6",y1:"18",x2:"6.01",y2:"18"},null,-1),Dn=[jn,In,Bn,An],On=["stroke-width"],Ln=e("circle",{cx:"12",cy:"12",r:"10"},null,-1),Un=e("line",{x1:"2",y1:"12",x2:"22",y2:"12"},null,-1),Tn=e("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},null,-1),zn=[Ln,Un,Tn],Hn=["stroke-width"],Vn=e("circle",{cx:"12",cy:"12",r:"3"},null,-1),Gn=e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1),Kn=[Vn,Gn],qn={key:2,class:"container mx-auto pb-20 md:pb-24"},Fn={class:"mb-24"},Wn=e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2"},"错误")])])],-1),Qn={class:"w-full p-3 flex items-center justify-center text-sm"},Xn={class:"flex items-center justify-center"},Yn=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-3 text-red-400 h-5 w-5"},[e("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1),Zn=e("strong",null,"错误：",-1),Jn={__name:"Console",setup(t){rt();const s=dt(),n=y(null),a=y(0),o=y(0),c=y(!1),p=y(""),d=G(()=>s.path);function r(){var b,I;a.value=(b=n.value)==null?void 0:b.getBoundingClientRect().left,o.value=(I=n.value)==null?void 0:I.getBoundingClientRect().top}const i=y(!1);function l(){i.value=!i.value,i.value?document.body.style.pointerEvents="none":document.body.style.removeProperty("pointer-events")}const h=G(()=>{let b=s.path;if(b=="/")return"machine";if(b.substring(0,4)=="/dns")return"dns";if(b.substring(0,8)=="/machine")return"machine";if(b.substring(0,8)=="/setting")return"setting"}),v=y(""),_=y(""),x=y(""),P=y(""),E=y("");function w(){return new Promise((b,I)=>{axios.get("/admin/api/self").then(function(m){(m.data.errormsg==null||m.data.errormsg==="")&&(v.value=m.data.useraccount,_.value=m.data.basedomain,x.value=m.data.username,P.value=m.data.usernamehead,E.value=m.data.orgname,b("success")),I("err")}).catch(function(m){I("error")})})}return be(()=>{r(),window.addEventListener("resize",r),window.addEventListener("scroll",r),axios.interceptors.response.use(b=>(b.status==200?(p.value="",c.value=!1):(p.value="登录状态超时失效",c.value=!0),b),b=>{if(b&&b.response)switch(b.response.status){case 400:b.message="请求错误(400)";break;case 401:b.message="未授权，请重新登录(401)";break;case 403:b.message="拒绝访问(403)";break;case 404:b.message="请求出错(404)";break;case 408:b.message="请求超时(408)";break;case 500:b.message="服务器错误(500)";break;case 501:b.message="服务未实现(501)";break;case 502:b.message="网络错误(502)";break;case 503:b.message="服务不可用(503)";break;case 504:b.message="网络超时(504)";break;case 505:b.message="HTTP版本不受支持(505)";break;default:b.message="连接出错"+b.response.status}else b.message="连接服务器失败!";return p.value=b.message,c.value=!0,Promise.reject(b)}),w().then().catch(),setInterval(()=>{w().then().catch()},15e3)}),(b,I)=>{const m=He("router-link"),k=He("router-view");return u(),f(X,null,[c.value?(u(),f("div",mn,[K("连接服务器出现"+C(p.value)+"，请尝试 ",1),e("a",{class:"text-amber-100",href:"/login?next_url=/admin#"+O(d)},"重新登录",8,pn)])):$("",!0),e("div",gn,[e("div",bn,[e("header",_n,[e("a",xn,[yn,e("div",wn,C(E.value),1),kn]),e("nav",$n,[Cn,e("div",{ref_key:"userAvatar",ref:n,onClick:l,class:"heart-wrapper ml-2"},[e("button",Sn,[e("div",En,[e("div",Pn,C(P.value),1)])])],512),(u(),Q(he,{to:"body"},[i.value?(u(),Q(fn,{key:0,toleft:a.value,totop:o.value,"user-account":v.value,"user-name":x.value,onClose:l},null,8,["toleft","totop","user-account","user-name"])):$("",!0)]))])])]),e("div",Rn,[e("nav",Mn,[oe(m,{class:"whitespace-nowrap py-2 group relative",to:"/machines"},{default:ce(()=>[e("div",{class:ae([{"text-blue-600 after:visible":O(h)=="machine","text-gray-600 group-hover:text-gray-800 after:invisible":O(h)!="machine"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(u(),f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":O(h)=="machine"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},Dn,8,Nn)),e("div",{class:ae({"font-medium":O(h)=="machine"})},"设备",2)],2)]),_:1}),oe(m,{class:"whitespace-nowrap py-2 group relative",to:"/dns"},{default:ce(()=>[e("div",{class:ae([{"text-blue-600 after:visible":O(h)=="dns","text-gray-600 group-hover:text-gray-800 after:invisible":O(h)!="dns"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(u(),f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":O(h)=="dns"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},zn,8,On)),e("div",{class:ae({"font-medium":O(h)=="dns"})},"DNS",2)],2)]),_:1}),oe(m,{class:"whitespace-nowrap py-2 group relative",to:"/settings"},{default:ce(()=>[e("div",{class:ae([{"text-blue-600 after:visible":O(h)=="setting","text-gray-600 group-hover:text-gray-800 after:invisible":O(h)!="setting"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(u(),f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":O(h)=="setting"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},Kn,8,Hn)),e("div",{class:ae({"font-medium":O(h)=="setting"})},"设置",2)],2)]),_:1})])])]),c.value?$("",!0):(u(),Q(k,{key:1})),c.value?(u(),f("main",qn,[e("section",Fn,[Wn,e("div",Qn,[e("div",Xn,[Yn,e("div",null,[Zn,K(" 请求失败 "+C(p.value),1)])])])])])):$("",!0)],64)}}},eo={class:"dropdown bg-white rounded-md py-1 z-20",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},to=["hidden"],so=["hidden"],no=e("div",{class:"my-1 border-b border-base-300"},null,-1),oo=["hidden"],ao=["hidden"],lo=e("div",{class:"my-1 border-b border-base-300"},null,-1),Gt={__name:"MachineMenu",props:{toleft:Number,totop:Number,neverExpires:Boolean},emits:["close"],setup(t,{emit:s}){const n=t,a=y(!0);Ae();const o=y(null),c=G(()=>{var r;return String(String(n.toleft+32-((r=o.value)==null?void 0:r.clientWidth)))}),p=G(()=>{var r;return n.totop<=window.innerHeight/2?String(n.totop+36):String(n.totop-10-((r=o.value)==null?void 0:r.clientHeight))}),d=r=>{s("close")};return(r,i)=>{const l=jt("click-away");return ue((u(),f("div",{ref_key:"machineMenu",ref:o,class:"shadow-xl border border-base-300 rounded-md z-20",style:Nt("position: fixed; left: "+O(c)+"px; top: "+O(p)+"px; min-width: max-content; --radix-popper-transform-origin: 0% 0px;")},[e("div",eo,[e("div",{onClick:i[0]||(i[0]=h=>r.$emit("showdialog-updatehostname")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:a.value}," 编辑设备名称…",8,to),e("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:a.value}," 分享…",8,so),e("div",{onClick:i[1]||(i[1]=h=>r.$emit("set-expires")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},C(t.neverExpires?"启用密钥过期":"禁用密钥过期"),1),no,e("div",{onClick:i[2]||(i[2]=h=>r.$emit("showdialog-setsubnet")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:a.value}," 编辑子网转发…",8,oo),e("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:a.value}," 编辑ACL标签…",8,ao),lo,e("div",{onClick:i[3]||(i[3]=h=>r.$emit("showdialog-remove")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100 text-red-400"}," 移除…")])],4)),[[l,d]])}}},io={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},ro={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},co={class:"font-semibold text-lg truncate"},uo=e("p",{class:"text-gray-700 mb-4"},"这个设备将从您的蜃境网络中永久删除！如需重新添加该设备，您将需要在该设备上重新进行授权",-1),ho={class:"flex mt-10 justify-end space-x-4"},vo=e("button",{class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit",type:"submit"},"删除设备",-1),fo=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),mo=[fo],Kt={__name:"RemoveMachine",props:{machineName:String},setup(t){return Ae(),(s,n)=>(u(),f("div",{onClick:n[3]||(n[3]=re(a=>s.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",io,[e("header",ro,[e("div",co,"删除 "+C(t.machineName),1)]),e("form",{onSubmit:n[1]||(n[1]=re(a=>s.$emit("confirm"),["prevent"]))},[uo,e("footer",ho,[e("button",{onClick:n[0]||(n[0]=a=>s.$emit("close")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消"),vo])],32),e("button",{onClick:n[2]||(n[2]=a=>s.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},mo)])]))}};const We=t=>(Ie("data-v-7e611cdc"),t=t(),Be(),t),po={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},go={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},bo={class:"font-semibold text-lg truncate"},_o=We(()=>e("p",{class:"text-gray-700 mb-6"},[K("这个名称显示在控制台、客户端，以及生成对应的「"),e("strong",null,"幻域"),K("」名称")],-1)),xo={class:"flex items-center"},yo=["disabled"],wo=We(()=>e("label",{for:"auto-generate-checkbox",class:"font-medium ml-3"},"由设备OS主机名生成",-1)),ko=We(()=>e("label",{for:"machine-name",class:"block font-medium mt-6 mb-2"},"设备名称",-1)),$o={class:"flex mb-2"},Co={class:"relative w-full z-30"},So=["disabled"],Eo={key:0,class:"text-sm text-red-500 mb-2"},Po={key:1,class:"text-sm text-red-500 mb-2"},Ro={key:2,class:"text-sm text-red-500 mb-2"},Mo={key:3,class:"text-sm text-gray-600"},No={class:"text-xs break-words bg-gray-200 px-1 rounded"},jo={key:4,class:"text-sm text-gray-600"},Io={class:"text-xs break-words bg-gray-200 px-1 rounded"},Bo={class:"text-xs break-words bg-gray-200 px-1 rounded"},Ao={class:"flex mt-10 justify-end space-x-4"},Do=["disabled"],Oo=["disabled"],Lo=We(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),Uo=[Lo],To={__name:"UpdateHostname",props:{id:String,hostName:String,givenName:String,autoGen:Boolean},emits:["update-done","update-fail","close"],setup(t,{emit:s}){const n=t;Ae();const a=y(!1),o=y(!0),c=y(""),p=y(!1),d=y(!1),r=y(""),i=y(!1),l=y(!1),h=y(!1);ke(()=>o.value,_=>{i.value=!1,l.value=!1,h.value=!1,_==n.autoGen?p.value=!1:p.value=!0,_&&(n.autoGen?c.value=n.givenName:c.value=n.hostName)}),ke(()=>c.value,_=>{i.value=!1,l.value=!1,h.value=!1,c.value=c.value.toLowerCase().replace(/[^-0-9a-z]/ig,"-").replace(/--*/g,"-"),_==n.givenName?d.value=!1:d.value=!0}),be(()=>{p.value=!1,d.value=!1,o.value=n.autoGen,c.value=n.givenName,i.value=!1,l.value=!1,h.value=!1});function v(){if(!/^([0-9a-z]|-(?!-))+$/.test(c.value)){h.value=!0;return}if(/^(-.*|.*-)$/.test(c.value)){h.value=!0;return}a.value=!0;var _="";r.value=n.hostName,o.value||(_=c.value,r.value=c.value),axios.post("/admin/api/machines",{mid:n.id,state:"rename-node",nodeName:_}).then(function(x){x.data.status=="success"?x.data.data.name==r.value?s("update-done",x.data.data.name,x.data.data.automaticNameMode,!0):_===""?(i.value=!0,s("update-done",x.data.data.name,x.data.data.automaticNameMode,!1)):x.data.data.name==n.givenName?(l.value=!0,s("update-fail","目标主机名已存在！")):(console.log("unexpected case happended during the hostname updating!"),s("update-fail","意外情形发生了！")):s("update-fail",x.data.status.substring(6))}).catch(function(x){console.log(x),s("update-fail",x)}),a.value=!1}return(_,x)=>(u(),f("div",{onClick:x[5]||(x[5]=re(P=>_.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",po,[e("header",go,[e("div",bo,"修改设备名称 "+C(t.givenName),1)]),e("form",{onSubmit:x[3]||(x[3]=re(P=>_.$emit("confirm"),["prevent"]))},[_o,e("div",xo,[ue(e("input",{disabled:a.value,"onUpdate:modelValue":x[0]||(x[0]=P=>o.value=P),id:"auto-generate-checkbox",type:"checkbox",class:"toggle toggle-sm"},null,8,yo),[[Ue,o.value]]),wo]),ko,e("div",$o,[e("div",Co,[ue(e("input",{"onUpdate:modelValue":x[1]||(x[1]=P=>c.value=P),class:"input w-full z-30 border focus:outline-blue-500/60 hover:border disabled:hover:border-stone-200 disabled:border-stone-200 border-stone-200 hover:border-stone-400 rounded-md h-9 min-h-fit",type:"text",disabled:a.value||o.value,id:"machine-name"},null,8,So),[[ot,c.value]])])]),i.value?(u(),f("p",Eo,"名称 “"+C(r.value)+"” 已有设备占用 , 因此设备被自动命名为 “"+C(c.value)+"”.",1)):$("",!0),l.value?(u(),f("p",Po,"名称 “"+C(r.value)+"” 已有设备占用",1)):$("",!0),h.value?(u(),f("p",Ro,"名称不能为空，只能是字母数字和连接线组成，且不能以连接线开头结尾")):$("",!0),d.value?$("",!0):(u(),f("div",Mo,[K("这个设备可以通过「幻域」使用 "),e("code",No,C(t.givenName),1),K(" 进行访问")])),d.value?(u(),f("div",jo,[K("这个设备可以通过「幻域」使用 "),e("code",Io,C(c.value),1),K(" 进行访问。 "),e("code",Bo,C(t.givenName),1),K(" 不再指向该设备。")])):$("",!0),e("footer",Ao,[e("button",{disabled:a.value,onClick:x[2]||(x[2]=P=>_.$emit("close")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消",8,Do),e("button",{disabled:a.value||!p.value&&!d.value,onClick:v,class:"btn border-0 bg-blue-500 hover:bg-blue-900 disabled:bg-blue-500/60 text-white disabled:text-white/60 h-9 min-h-fit",type:"submit"},"更新",8,Oo)])],32),e("button",{onClick:x[4]||(x[4]=P=>_.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},Uo)])]))}},qt=je(To,[["__scopeId","data-v-7e611cdc"]]);const ye=t=>(Ie("data-v-a389bf8d"),t=t(),Be(),t),zo={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},Ho={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},Vo={class:"font-semibold text-lg truncate"},Go={class:"mb-6"},Ko=ye(()=>e("h3",{class:"font-semibold text-gray-800 mb-2"},"子网转发路由",-1)),qo=ye(()=>e("p",{class:"text-gray-700 mb-3"},"通过子网转发连接您无法安装蜃境客户端的设备",-1)),Fo={key:0,class:"rounded-md border bg-stone-100 border-stone-300 p-6"},Wo=ye(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备未披露任何子网转发路由")],-1)),Qo=[Wo],Xo={key:1},Yo={class:"flex items-center py-2 border-t"},Zo=["disabled","checked","id"],Jo={class:"flex items-center"},ea=["for"],ta={key:2,class:"flex-1 flex border-t items-center pt-2"},sa=["disabled"],na=["disabled"],oa=ye(()=>e("h3",{class:"font-semibold flex items-center text-gray-800 mb-2"},"出口节点",-1)),aa=ye(()=>e("p",{class:"text-gray-700 mb-3"},"允许您的网络上访问互联网流量通过该设备流出",-1)),la={class:"flex items-center"},ia=["disabled","checked"],ra=ye(()=>e("label",{for:"exit-node"},"用作出口节点",-1)),da={key:0,class:"tooltip","data-tip":"该设备未声明它自己为出口节点。可使用 --advertise-exit-node 参数再次运行以开启。"},ca=ye(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mx-2 text-gray-500"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)),ua=[ca],ha=ye(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),va=[ha],fa={__name:"SetSubnet",props:{id:String,currentMachine:Object},emits:["update-done","update-fail"],setup(t,{emit:s}){const n=t;Ae();const a=y(!1),o=G(()=>n.currentMachine.allowedIPs&&n.currentMachine.allowedIPs.length>0),c=G(()=>n.currentMachine.extraIPs&&n.currentMachine.extraIPs.length>0);function p(r){if(!n.currentMachine.allowedIPs||n.currentMachine.allowedIPs.length==0)return!1;for(var i in n.currentMachine.allowedIPs)if(r===n.currentMachine.allowedIPs[i])return!0;return!1}be(()=>{});function d(r){a.value=!0;var i=[];if(r!="Off")for(var l in n.currentMachine.advertisedIPs)(r=="On"||document.getElementById(n.currentMachine.advertisedIPs[l]).checked)&&i.push(n.currentMachine.advertisedIPs[l]);var h=document.getElementById("exit-node").checked;axios.post("/admin/api/machines",{mid:n.id,state:"set-route-settings",allowedIPs:i,allowedExitNode:h}).then(function(v){v.data.status=="success"?s("update-done",v.data.data.advertisedIPs,v.data.data.allowedIPs,v.data.data.extraIPs,v.data.data.allowedExitNode):s("update-fail",v.data.status.substring(6))}).catch(function(v){console.log(v),s("update-fail",v)}),a.value=!1}return(r,i)=>(u(),f("div",{onClick:i[5]||(i[5]=re(l=>r.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",zo,[e("header",Ho,[e("div",Vo,"编辑 "+C(t.currentMachine.name)+" 子网转发设置",1)]),e("div",Go,[Ko,qo,e("div",null,[t.currentMachine.hasSubnets?$("",!0):(u(),f("div",Fo,Qo)),t.currentMachine.hasSubnets?(u(),f("div",Xo,[(u(!0),f(X,null,ie(t.currentMachine.advertisedIPs,l=>(u(),f("li",Yo,[e("div",null,[e("input",{onChange:i[0]||(i[0]=h=>d("Update")),disabled:a.value,checked:p(l),id:l,type:"checkbox",class:"toggle block mr-3"},null,40,Zo)]),e("div",Jo,[e("label",{for:l},C(l),9,ea)])]))),256))])):$("",!0),t.currentMachine.hasSubnets?(u(),f("div",ta,[e("button",{onClick:i[1]||(i[1]=l=>d("Off")),class:"btn border-0 bg-red-600 hover:bg-red-700 disabled:bg-red-600/60 disabled:text-white/60 text-white h-9 min-h-fit mr-2",disabled:!O(o)},"全部禁用",8,sa),e("button",{onClick:i[2]||(i[2]=l=>d("On")),class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit",disabled:!O(c)},"全部启用",8,na)])):$("",!0)])]),e("div",null,[oa,aa,e("div",la,[e("input",{onChange:i[3]||(i[3]=l=>d("Update")),disabled:a.value||!t.currentMachine.advertisedExitNode,checked:t.currentMachine.allowedExitNode,id:"exit-node",type:"checkbox",class:"toggle mr-3"},null,40,ia),ra,t.currentMachine.advertisedExitNode?$("",!0):(u(),f("span",da,ua))])]),e("button",{onClick:i[4]||(i[4]=l=>r.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},va)])]))}},Ft=je(fa,[["__scopeId","data-v-a389bf8d"]]);const de=t=>(Ie("data-v-d2dc0a09"),t=t(),Be(),t),ma={class:"container mx-auto pb-20 md:pb-24"},pa={class:"mb-24"},ga=de(()=>e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2",tabindex:"-1"}," 设备 ")])])],-1)),ba={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-full px-2 py-1 leading-none text-sm mb-8"},_a={class:"table w-full"},xa=de(()=>e("thead",null,[e("tr",null,[e("th",{class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"}," 设备 "),e("th",{class:"hidden md:table-cell md:w-1/4"},"IP"),e("th",{class:"hidden md:table-cell w-1/4 lg:w-1/5"},"系统"),e("th",{class:"hidden lg:table-cell md:flex-auto"},"状态"),e("th",{class:"table-cell justify-end ml-auto md:ml-0 relative w-1/6 lg:w-12"},[e("span",{class:"sr-only"},"设备操作菜单")])])],-1)),ya=["id","v-if","onMouseenter","onMouseleave"],wa={class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"},ka={class:"items-center text-gray-900"},$a={class:"font-semibold hover:text-blue-500"},Ca={class:"stretched-link"},Sa={class:"md:hidden flex space-x-1 truncate"},Ea={class:"text-sm"},Pa=de(()=>e("span",null,"·",-1)),Ra={class:"md:hidden text-gray-600 text-sm",title:"m.version"},Ma={class:"flex items-center text-gray-600 text-sm"},Na={class:"my-1"},ja={key:0},Ia=de(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1)),Ba=[Ia],Aa={key:1},Da=de(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1)),Oa=[Da],La={key:2},Ua=de(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1)),Ta=[Ua],za={key:3},Ha=de(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1)),Va=[Ha],Ga={key:4},Ka={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},qa={key:5},Fa={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},Wa={key:0,class:"tooltip","data-tip":"该设备存在未批准子网转发，请在设备菜单的“编辑子网转发…”中检查"},Qa=de(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),Xa=[Qa],Ya={key:6},Za={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},Ja={key:0,class:"tooltip","data-tip":"该设备申请被用作出口节点，请在设备菜单的“编辑子网转发…”中检查"},el=de(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),tl=[el],sl={class:"hidden md:table-cell md:w-1/4"},nl={class:"font-medium pr-6"},ol={class:"truncate"},al={key:0,class:"absolute -mt-1 -ml-2 -top-px -left-px shadow-md cursor-pointer rounded-md active:shadow-sm transition-shadow duration-100 ease-in-out z-20",style:{visibility:"visible","max-width":"934px"}},ll={class:"flex border rounded-md button-outline bg-white"},il={class:"inline-block select-none truncate"},rl=de(()=>e("span",{class:"cursor-pointer text-blue-500 pl-2"},"复制",-1)),dl={class:"tooltip text-gray-400","data-tip":"这条子网转发未启用"},cl=de(()=>e("br",null,null,-1)),ul={class:"hidden md:table-cell w-1/4 lg:w-1/5"},hl={class:"flex items-center relative"},vl={class:"text-sm text-gray-600"},fl={class:"hidden lg:table-cell md:flex-auto"},ml={class:"inline-flex items-center cursor-default"},pl=["data-tip"],gl=["data-tip"],bl={class:"table-cell justify-end ml-auto md:ml-0 relative w-12 justify-items-end items-center md:items-start"},_l=["onClick"],xl=fe('<button class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-20" data-v-d2dc0a09><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500" data-v-d2dc0a09><circle cx="12" cy="12" r="1" data-v-d2dc0a09></circle><circle cx="19" cy="12" r="1" data-v-d2dc0a09></circle><circle cx="5" cy="12" r="1" data-v-d2dc0a09></circle></svg></button>',1),yl=[xl],wl=["onClick"],kl=de(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})],-1)),$l=[kl],Cl={__name:"Machines",setup(t){const s=y(null),n=y(0),a=y(0);function o(){var L,j;s.value!=null&&(n.value=((L=s.value)==null?void 0:L.getBoundingClientRect().left)+14,a.value=(j=s.value)==null?void 0:j.getBoundingClientRect().top)}function c(L,j){var F,M,Y,ee;for(s.value=j.target;((F=s.value)==null?void 0:F.tagName)!="DIV"&&((M=s.value)==null?void 0:M.tagName)!="div";)s.value=s.value.parentNode;i.value=L,n.value=((Y=s.value)==null?void 0:Y.getBoundingClientRect().left)+14,a.value=(ee=s.value)==null?void 0:ee.getBoundingClientRect().top,_.value=!0}function p(){s.value=null,_.value=!1}const d=y(!1),r=y("");ke(d,()=>{d.value&&setTimeout(function(){d.value=!1},5e3)});const i=y("-1");function l(L){i.value=L,x.value=!0}function h(){x.value=!1}const v=y(!1),_=y(!1),x=y(!1),P=y(!1);function E(){x.value=!1,p(i.value),P.value=!0}const w=y(!1);function b(){x.value=!1,p(i.value),w.value=!0}const I=y(!1);function m(){x.value=!1,p(i.value),I.value=!0}const k=y({}),V=G(()=>Object.getOwnPropertyNames(k.value).length);let te;function $e(){return new Promise((L,j)=>{axios.get("/admin/api/machines").then(function(F){if((F.data.needreauth!=null||F.data.needreauth==!0)&&(r.value=F.data.needreauthreason+"，登录状态失效，请重新登录",d.value=!0,j()),F.data.errormsg==null||F.data.errormsg===""){for(var M in F.data.mlist){k.value[M]=F.data.mlist[M];let Y=k.value[M].expirydesc.slice(-2);k.value[M].expirydesc=="马上就要过期"||Y=="分钟"||Y=="小时"||Y=="1天"?k.value[M].soonexpiry=!0:k.value[M].soonexpiry=!1}L()}else F.data.errormsg!=null&&(r.value="获设备信息出错："+F.data.errormsg,d.value=!0,j())}).catch(function(F){r.value="更新页面出错："+F,d.value=!0,j()}).then(function(){})})}be(()=>{o(),window.addEventListener("resize",o),window.addEventListener("scroll",o),$e().then().catch(),te=setInterval(()=>{$e().then().catch()},15e3)}),Pt(()=>{window.removeEventListener("resize",o),window.removeEventListener("scroll",o)}),Xs(()=>{clearInterval(te)});function Ce(L){p(),axios.post("/admin/api/machines",{mid:L,state:"set-expires"}).then(function(j){j.data.status=="success"?(k.value[L].neverExpires=j.data.data.neverExpires,k.value[L].expirydesc=j.data.data.expires,j.data.data.neverExpires==!0?r.value="已禁用密钥过期":r.value="已启用密钥过期",d.value=!0):(r.value="失败："+j.data.status.substring(6),d.value=!0)}).catch(function(j){console.log(j)})}function Se(L){axios.post("/admin/api/machine/remove",{mid:L}).then(function(j){j.data.status=="OK"?(P.value=!1,r.value=k.value[L].name+"已从您的蜃境网络移除！",d.value=!0,delete k.value[L]):alert("失败："+j.data.errmsg)}).catch(function(j){console.log(j)})}function Ee(L,j,F){k.value[i.value].name=L,k.value[i.value].automaticNameMode=j,we(()=>{w.value=!F,we(()=>{r.value="已更新设备名称！",d.value=!0})})}function me(L){r.value="更新设备名称失败！",d.value=!0}function B(L,j,F,M){k.value[i.value].advertisedIPs=L,k.value[i.value].allowedIPs=j,k.value[i.value].extraIPs=F,k.value[i.value].allowedExitNode=M,we(()=>{r.value="已更新子网转发设置！",d.value=!0})}function z(L){r.value="更新子网转发设置失败！",d.value=!0}function W(){navigator.clipboard.writeText(k.value[i.value].mipv4).then(function(){r.value="蜃境网络IPv4地址已复制到粘贴板！",d.value=!0})}function T(){navigator.clipboard.writeText(k.value[i.value].mipv6).then(function(){r.value="蜃境网络IPv6地址已复制到粘贴板！",d.value=!0})}return(L,j)=>{const F=He("router-link");return u(),f(X,null,[e("main",ma,[e("section",pa,[ga,e("div",ba,C(O(V))+" 个设备 ",1),e("table",_a,[xa,e("tbody",null,[(u(!0),f(X,null,ie(k.value,(M,Y)=>(u(),f("tr",{id:Y,"v-if":k.value[Y]!=L.nil,onMouseenter:ee=>l(Y),onMouseleave:ee=>h(),class:"w-full px-0.5 hover"},[e("td",wa,[oe(F,{class:"relative",to:"/machines/"+M.mipv4},{default:ce(()=>[e("div",ka,[e("p",$a,[e("span",{class:ae([{"bg-green-500":M.ifonline,"bg-gray-300":!M.ifonline},"inline-block w-2 h-2 rounded-full relative -top-px lg:hidden mr-2"])},null,2),e("a",Ca,C(M.name),1)]),e("div",Sa,[e("span",Ea,C(M.mipv4),1),Pa,e("span",Ra,C(M.os),1)])]),e("div",null,[e("div",Ma,[e("span",null,C(M.useraccount),1)])])]),_:2},1032,["to"]),e("div",Na,[e("div",null,[M.issharedin?(u(),f("span",ja,Ba)):$("",!0),M.issharedout?(u(),f("span",Aa,Oa)):$("",!0),M.expirydesc=="已过期"?(u(),f("span",La,Ta)):$("",!0),M.neverExpires?(u(),f("span",za,Va)):$("",!0),M.soonexpiry?(u(),f("span",Ga,[e("div",Ka,C(M.expirydesc),1)])):$("",!0),M.hasSubnets?(u(),f("span",qa,[e("div",Fa,[K(" 子网转发 "),M.hasSubnets&&M.extraIPs&&M.extraIPs.length>0?(u(),f("div",Wa,Xa)):$("",!0)])])):$("",!0),M.advertisedExitNode?(u(),f("span",Ya,[e("div",Za,[K(" 出口节点 "),M.allowedExitNode?$("",!0):(u(),f("div",Ja,tl))])])):$("",!0)])])]),e("td",sl,[e("ul",null,[e("li",nl,[e("div",{onMouseenter:j[0]||(j[0]=ee=>v.value=!0),onMouseleave:j[1]||(j[1]=ee=>v.value=!1),class:"flex relative min-w-0"},[e("div",ol,[e("span",null,C(M.mipv4),1)]),v.value&&i.value==Y?(u(),f("div",al,[e("div",ll,[e("div",{onClick:W,class:"flex min-w-0 py-1 px-2 hover:bg-gray-100 rounded-l-md"},[e("span",il,[e("span",null,C(M.mipv4),1)]),rl]),e("div",{onClick:T,class:"text-blue-500 py-1 px-2 border-l hover:bg-gray-100 rounded-r-md"}," IPv6 ")])])):$("",!0)],32)]),(u(!0),f(X,null,ie(M.allowedIPs,ee=>(u(),f("li",null,[e("span",null,C(ee),1)]))),256)),(u(!0),f(X,null,ie(M.extraIPs,ee=>(u(),f(X,null,[e("li",dl,[e("span",null,C(ee),1)]),cl],64))),256))])]),e("td",ul,[e("div",hl,[e("div",null,C(M.os),1)]),e("div",vl,C(M.version),1)]),e("td",fl,[e("span",null,[e("div",ml,[e("span",{class:ae(["inline-block w-2 h-2 rounded-full mr-2",{"bg-green-500":M.ifonline,"bg-gray-300":!M.ifonline}])},null,2),M.ifonline?(u(),f("span",{key:0,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+M.lastseen},"已连接",8,pl)):(u(),f("span",{key:1,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+M.lastseen},C(M.lastseen),9,gl))])])]),e("td",bl,[!x.value&&!_.value||i.value!=Y?(u(),f("div",{key:0,onClick:ee=>c(Y,ee),class:"flex-none w-12 -mt-0.5 relative"},yl,8,_l)):$("",!0),(x.value||_.value)&&i.value==Y?(u(),f("div",{key:1,onClick:ee=>c(Y,ee),class:"flex-none w-12 border button-outline bg-white shadow-md cursor-pointer focus:outline-none focus:ring -mt-0.5 relative py-0.5 px-2 rounded-md border-gray-300/100 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 transition-shadow duration-100 ease-in-out z-20"},$l,8,wl)):$("",!0)])],40,ya))),256))])])])]),(u(),Q(he,{to:".toast-container"},[oe(Ke,{show:d.value,msg:r.value,onClose:j[2]||(j[2]=M=>d.value=!1)},null,8,["show","msg"])])),(u(),Q(he,{to:"body"},[_.value?(u(),Q(Gt,{key:0,toleft:n.value,totop:a.value,neverExpires:k.value[i.value].neverExpires,onClose:p,onSetExpires:j[3]||(j[3]=M=>Ce(i.value)),onShowdialogRemove:E,onShowdialogUpdatehostname:b,onShowdialogSetsubnet:m},null,8,["toleft","totop","neverExpires"])):$("",!0)])),(u(),Q(he,{to:"body"},[P.value?(u(),Q(Kt,{key:0,"machine-name":k.value[i.value].name,onClose:j[4]||(j[4]=M=>P.value=!1),onConfirm:j[5]||(j[5]=M=>Se(i.value))},null,8,["machine-name"])):$("",!0),w.value?(u(),Q(qt,{key:1,id:i.value,"given-name":k.value[i.value].name,"host-name":k.value[i.value].hostname,"auto-gen":k.value[i.value].automaticNameMode,onClose:j[6]||(j[6]=M=>w.value=!1),onUpdateDone:Ee,onUpdateFail:me},null,8,["id","given-name","host-name","auto-gen"])):$("",!0),I.value?(u(),Q(Ft,{key:2,id:i.value,"current-machine":k.value[i.value],onClose:j[7]||(j[7]=M=>I.value=!1),onUpdateDone:B,onUpdateFail:z},null,8,["id","current-machine"])):$("",!0)]))],64)}}},Sl=je(Cl,[["__scopeId","data-v-d2dc0a09"]]);const A=t=>(Ie("data-v-2820c8a8"),t=t(),Be(),t),El={class:"container mx-auto pb-20 md:pb-24"},Pl={class:"mb-24"},Rl={class:"pb-4 mb-8"},Ml={class:"font-medium space-x-2 mb-5 truncate flex"},Nl=A(()=>e("span",{class:"text-gray-400"},"/",-1)),jl={class:"flex flex-wrap gap-2 items-center justify-between"},Il={class:"text-2xl font-semibold tracking-tight leading-tight truncate flex-shrink-0 max-w-full",tabindex:"-1"},Bl={class:"flex"},Al={class:"flex gap-2 flex-wrap"},Dl=A(()=>e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]),K("设备设置 ")],-1)),Ol=[Dl],Ll={class:"flex border-t border-gray-200 text-sm mt-4 pt-4"},Ul={class:"max-w-sm"},Tl=A(()=>e("div",{class:"text-gray-500 mb-2"},"归属于",-1)),zl={class:"mt-0.5"},Hl={class:"flex items-center text-gray-600 text-sm"},Vl={class:"relative shrink-0 rounded-full overflow-hidden w-5 h-5 text-xs mr-2"},Gl={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-5 h-5 text-xs",style:{"background-color":"rgb(161, 56, 33)"}},Kl={"data-state":"closed"},ql={key:0,class:"max-w-sm border-l border-gray-200 ml-4 pl-4"},Fl=A(()=>e("p",{class:"text-gray-500 mb-2"},"状态",-1)),Wl={key:0},Ql=A(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1)),Xl=[Ql],Yl={key:1},Zl=A(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1)),Jl=[Zl],ei={key:2},ti=A(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1)),si=[ti],ni={key:3},oi=A(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1)),ai=[oi],li={key:4},ii={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},ri={key:5},di={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},ci={key:0,class:"tooltip","data-tip":"该设备存在未批准子网转发，请在设备菜单的“编辑子网转发…”中检查"},ui=A(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),hi=[ui],vi={key:6},fi={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},mi={key:0,class:"tooltip","data-tip":"该设备申请被用作出口节点，请在设备菜单的“编辑子网转发…”中检查"},pi=A(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),gi=[pi],bi={class:"mb-8"},_i={class:"flex justify-between mb-4"},xi=A(()=>e("div",{class:"max-w-xl"},[e("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"子网转发"),e("p",{class:"text-gray-600"}," “子网转发”允许你暴露设备可访问物理网络路由给您的蜃境网络 ")],-1)),yi={key:0},wi={key:0,class:"p-4 md:p-6 border border-gray-200 rounded-md"},ki={class:"leading-normal"},$i={class:"tooltip text-gray-400","data-tip":"这条子网转发未启用"},Ci=A(()=>e("br",null,null,-1)),Si={key:1,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},Ei=A(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备未暴露任何子网可供转发 ")],-1)),Pi=[Ei],Ri={key:2,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},Mi=A(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备来自外部共享，不能暴露子网转发给你 ")],-1)),Ni=[Mi],ji={class:"mb-8"},Ii=A(()=>e("header",{class:"max-w-xl mb-4"},[e("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"设备信息"),e("p",{class:"text-gray-600"},"关于该设备网络的信息，用于调试连接问题")],-1)),Bi={class:"p-4 md:p-6 border border-gray-200 rounded-md grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-2"},Ai={class:"space-y-2"},Di={class:"flex text-sm"},Oi=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建者",-1)),Li={class:"min-w-0 truncate"},Ui={class:"flex text-sm"},Ti=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备名称",-1)),zi={class:"min-w-0"},Hi={class:"flex relative min-w-0"},Vi={class:"truncate"},Gi={key:0,class:"cursor-pointer text-blue-500 pl-2"},Ki={class:"flex text-sm"},qi=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"域名",-1)),Fi={class:"min-w-0"},Wi={class:"flex relative min-w-0"},Qi={class:"truncate"},Xi={key:0,class:"cursor-pointer text-blue-500 pl-2"},Yi={class:"flex text-sm"},Zi=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"系统主机名",-1)),Ji={class:"min-w-0 truncate"},er={class:"flex text-sm"},tr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"操作系统",-1)),sr={class:"min-w-0 truncate"},nr={class:"flex text-sm"},or=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境客户端版本",-1)),ar={class:"min-w-0 truncate"},lr={class:"flex items-center"},ir={class:"flex text-sm"},rr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv4",-1)),dr={class:"min-w-0"},cr={class:"flex relative min-w-0"},ur={class:"truncate"},hr={key:0,class:"cursor-pointer text-blue-500 pl-2"},vr={class:"flex text-sm"},fr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv6",-1)),mr={class:"min-w-0"},pr={class:"flex relative min-w-0"},gr={class:"truncate"},br={class:"inline-flex justify-start min-w-0 max-w-full"},_r={class:"truncate w-fit flex-shrink"},xr={key:0,class:"cursor-pointer text-blue-500 pl-2"},yr={class:"flex text-sm"},wr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备ID",-1)),kr={class:"min-w-0 truncate"},$r={class:"flex text-sm"},Cr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备端点信息",-1)),Sr={class:"min-w-0 truncate"},Er={class:"pl-3 -indent-3"},Pr={class:"select-all"},Rr={class:"flex text-sm"},Mr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"中继器",-1)),Nr={class:"min-w-0 truncate"},jr={key:0},Ir=A(()=>e("li",null," 中继器未设定或出错 ",-1)),Br=[Ir],Ar={key:1},Dr={class:"font-medium"},Or={key:0,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"relative inline-block ml-1 -top-px"},Lr=A(()=>e("polyline",{points:"20 6 9 17 4 12"},null,-1)),Ur=[Lr],Tr={class:"space-y-2"},zr={class:"flex text-sm"},Hr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建于",-1)),Vr={class:"min-w-0 truncate"},Gr={class:"flex text-sm"},Kr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"最近更新",-1)),qr={class:"min-w-0 truncate"},Fr={class:"flex text-sm"},Wr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"密钥过期",-1)),Qr={key:0,class:"min-w-0 truncate"},Xr={key:1,class:"min-w-0 truncate"},Yr=A(()=>e("h2",{class:"pt-2 text-xs uppercase font-semibold text-gray-500 tracking-wide"}," 客户端连通性 ",-1)),Zr={class:"flex text-sm"},Jr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"复杂网络 Varies",-1)),ed={key:0,class:"min-w-0 truncate"},td={key:1,class:"min-w-0 truncate"},sd={class:"flex text-sm"},nd=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"}," 需发夹机制 Hairpinning ",-1)),od={key:0,class:"min-w-0 truncate"},ad={key:1,class:"min-w-0 truncate"},ld={class:"flex text-sm"},id=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"IPv6",-1)),rd={key:0,class:"min-w-0 truncate"},dd={key:1,class:"min-w-0 truncate"},cd={class:"flex text-sm"},ud=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UDP",-1)),hd={key:0,class:"min-w-0 truncate"},vd={key:1,class:"min-w-0 truncate"},fd={class:"flex text-sm"},md=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UPnP",-1)),pd={key:0,class:"min-w-0 truncate"},gd={key:1,class:"min-w-0 truncate"},bd={class:"flex text-sm"},_d=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"PCP",-1)),xd={key:0,class:"min-w-0 truncate"},yd={key:1,class:"min-w-0 truncate"},wd={class:"flex text-sm"},kd=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"NAT-PMP",-1)),$d={key:0,class:"min-w-0 truncate"},Cd={key:1,class:"min-w-0 truncate"},Sd={__name:"Machine",setup(t){const s=y(!1),n=rt(),a=dt(),o=y(!1),c=y("");ke(o,()=>{o.value&&setTimeout(function(){o.value=!1},5e3)});const p=G(()=>m.value.issharedin||m.value.issharedout||m.value.expirydesc=="已过期"||m.value.neverExpires||m.value.soonexpiry||m.value.advertisedExitNode||m.value.hasSubnets),d=y(null),r=y(0),i=y(0),l=y(!1);function h(){var B,z;d.value!=null&&(r.value=((B=d.value)==null?void 0:B.getBoundingClientRect().left)+78,i.value=((z=d.value)==null?void 0:z.getBoundingClientRect().top)+20),window.onresize=()=>{var W,T;d.value!=null&&(r.value=((W=d.value)==null?void 0:W.getBoundingClientRect().left)+78,i.value=((T=d.value)==null?void 0:T.getBoundingClientRect().top)+20)},window.onscroll=()=>{var W,T;d.value!=null&&(r.value=((W=d.value)==null?void 0:W.getBoundingClientRect().left)+78,i.value=((T=d.value)==null?void 0:T.getBoundingClientRect().top)+20)}}function v(B){var z,W,T,L,j;for(d.value=B.target;((z=d.value)==null?void 0:z.tagName)!="BUTTON"&&((W=d.value)==null?void 0:W.tagName)!="button";)d.value=(T=d.value)==null?void 0:T.parentNode;r.value=((L=d.value)==null?void 0:L.getBoundingClientRect().left)+78,i.value=((j=d.value)==null?void 0:j.getBoundingClientRect().top)+20,l.value=!0}function _(){d.value=null,l.value=!1}const x=y(!1);function P(){_(),x.value=!0}const E=y(!1);function w(){_(),E.value=!0}const b=y(!1);function I(){_(),b.value=!0}const m=y({}),k=y(""),V=y("");be(()=>{h(),axios.get("/admin/api/machines").then(function(B){if((B.data.needreauth!=null||B.data.needreauth==!0)&&(c.value=B.data.needreauthreason+"，登录状态失效，请重新登录",o.value=!0,reject()),B.data.errormsg==null||B.data.errormsg===""){V.value=B.data.basedomain;for(var z in B.data.mlist)if(B.data.mlist[z].mipv4===a.params.mip){m.value=B.data.mlist[z],k.value=z;let W=m.value.expirydesc.slice(-2);m.value.expirydesc=="马上就要过期"||W=="分钟"||W=="小时"||W=="1天"?m.value.soonexpiry=!0:m.value.soonexpiry=!1;break}}}).catch(function(B){alert(B)}).then(function(){})});function te(){_(),axios.post("/admin/api/machines",{mid:k.value,state:"set-expires"}).then(function(B){B.data.status=="success"?(m.value.neverExpires=B.data.data.neverExpires,m.value.expirydesc=B.data.data.expires,B.data.data.neverExpires==!0?c.value="已禁用密钥过期":c.value="已启用密钥过期",o.value=!0):(c.value="失败："+B.data.status.substring(6),o.value=!0)}).catch(function(B){console.log(B)})}function $e(){axios.post("/admin/api/machine/remove",{mid:k}).then(function(B){B.data.status=="OK"?(x.value=!1,c.value=m.value.name+"已从您的蜃境网络移除！",o.value=!0,n.push("/machines")):alert("失败："+B.data.errmsg)}).catch(function(B){console.log(B)})}function Ce(B,z,W){m.value.name=B,m.value.automaticNameMode=z,we(()=>{E.value=!W,we(()=>{c.value="已更新设备名称！",o.value=!0})})}function Se(B){c.value="更新设备名称失败！",o.value=!0}function Ee(B,z,W,T){m.value.advertisedIPs=B,m.value.allowedIPs=z,m.value.extraIPs=W,m.value.allowedExitNode=T,we(()=>{c.value="已更新子网转发设置！",o.value=!0})}function me(B){c.value="更新子网转发设置失败！",o.value=!0}return(B,z)=>{const W=He("router-link");return u(),f(X,null,[e("main",El,[e("section",Pl,[e("header",Rl,[e("div",Ml,[oe(W,{to:"/machines",class:"text-blue-500"},{default:ce(()=>[K("全部设备")]),_:1}),Nl,e("span",null,C(m.value.mipv4),1)]),e("div",jl,[e("h1",Il,C(m.value.name),1),e("div",Bl,[e("div",Al,[e("button",{onClick:z[0]||(z[0]=T=>v(T)),class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 min-w-0"},Ol)])])]),e("div",Ll,[e("div",Ul,[Tl,e("div",zl,[e("div",Hl,[e("div",Vl,[e("div",Gl,C(m.value.usernamehead),1)]),e("span",Kl,C(m.value.useraccount),1)])])]),O(p)?(u(),f("div",ql,[Fl,e("div",null,[m.value.issharedin?(u(),f("span",Wl,Xl)):$("",!0),m.value.issharedout?(u(),f("span",Yl,Jl)):$("",!0),m.value.expirydesc=="已过期"?(u(),f("span",ei,si)):$("",!0),m.value.neverExpires?(u(),f("span",ni,ai)):$("",!0),m.value.soonexpiry?(u(),f("span",li,[e("div",ii,C(m.value.expirydesc),1)])):$("",!0),m.value.hasSubnets?(u(),f("span",ri,[e("div",di,[K(" 子网转发 "),m.value.hasSubnets&&m.value.extraIPs&&m.value.extraIPs.length>0?(u(),f("div",ci,hi)):$("",!0)])])):$("",!0),m.value.advertisedExitNode?(u(),f("span",vi,[e("div",fi,[K(" 出口节点 "),m.value.allowedExitNode?$("",!0):(u(),f("div",mi,gi))])])):$("",!0)])])):$("",!0)])]),e("section",bi,[e("header",_i,[xi,m.value.hasSubnets?(u(),f("div",yi,[e("button",{onClick:I,class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 mt-2"}," 配置 ")])):$("",!0)]),m.value.hasSubnets?(u(),f("div",wi,[e("ul",ki,[(u(!0),f(X,null,ie(m.value.allowedIPs,T=>(u(),f("li",null,[e("span",null,C(T),1)]))),256)),(u(!0),f(X,null,ie(m.value.extraIPs,T=>(u(),f(X,null,[e("li",$i,[e("span",null,C(T),1)]),Ci],64))),256))])])):$("",!0),!m.value.hasSubnets&&!m.value.issharedin?(u(),f("div",Si,Pi)):$("",!0),m.value.issharedin?(u(),f("div",Ri,Ni)):$("",!0)]),e("section",ji,[Ii,e("div",Bi,[e("div",Ai,[e("dl",Di,[Oi,e("dd",Li,C(m.value.useraccount),1)]),e("dl",Ui,[Ti,e("dd",zi,[e("div",Hi,[e("div",Vi,C(m.value.name),1),s.value?(u(),f("div",Gi,"复制")):$("",!0)])])]),e("dl",Ki,[qi,e("dd",Fi,[e("div",Wi,[e("div",Qi,C(m.value.name)+"."+C(m.value.useraccount)+"."+C(V.value),1),s.value?(u(),f("div",Xi,"复制")):$("",!0)])])]),e("dl",Yi,[Zi,e("dd",Ji,C(m.value.hostname),1)]),e("dl",er,[tr,e("dd",sr,C(m.value.os),1)]),e("dl",nr,[or,e("dd",ar,[e("div",lr,C(m.value.version),1)])]),e("dl",ir,[rr,e("dd",dr,[e("div",cr,[e("div",ur,[e("span",null,C(m.value.mipv4),1)]),s.value?(u(),f("div",hr,"复制")):$("",!0)])])]),e("dl",vr,[fr,e("dd",mr,[e("div",pr,[e("div",gr,[e("span",br,[e("span",_r,C(m.value.mipv6),1)])]),s.value?(u(),f("div",xr,"复制")):$("",!0)])])]),e("dl",yr,[wr,e("dd",kr,C(k.value),1)]),e("dl",$r,[Cr,e("dd",Sr,[e("ul",Er,[(u(!0),f(X,null,ie(m.value.endpoints,T=>(u(),f("li",Pr,[e("span",null,C(T),1)]))),256))])])]),e("dl",Rr,[Mr,e("dd",Nr,[m.value.usederp=="x"?(u(),f("ul",jr,Br)):(u(),f("ul",Ar,[(u(!0),f(X,null,ie(m.value.derps,(T,L)=>(u(),f("li",null,[e("strong",Dr,C(L)+" 号中继",1),K(": "+C(T)+" ms ",1),m.value.usederp==L?(u(),f("svg",Or,Ur)):$("",!0)]))),256))]))])])]),e("div",Tr,[e("dl",zr,[Hr,e("dd",Vr,C(m.value.createat),1)]),e("dl",Gr,[Kr,e("dd",qr,C(m.value.lastseen),1)]),e("dl",Fr,[Wr,m.value.neverExpires?(u(),f("dd",Qr," 永不过期 ")):$("",!0),m.value.neverExpires?$("",!0):(u(),f("dd",Xr,C(m.value.expirydesc),1))]),Yr,e("dl",Zr,[Jr,m.value.varies?(u(),f("dd",ed,"是")):(u(),f("dd",td,"否"))]),e("dl",sd,[nd,m.value.hairpinning?(u(),f("dd",od,"是")):(u(),f("dd",ad,"否"))]),e("dl",ld,[id,m.value.ipv6en?(u(),f("dd",rd,"是")):(u(),f("dd",dd,"否"))]),e("dl",cd,[ud,m.value.udpen?(u(),f("dd",hd,"是")):(u(),f("dd",vd,"否"))]),e("dl",fd,[md,m.value.upnpen?(u(),f("dd",pd,"是")):(u(),f("dd",gd,"否"))]),e("dl",bd,[_d,m.value.pcpen?(u(),f("dd",xd,"是")):(u(),f("dd",yd,"否"))]),e("dl",wd,[kd,m.value.pmpen?(u(),f("dd",$d,"是")):(u(),f("dd",Cd,"否"))])])])])])]),(u(),Q(he,{to:".toast-container"},[oe(Ke,{show:o.value,msg:c.value,onClose:z[1]||(z[1]=T=>o.value=!1)},null,8,["show","msg"])])),(u(),Q(he,{to:"body"},[l.value?(u(),Q(Gt,{key:0,toleft:r.value,totop:i.value,neverExpires:m.value.neverExpires,onClose:_,onSetExpires:te,onShowdialogRemove:P,onShowdialogUpdatehostname:w,onShowdialogSetsubnet:I},null,8,["toleft","totop","neverExpires"])):$("",!0)])),(u(),Q(he,{to:"body"},[x.value?(u(),Q(Kt,{key:0,"machine-name":m.value.name,onClose:z[2]||(z[2]=T=>x.value=!1),onConfirm:$e},null,8,["machine-name"])):$("",!0),E.value?(u(),Q(qt,{key:1,id:k.value,"host-name":m.value.hostname,"given-name":m.value.name,"auto-gen":m.value.automaticNameMode,onClose:z[3]||(z[3]=T=>E.value=!1),onUpdateDone:Ce,onUpdateFail:Se},null,8,["id","host-name","given-name","auto-gen"])):$("",!0),b.value?(u(),Q(Ft,{key:2,id:k.value,"current-machine":m.value,onClose:z[4]||(z[4]=T=>b.value=!1),onUpdateDone:Ee,onUpdateFail:me},null,8,["id","current-machine"])):$("",!0)]))],64)}}},Ed=je(Sd,[["__scopeId","data-v-2820c8a8"]]);const se=t=>(Ie("data-v-1f126ef5"),t=t(),Be(),t),Pd={class:"container mx-auto pb-20 md:pb-24"},Rd={class:"mb-24"},Md=se(()=>e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2",tabindex:"-1"},"DNS")])])],-1)),Nd={class:"mb-16 max-w-2xl"},jd=se(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},"蜃境网域"),e("p",{class:"text-gray-600"},"这个名称用来注册DNS条目、分享设备给其他蜃境网域以及发放TLS证书")],-1)),Id={class:"max-w-sm"},Bd={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0"},Ad=["value"],Dd={class:"mb-16 max-w-2xl"},Od=se(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},"幻域"),e("p",{class:"text-gray-600"},"自动为您蜃境网域中的设备注册域名，令您从而可以使用名称替代IP地址访问设备")],-1)),Ld={class:"mb-16 max-w-2xl"},Ud=se(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},"域名服务器"),e("p",{class:"text-gray-600"},"设置您网络中设备可用来解析DNS的域名服务器")],-1)),Td={class:"text-gray-900"},zd={key:0,class:"py-3"},Hd={class:"flex mb-1"},Vd={class:"font-medium text-gray-600 mr-2 mb-1"},Gd=fe('<div class="space-x-2 mb-1" data-v-1f126ef5><div class="inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs relative -top-px" data-v-1f126ef5><svg width="0.9em" height="0.9em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-1" data-v-1f126ef5><path d="M6.5 12.5L8.05719 15.9428L11.5 17.5L8.05719 19.0572L6.5 22.5L4.94281 19.0572L1.5 17.5L4.94281 15.9428L6.5 12.5Z" fill="currentColor" data-v-1f126ef5></path><path d="M15.5 1L17.8358 6.16421L23 8.5L17.8358 10.8358L15.5 16L13.1642 10.8358L8 8.5L13.1642 6.16421L15.5 1Z" fill="currentColor" data-v-1f126ef5></path></svg><span data-v-1f126ef5>幻域</span></div></div>',1),Kd={class:"border border-gray-200 bg-white rounded-md divide-y overflow-hidden"},qd={class:"flex justify-between select-none"},Fd=se(()=>e("div",{class:"pl-4 flex flex-1 items-start"},[e("div",{class:"tabular-nums pr-2 py-2 w-full"},"100.100.100.100")],-1)),Wd={class:"p-2 pr-4 flex items-center justify-center"},Qd={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400",style:{transform:"translateX(0.125rem) scale(0.75)"}},Xd=se(()=>e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},null,-1)),Yd=se(()=>e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)),Zd=[Xd,Yd],Jd={"data-rbd-droppable-id":"search-domains","data-rbd-droppable-context-id":"0"},ec={class:"DNSDomainGroup py-3 -mx-3 px-3 rounded-md","data-rbd-draggable-context-id":"0","data-rbd-draggable-id":"abc.com"},tc={class:"flex items-center mb-1",tabindex:"0",role:"button","aria-describedby":"rbd-hidden-text-0-hidden-text-0","data-rbd-drag-handle-draggable-id":"abc.com","data-rbd-drag-handle-context-id":"0",draggable:"false"},sc=fe('<div class="py-1 px-2 -ml-2" data-v-1f126ef5><svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" class="relative -top-px text-gray-400" data-v-1f126ef5><circle cx="12" cy="12" r="10" data-v-1f126ef5></circle><line x1="2" y1="12" x2="22" y2="12" data-v-1f126ef5></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" data-v-1f126ef5></path></svg></div>',1),nc={class:"font-medium mb-1 mr-2 text-gray-600"},oc=fe('<div class="space-x-2 mb-1" data-v-1f126ef5><span data-state="closed" data-v-1f126ef5><div class="inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs" data-v-1f126ef5><svg xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1" data-v-1f126ef5><polyline points="16 3 21 3 21 8" data-v-1f126ef5></polyline><line x1="4" y1="20" x2="21" y2="3" data-v-1f126ef5></line><polyline points="21 16 21 21 16 21" data-v-1f126ef5></polyline><line x1="15" y1="15" x2="21" y2="21" data-v-1f126ef5></line><line x1="4" y1="4" x2="9" y2="9" data-v-1f126ef5></line></svg>分离 DNS </div></span></div>',1),ac={class:"border border-gray-200 bg-white rounded-md divide-y overflow-hidden"},lc={class:"transition-shadow -mb-px flex justify-between select-none"},ic={class:"pl-4 flex flex-1 items-start"},rc={class:"tabular-nums pr-2 py-2 w-full"},dc=fe('<div class="pr-2 pt-1.5" data-v-1f126ef5><button type="button" id="radix-:r19:" aria-haspopup="menu" aria-expanded="false" data-state="closed" class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 group-hover:border-gray-300/100 hover:border-gray-300/100 group-hover:bg-white hover:!bg-gray-0 group-hover:shadow-md hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-50" data-v-1f126ef5><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Actions…" class="text-gray-500" data-v-1f126ef5><circle cx="12" cy="12" r="1" data-v-1f126ef5></circle><circle cx="19" cy="12" r="1" data-v-1f126ef5></circle><circle cx="5" cy="12" r="1" data-v-1f126ef5></circle></svg></button></div>',1),cc={class:"pt-3"},uc={class:"flex items-center mb-2"},hc=se(()=>e("h4",{class:"font-medium text-gray-600 mr-2"},"全球域名服务器",-1)),vc={class:"flex items-center space-x-2 ml-auto"},fc=fe(`<label class="flex items-center cursor-pointer text-sm font-medium select-none space-x-1 text-gray-500" for="fallback" data-v-1f126ef5><span class="tooltip" data-tip="启用时，连接的客户端会忽略本地DNS设置，并总使用这些全球域名服务器。
禁用时，客户端首选本地DNS设置，只在需要时使用这些全球服务器。" data-v-1f126ef5><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="relative -top-0.5 inline-block" data-v-1f126ef5><circle cx="12" cy="12" r="10" data-v-1f126ef5></circle><line x1="12" y1="16" x2="12" y2="12" data-v-1f126ef5></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-1f126ef5></line></svg></span><span data-v-1f126ef5>覆盖本地 DNS</span></label>`,1),mc=["disabled"],pc={class:"border border-gray-200 bg-white rounded-md divide-y overflow-hidden"},gc={key:0,class:"-mb-px flex justify-between select-none"},bc=se(()=>e("div",{class:"pl-4 flex flex-1 items-start text-gray-400"},[e("div",{class:"tabular-nums pr-2 py-2 w-full"},"本地 DNS 设置")],-1)),_c={class:"p-2 pr-4 flex items-center justify-center"},xc={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400",style:{transform:"translateX(0.125rem) scale(0.75)"}},yc=se(()=>e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},null,-1)),wc=se(()=>e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)),kc=[yc,wc],$c={class:"transition-shadow -mb-px flex justify-between select-none"},Cc={class:"pl-4 flex flex-1 items-start"},Sc={class:"tabular-nums pr-2 py-2 w-full"},Ec=fe('<div class="pr-2 pt-1.5" data-v-1f126ef5><button type="button" id="radix-:r26:" aria-haspopup="menu" aria-expanded="false" data-state="closed" class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 group-hover:border-gray-300/100 hover:border-gray-300/100 group-hover:bg-white hover:!bg-gray-0 group-hover:shadow-md hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-50" data-v-1f126ef5><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Actions…" class="text-gray-500" data-v-1f126ef5><circle cx="12" cy="12" r="1" data-v-1f126ef5></circle><circle cx="19" cy="12" r="1" data-v-1f126ef5></circle><circle cx="5" cy="12" r="1" data-v-1f126ef5></circle></svg></button></div>',1),Pc=se(()=>e("button",{class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit mt-8"},[K(" 添加域名服务器 "),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.2","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1)),Rc={key:0,class:"mb-16 max-w-2xl"},Mc=se(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},[K("HTTPS 证书"),e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-yellow-50 bg-yellow-50 text-yellow-600 rounded-full px-2 py-1 leading-none relative text-sm ml-2 -top-px"}," Unavailable")]),e("p",{class:"text-gray-600"},"允许用户为他们的设备生辰HTTPS证书")],-1)),Nc={key:0,class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit"},jc={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},Ic=se(()=>e("header",{class:"flex items-center justify-between space-x-4 mb-5 mr-8"},[e("div",{class:"font-semibold text-lg truncate"},"停用幻域？")],-1)),Bc=se(()=>e("p",{class:"text-gray-700 mb-4"},"你网络中的用户将无法继续使用短名称在蜃境中访问设备",-1)),Ac={class:"flex mt-10 justify-end space-x-4"},Dc=se(()=>e("button",{class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit",type:"submit"},"停用幻域",-1)),Oc=se(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),Lc=[Oc],Uc={__name:"DNS",setup(t){const s=y("true"),n=y(!1),a=y("");ke(n,()=>{n.value&&setTimeout(function(){n.value=!1},5e3)});const o=y(!1),c=y({}),p=G(()=>c.value.magicDNSDomains[0]),d=G(()=>c.value.resolvers&&c.value.resolvers.length>0),r=G(()=>c.value.magicDNS),i=G(()=>d.value?c.value.resolvers:c.value.fallbackResolvers),l=G(()=>c.value.domains),h=G(()=>c.value.routes),v=y("复制");function _(){navigator.clipboard.writeText(p.value).then(function(){v.value="已复制!",setTimeout(()=>{v.value="复制"},3e3)})}be(()=>{axios.get("/admin/api/dns").then(function(P){P.data.status=="success"?c.value=P.data.data:P.data.status.substring(6)=="用户信息核对失败"}).catch(function(P){alert(P)})});function x(P){var E=c.value;switch(P){case"on":case"doOff":E.magicDNS=P=="on",axios.post("/admin/api/dns",E).then(function(w){w.data.status=="success"?(o.value=!1,a.value=P=="on"?"已启用幻域":"已禁用幻域",n.value=!0):console.log(w.data.status)}).catch(function(w){console.log(w)});break;case"off":o.value=!0;break}}return(P,E)=>(u(),f(X,null,[e("main",Pd,[e("section",Rd,[Md,e("section",Nd,[jd,e("div",Id,[e("div",Bd,[e("input",{onclick:"this.select()",class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:O(p)},null,8,Ad),e("button",{onClick:_,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},C(v.value),1)])]),e("button",{disabled:"",onClick:E[0]||(E[0]=w=>P.$emit("")),class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit mt-8"},"网域重命名")]),e("section",Dd,[Od,O(r)?(u(),f("button",{key:0,onClick:E[1]||(E[1]=w=>x("off")),class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit"},"停用幻域…")):$("",!0),O(r)?$("",!0):(u(),f("button",{key:1,onClick:E[2]||(E[2]=w=>x("on")),class:"btn border-0 bg-blue-500 hover:bg-blue-900 text-white h-9 min-h-fit"},"启用幻域"))]),e("section",Ld,[Ud,e("div",Td,[O(r)?(u(),f("div",zd,[e("header",Hd,[e("h4",Vd,C(O(p)),1),Gd]),e("div",Kd,[e("div",qd,[Fd,e("div",Wd,[(u(),f("svg",Qd,Zd))])])])])):$("",!0),e("div",Jd,[(u(!0),f(X,null,ie(O(l),w=>(u(),f("div",ec,[e("header",tc,[sc,e("h4",nc,C(w),1),oc]),(u(!0),f(X,null,ie(O(h)[w],b=>(u(),f("div",ac,[e("div",lc,[e("div",ic,[e("div",rc,C(b),1)]),dc])]))),256))]))),256))]),e("div",cc,[e("header",uc,[hc,e("div",vc,[fc,ue(e("input",{disabled:!O(i)||O(i).length==0,"onUpdate:modelValue":E[3]||(E[3]=w=>Yt(d)?d.value=w:null),id:"fallback",ref:"fallback",type:"checkbox",class:"toggle toggle-xs"},null,8,mc),[[Ue,O(d)]])])]),e("div",pc,[O(d)?$("",!0):(u(),f("div",gc,[bc,e("div",_c,[(u(),f("svg",xc,kc))])])),(u(!0),f(X,null,ie(O(i),w=>(u(),f("div",$c,[e("div",Cc,[e("div",Sc,C(w),1)]),Ec]))),256))])])]),Pc]),s.value?$("",!0):(u(),f("section",Rc,[Mc,(u(),f("button",Nc,"停用HTTPS证书…")),$("",!0)]))])]),(u(),Q(he,{to:".toast-container"},[oe(Ke,{show:n.value,msg:a.value,onClose:E[4]||(E[4]=w=>n.value=!1)},null,8,["show","msg"])])),(u(),Q(he,{to:"body"},[o.value?(u(),f("div",{key:0,onClick:E[8]||(E[8]=re(w=>o.value=!1,["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",jc,[Ic,e("form",{onSubmit:E[6]||(E[6]=re(w=>x("doOff"),["prevent"]))},[Bc,e("footer",Ac,[e("button",{onClick:E[5]||(E[5]=w=>o.value=!1),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消"),Dc])],32),e("button",{onClick:E[7]||(E[7]=w=>o.value=!1),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},Lc)])])):$("",!0)]))],64))}},Tc=je(Uc,[["__scopeId","data-v-1f126ef5"]]),zc={class:"flex-1"},Hc=e("div",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"},[e("h1",{class:"mr-2",tabindex:"-1"},"通用")],-1),Vc=e("div",{class:"text-gray-600 mt-3 mb-10"},[e("p",null,"管理您的蜃境网络配置")],-1),Gc={class:"mt-10"},Kc={class:"space-y-10"},qc=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"机构"),e("p",{class:"mt-1 text-gray-600"}," 这是您所属机构名称（个人用户显示您的账户），无法修改！ ")],-1),Fc={class:"mt-4"},Wc={class:"max-w-sm"},Qc={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0"},Xc=["value"],Yc=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"密钥过期"),e("p",{class:"mt-1 text-gray-600"}," 设置设备可以保持登录蜃境网络而不需重新登录认证的天数 ")],-1),Zc={class:"mt-4"},Jc={class:"flex"},eu={class:"relative"},tu={class:"bg-white top-1 bottom-1 right-1 rounded-r-md absolute flex items-center"},su={class:"flex items-center"},nu=["disabled"],ou=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),au=[ou],lu=["disabled"],iu=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),ru=[iu],du=e("div",{class:"flex items-center px-3 bg-gray-50 text-gray-500 border rounded-r border-l-0 border-gray-300"}," 天 ",-1),cu=e("p",{class:"text-sm text-gray-500 mt-1"},"请设置为1~180天",-1),uu={class:"mt-4"},hu=["disabled"],vu=["disabled"],fu={class:"mt-8"},mu=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"注销蜃境"),e("p",{class:"mt-1 text-gray-600"}," 永久注销蜃境网络（删除所有设备及用户信息），无法恢复！ ")],-1),pu={class:"mt-4"},gu=["disabled"],Le={__name:"General",setup(t){const s=y(!0),n=y(!1),a=y("");ke(n,()=>{n.value&&setTimeout(function(){n.value=!1},5e3)});const o=y(""),c=y(""),p=y(""),d=y(""),r=y(""),i=y(180),l=y(180),h=y(!1),v=y(!1),_=y(!1),x=y("复制");function P(){navigator.clipboard.writeText(r.value).then(function(){x.value="已复制!",setTimeout(()=>{x.value="复制"},3e3)})}function E(){Number(l.value)>1?h.value=!1:h.value=!0,Number(l.value)<180?v.value=!1:v.value=!0,Number(l.value)!=i.value?_.value=!1:_.value=!0}function w(k){l.value=l.value.replace(/[^\d]+/g,"").replace(/^0+(\d)/,"$1"),k&&(l.value==""&&(l.value=i.value),Number(l.value)==0&&(l.value=1),Number(l.value)>180&&(l.value=180)),E()}function b(k){k==!0?l.value=Number(l.value)+1:l.value=Number(l.value)-1,E()}function I(){l.value=i.value,E()}be(()=>{axios.get("/admin/api/self").then(function(k){(k.data.errormsg==null||k.data.errormsg==="")&&(o.value=k.data.useraccount,c.value=k.data.basedomain,p.value=k.data.username,d.value=k.data.usernamehead,r.value=k.data.orgname)}).catch(function(k){alert(k)}).then(function(){}),axios.get("/admin/api/netsettings").then(function(k){k.data.status=="success"?(i.value=k.data.data.maxKeyDurationDays,l.value=k.data.data.maxKeyDurationDays,E()):k.data.status.substring(6)=="用户信息核对失败"}).catch(function(k){alert(k)}).then(function(){})});function m(){axios.post("/admin/api/netsetting/updatekeyexpiry",{maxKeyDurationDays:Number(l.value)}).then(function(k){k.data.status=="success"?(i.value=k.data.data,E(),a.value="已更新您网络中节点密钥最长有效期！",n.value=!0):(a.value="失败："+k.data.status.substring(6),n.value=!0)}).catch(function(k){console.log(k)})}return(k,V)=>(u(),f(X,null,[e("div",zc,[Hc,Vc,e("div",Gc,[e("div",Kc,[e("div",null,[qc,e("div",Fc,[e("div",Wc,[e("div",Qc,[e("input",{onclick:"this.select()",class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:r.value},null,8,Xc),e("button",{onClick:P,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},C(x.value),1)])])])]),e("div",null,[Yc,e("div",Zc,[e("div",Jc,[e("div",eu,[ue(e("input",{"onUpdate:modelValue":V[0]||(V[0]=te=>l.value=te),onInput:V[1]||(V[1]=te=>w(!1)),onBlur:V[2]||(V[2]=te=>w(!0)),class:"input z-0 border focus:outline-blue-500/60 hover:border border-stone-200 hover:border-stone-400 rounded-r-none h-9 min-h-fit",inputmode:"numeric",pattern:"[0-9]*",id:"key-expiry-duration",tabindex:"0"},null,544),[[ot,l.value]]),e("div",tu,[e("div",su,[e("button",{onClick:V[3]||(V[3]=te=>b(!1)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:h.value,type:"button",tabindex:"-1"},au,8,nu),e("button",{onClick:V[4]||(V[4]=te=>b(!0)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:v.value,type:"button",tabindex:"-1"},ru,8,lu)])])]),du]),cu,e("div",uu,[e("button",{onClick:m,class:"btn border-0 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-600/60 text-white disabled:text-white/60 h-9 min-h-fit",disabled:_.value}," 保存 ",8,hu),e("button",{onClick:I,class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3",disabled:_.value}," 重置 ",8,vu)])])])]),e("div",fu,[mu,e("div",pu,[e("button",{disabled:s.value,class:"btn border-0 bg-red-600 hover:bg-red-700 disabled:bg-red-600/60 disabled:text-white/60 text-white h-9 min-h-fit"}," 注销蜃境… ",8,gu)])])])]),(u(),Q(he,{to:".toast-container"},[oe(Ke,{show:n.value,msg:a.value,onClose:V[5]||(V[5]=te=>n.value=!1)},null,8,["show","msg"])]))],64))}};const ne=t=>(Ie("data-v-73b20d8a"),t=t(),Be(),t),bu={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",tabindex:"-1",style:{"pointer-events":"auto"}},_u=ne(()=>e("header",{class:"flex items-center justify-between space-x-4 mb-5 mr-8"},[e("div",{class:"font-semibold text-lg truncate"},"生成授权密钥")],-1)),xu={key:0},yu={class:"flex justify-between"},wu=ne(()=>e("div",null,[e("h4",{class:"font-medium mb-1"},"可重用"),e("p",{class:"text-sm text-gray-500"},"使用此密钥授权多个设备")],-1)),ku={class:"ml-6"},$u=["disabled"],Cu={class:"mt-4"},Su=ne(()=>e("h4",{class:"font-medium mb-1"},"过期",-1)),Eu=ne(()=>e("p",{class:"text-sm text-gray-500"},"该授权密钥有效期天数。这个并不会影响使用该密钥授权的设备自身的设备密钥有效期限",-1)),Pu={class:"flex mt-4"},Ru={class:"relative"},Mu=["disabled"],Nu={class:"bg-white top-1 bottom-1 right-1 rounded-r-md absolute flex items-center"},ju={class:"flex items-center"},Iu=["disabled"],Bu=ne(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)),Au=[Bu],Du=["disabled"],Ou=ne(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)),Lu=[Ou],Uu=ne(()=>e("div",{class:"flex items-center px-3 bg-gray-50 text-gray-500 border rounded-r border-l-0 border-gray-300"}," 天 ",-1)),Tu=ne(()=>e("p",{class:"text-sm text-gray-500 mt-1"},"必须是1-90天",-1)),zu=ne(()=>e("div",{class:"border-t font-medium text-sm text-gray-500 tracking-wider uppercase mt-6 mb-1 pt-6"},"设备设置 ",-1)),Hu=ne(()=>e("p",{class:"text-sm text-gray-500 mb-4"},"这些设置将应用于使用该密钥授权的所有设备",-1)),Vu={class:"flex justify-between"},Gu=ne(()=>e("div",null,[e("h4",{class:"font-medium mb-1"},"自熄"),e("p",{class:"text-sm text-gray-500"},"使用此密钥授权的设备会在离线时被自动从蜃境网络删除")],-1)),Ku={class:"ml-6"},qu=["disabled"],Fu={class:"flex justify-between mt-4"},Wu=ne(()=>e("div",null,[e("h4",{class:"font-medium mb-1"},"标签"),e("p",{class:"text-sm text-gray-500"},"使用该密钥授权的设备会自动添加标签。这同时会使该设备自身密钥过期被禁用 ")],-1)),Qu={class:"ml-6"},Xu=["disabled"],Yu={key:0,class:"rounded-md border border-stone-200 mt-4 mb-3 bg-stone-50 p-6"},Zu=ne(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"},"未分配标签")],-1)),Ju=[Zu],e0={key:1},t0=ne(()=>e("button",{class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit",disabled:"",type:"button"},[K("添加标签"),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1)),s0=[t0],n0={class:"flex mt-10 justify-end space-x-4"},o0={key:1},a0=ne(()=>e("p",{class:"text-gray-700 mb-3"},"关闭前请确保您已复制下面新生成的密钥，它之后将不会再次完整展示",-1)),l0={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0 mb-3 font-mono text-sm"},i0=["value"],r0={class:"flex overflow-hidden rounded-md py-3 px-4 gap-2 text-sm bg-stone-50 text-gray-600 border border-stone-200",role:"alert"},d0=fe('<div class="pt-px" data-v-73b20d8a><svg xmlns="http://www.w3.org/2000/svg" width="1.125em" height="1.125em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-73b20d8a><circle cx="12" cy="12" r="10" data-v-73b20d8a></circle><line x1="12" y1="16" x2="12" y2="12" data-v-73b20d8a></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-73b20d8a></line></svg></div>',1),c0={class:"w-full"},u0={class:"flex mt-10 justify-end space-x-4"},h0=ne(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),v0=[h0],f0={__name:"GenAuthKey",emits:["added-authkey"],setup(t,{emit:s}){Ae();const n=y(!1),a=y(!1),o=y(!1),c=y(!1),p=y(!1),d=y(90),r=y(!1),i=y(!0);function l(){Number(d.value)>1?r.value=!1:r.value=!0,Number(d.value)<90?i.value=!1:i.value=!0}function h(w){d.value=d.value.replace(/[^\d]+/g,"").replace(/^0+(\d)/,"$1"),w&&(d.value==""&&(d.value=1),Number(d.value)==0&&(d.value=1),Number(d.value)>90&&(d.value=90)),l()}function v(w){w==!0?d.value=Number(d.value)+1:d.value=Number(d.value)-1,l()}function _(){a.value=!0,axios.post("/admin/api/keys",{keyData:{type:"authkey",expirySeconds:Number(d.value*24*3600),authkey:{ephemeral:p.value,reusable:c.value,preauthorized:!1}}}).then(function(w){w.data.status=="success"?(P.value=w.data.data,s("added-authkey"),n.value=!0):console.log(w.data.status)}).catch(function(w){console.log(w)}).then(function(){a.value=!1})}const x=y("复制"),P=y({});function E(){navigator.clipboard.writeText(P.value.fullKey).then(function(){x.value="已复制!",setTimeout(()=>{x.value="复制"},3e3)})}return(w,b)=>(u(),f("div",{onClick:b[11]||(b[11]=re(I=>w.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",bu,[_u,n.value?$("",!0):(u(),f("form",xu,[e("div",yu,[wu,e("div",ku,[ue(e("input",{disabled:a.value,"onUpdate:modelValue":b[0]||(b[0]=I=>c.value=I),type:"checkbox",class:"toggle"},null,8,$u),[[Ue,c.value]])])]),e("div",Cu,[Su,Eu,e("div",Pu,[e("div",Ru,[ue(e("input",{disabled:a.value,"onUpdate:modelValue":b[1]||(b[1]=I=>d.value=I),onInput:b[2]||(b[2]=I=>h(!1)),onBlur:b[3]||(b[3]=I=>h(!0)),class:"input z-30 border focus:outline-blue-500/60 hover:border border-stone-200 hover:border-stone-400 rounded-r-none h-9 min-h-fit",inputmode:"numeric",pattern:"[0-9]*",id:"key-expiry-duration",tabindex:"0"},null,40,Mu),[[ot,d.value]]),e("div",Nu,[e("div",ju,[e("button",{onClick:b[4]||(b[4]=I=>v(!1)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:r.value,type:"button",tabindex:"-1"},Au,8,Iu),e("button",{onClick:b[5]||(b[5]=I=>v(!0)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:i.value,type:"button",tabindex:"-1"},Lu,8,Du)])])]),Uu]),Tu]),zu,Hu,e("div",Vu,[Gu,e("div",Ku,[ue(e("input",{disabled:a.value,"onUpdate:modelValue":b[6]||(b[6]=I=>p.value=I),type:"checkbox",class:"toggle"},null,8,qu),[[Ue,p.value]])])]),e("div",Fu,[Wu,e("div",Qu,[ue(e("input",{disabled:a.value,"onUpdate:modelValue":b[7]||(b[7]=I=>o.value=I),type:"checkbox",class:"toggle"},null,8,Xu),[[Ue,o.value]])])]),o.value?(u(),f("div",Yu,Ju)):$("",!0),o.value?(u(),f("span",e0,s0)):$("",!0),e("footer",n0,[e("button",{onClick:b[8]||(b[8]=re(I=>w.$emit("close"),["self"])),class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit"},"取消"),e("button",{onClick:_,class:"btn border-0 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-600/60 text-white disabled:text-white/60 h-9 min-h-fit"},"生成密钥")])])),n.value?(u(),f("form",o0,[a0,e("div",l0,[e("input",{onclick:"this.select()",class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:P.value.fullKey},null,8,i0),e("button",{onClick:E,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},C(x.value),1)]),e("div",r0,[d0,e("div",c0,"该密钥将在 "+C(P.value.expiry.split(" ")[0])+" 过期，之后您要想继续使用授权密钥需要重新生成",1)]),e("footer",u0,[e("button",{onClick:b[9]||(b[9]=re(I=>w.$emit("close"),["self"])),class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit"},"完成")])])):$("",!0),e("button",{onClick:b[10]||(b[10]=I=>w.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},v0)])]))}},m0=je(f0,[["__scopeId","data-v-73b20d8a"]]),p0={class:"flex-1"},g0=fe('<div class="text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"><h1 class="mr-2" tabindex="-1">密钥管理</h1></div><div class="text-gray-600 mt-3 mb-10"><p>查看和管理您的<strong>授权密钥</strong>和<strong>API密钥</strong></p><p class="mt-2">您个人设备的私钥<strong>不</strong>在此管理，它们永远是<strong>私有</strong>并存在于您的设备上，<strong>不</strong>向蜃境披露</p></div>',2),b0={class:"mt-10"},_0=e("div",null,[e("h3",{class:"text-xl font-semibold tracking-tight"},"授权密钥"),e("p",{class:"text-gray-600"},"用于无需交互式登录即可实现设备鉴别接入 ")],-1),x0={key:0,class:"rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"},y0=e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"},"你还没有任何密钥")],-1),w0=[y0],k0={key:1,class:"block border box-border rounded-lg mt-4 tb"},$0=e("thead",{class:"block font-semibold tracking-wider text-left text-xs text-stone-500"},[e("tr",{class:"flex border-b border-stone-200 pl-8 pr-4 lg:px-4"},[e("th",{class:"w-36 shrink-0 py-2"},"ID"),e("th",{class:"hidden shrink-0 py-2 lg:block w-40"},"创建日期"),e("th",{class:"hidden shrink-0 py-2 lg:block w-40"},"失效日期"),e("th",{class:"flex-1 shrink-0 py-2 min-w-0"},"类型"),e("th",{class:"w-20 shrink-0 py-2 text-right text-red-400 cursor-pointer pointer-events-auto hover:text-red-600"},[e("span",{class:"sr-only"},"注销密钥")])])],-1),C0={class:"block"},S0=["onClick"],E0={class:"flex shrink-0 py-2 w-36"},P0={class:"w-8 -ml-8 lg:hidden"},R0={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400 w-4 mx-2 group-hover:text-gray-500"},M0=["points"],N0={class:"text-sm truncate leading-6 font-semibold"},j0={class:"hidden shrink-0 py-2 lg:block w-40"},I0={"data-state":"closed"},B0={class:"cursor-default"},A0={class:"hidden shrink-0 py-2 lg:block w-40"},D0={"data-state":"closed"},O0={class:"cursor-default"},L0={class:"flex-1 shrink-0 py-2 min-w-0"},U0={class:"w-20 shrink-0 py-2 text-right text-red-400 cursor-pointer pointer-events-auto hover:text-red-600"},T0=["onClick"],z0={key:0,class:"border-b-0 flex border-stone-200"},H0={class:"shrink-0 p-0"},V0={class:"flex-col px-8 pt-0.5 pb-2 lg:hidden"},G0={class:"flex items-center lg:hidden"},K0=e("p",{class:"w-20 text-sm text-gray-500"},"创建日期",-1),q0={class:"text-sm"},F0={"data-state":"closed"},W0={class:"cursor-default"},Q0={class:"flex items-center lg:hidden"},X0=e("p",{class:"w-20 text-sm text-gray-500"},"失效日期",-1),Y0={class:"text-sm"},Z0={"data-state":"closed"},J0={class:"cursor-default"},eh={class:"flex justify-between items-center mt-16"},th=e("div",null,[e("h3",{class:"text-xl font-semibold tracking-tight"},"API 密钥"),e("p",{class:"text-gray-600"},"API 密钥用于访问蜃境API.")],-1),sh=["disabled"],nh=e("div",{class:"rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"},[e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"},"你还没有任何密钥")])],-1),oh={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},ah=e("header",{class:"flex items-center justify-between space-x-4 mb-5 mr-8"},[e("div",{class:"font-semibold text-lg truncate"},"注销")],-1),lh=["onSubmit"],ih=e("p",{class:"text-gray-700 mb-4"},[K("注销此密钥"),e("strong",null,"并不会"),K("注销已使用此密钥进行授权的设备，但将阻止之后继续使用此密钥注册新设备。")],-1),rh={class:"flex mt-10 justify-end space-x-4"},dh=e("button",{class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit",type:"submit"},"注销密钥",-1),ch=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),uh=[ch],hh={__name:"Keys",setup(t){const s=y(!0),n=y(!1);function a(){n.value=!0}const o=y([]);function c(){axios.get("/admin/api/keys").then(function(l){l.data.status=="success"&&(o.value=l.data.data.authKeys)}).catch(function(l){console.log(l)})}be(()=>{axios.get("/admin/api/keys").then(function(l){l.data.status=="success"&&(o.value=l.data.data.authKeys)}).catch(function(l){console.log(l)})});const p=y(""),d=y(!1);function r(l){p.value=l,d.value=!0}function i(){axios.delete("/admin/api/keys/"+p.value,{}).then(function(l){if(l.data.status=="success"){var h=[];for(var v in o.value)o.value[v].id!=l.data.data&&h.push(o.value[v]);o.value=h,d.value=!1}else console.log(l.data.status)}).catch(function(l){console.log(l)})}return(l,h)=>(u(),f(X,null,[e("div",p0,[g0,e("div",b0,[e("div",{class:"flex justify-between items-center mt-16"},[_0,e("button",{onClick:a,class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"}," 生成授权密钥…")]),!o.value||o.value.length==0?(u(),f("div",x0,w0)):$("",!0),o.value&&o.value.length>0?(u(),f("table",k0,[$0,e("tbody",C0,[(u(!0),f(X,null,ie(o.value,(v,_)=>(u(),f(X,null,[e("tr",{onClick:x=>v.expand=!v.expand,class:ae([{"border-t":_>0},"group flex border-stone-200 cursor-pointer hover:bg-gray-50 pl-8 pr-4 lg:px-4 lg:cursor-auto border-b-0"])},[e("td",E0,[e("div",P0,[(u(),f("svg",R0,[e("polyline",{points:v.expand?"6 9 12 15 18 9":"9 18 15 12 9 6"},null,8,M0)]))]),e("pre",N0,[e("code",null,C(v.id),1)])]),e("td",j0,[e("span",I0,[e("span",B0,C(v.created.split(" ")[0]),1)])]),e("td",A0,[e("span",D0,[e("span",O0,C(v.expiry.split(" ")[0]),1)])]),e("td",L0,C((v.authkey.reusable==!0?"可重用":"一次性")+(v.authkey.ephemeral==!0?",自熄":"")),1),e("td",U0,[e("button",{onClick:x=>r(v.id),type:"button"},"注销…",8,T0)])],10,S0),v.expand?(u(),f("tr",z0,[e("td",H0,[e("div",V0,[e("div",G0,[K0,e("p",q0,[e("span",F0,[e("span",W0,C(v.created.split(" ")[0]),1)])])]),e("div",Q0,[X0,e("p",Y0,[e("span",Z0,[e("span",J0,C(v.expiry.split(" ")[0]),1)])])])])])])):$("",!0)],64))),256))])])):$("",!0),e("div",eh,[th,e("button",{disabled:s.value,class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"}," 生成 API 密钥…",8,sh)]),nh])]),(u(),Q(he,{to:"body"},[n.value?(u(),Q(m0,{key:0,onAddedAuthkey:c,onClose:h[0]||(h[0]=v=>n.value=!1)})):$("",!0),d.value?(u(),f("div",{key:1,onClick:h[3]||(h[3]=re(v=>d.value=!1,["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",oh,[ah,e("form",{onSubmit:re(i,["prevent"])},[ih,e("footer",rh,[e("button",{onClick:h[1]||(h[1]=v=>d.value=!1),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消"),dh])],40,lh),e("button",{onClick:h[2]||(h[2]=v=>d.value=!1),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},uh)])])):$("",!0)]))],64))}},vh={class:"container mx-auto pb-20 md:pb-24"},fh={class:"md:flex md:mt-16"},mh={class:"mb-10 md:mr-20 lg:mr-40"},ph={class:"hidden md:block"},gh={class:"flex flex-row mb-12"},bh=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),_h={class:"ml-4"},xh=e("h2",{class:"text-gray-500 font-medium"},"网络配置",-1),yh={class:"flex flex-row mb-12"},wh=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),kh={class:"ml-4"},$h=e("h2",{class:"text-gray-500 font-medium"},"个人设置",-1),Ch={class:"select-with-arrow md:hidden mb-4"},Sh=fe('<optgroup label="网络配置"><option value="features">敬请期待</option><option value="general">通用</option><option value="webhooks">敬请期待</option><option value="billing">敬请期待</option><option value="contact-preferences">敬请期待</option></optgroup><optgroup label="个人设置"><option value="keys">密钥管理</option></optgroup>',2),Eh=[Sh],Ph={__name:"Settings",setup(t){const s={general:Le,features:Le,webhooks:Le,billing:Le,"contact-preferences":Le,keys:hh},n=dt(),a=rt(),o=y("");function c(p){a.push("/settings/"+p.target.value)}return Ys((p,d)=>{o.value=p.params.setpart}),be(()=>{o.value=n.params.setpart}),(p,d)=>{const r=He("router-link");return u(),f("main",vh,[e("section",fh,[e("div",mh,[e("div",ph,[e("div",gh,[bh,e("div",_h,[xh,oe(r,{class:ae(["flex font-medium mt-4",{"text-blue-600":o.value=="general","text-gray-700":o.value!="general"}]),to:"/settings/general"},{default:ce(()=>[K("通用")]),_:1},8,["class"]),oe(r,{class:ae(["flex font-medium mt-4",{"text-blue-600":o.value=="features","text-gray-700":o.value!="features"}]),to:"/settings/features"},{default:ce(()=>[K("敬请期待")]),_:1},8,["class"]),oe(r,{class:ae(["flex font-medium mt-4",{"text-blue-600":o.value=="webhooks","text-gray-700":o.value!="webhooks"}]),to:"/settings/webhooks"},{default:ce(()=>[K("敬请期待")]),_:1},8,["class"]),oe(r,{class:ae(["flex font-medium mt-4",{"text-blue-600":o.value=="billing","text-gray-700":o.value!="billing"}]),to:"/settings/billing"},{default:ce(()=>[K("敬请期待")]),_:1},8,["class"]),oe(r,{class:ae(["flex font-medium mt-4",{"text-blue-600":o.value=="contact-preferences","text-gray-700":o.value!="contact-preferences"}]),to:"/settings/contact-preferences"},{default:ce(()=>[K("敬请期待")]),_:1},8,["class"])])]),e("div",yh,[wh,e("div",kh,[$h,oe(r,{class:ae(["flex font-medium mt-4",{"text-blue-600":o.value=="keys","text-gray-700":o.value!="keys"}]),to:"/settings/keys"},{default:ce(()=>[K("密钥管理")]),_:1},8,["class"])])])]),e("div",Ch,[ue(e("select",{"onUpdate:modelValue":d[0]||(d[0]=i=>o.value=i),onChange:c,class:"select select-bordered w-full text-lg"},Eh,544),[[Zt,o.value,void 0,{lazy:!0}]])])]),(u(),Q(Jt(s[o.value])))])])}}},Rh=[{path:"/",redirect:"/machines"},{path:"/machines",component:Sl},{path:"/machines/:mip",component:Ed},{path:"/dns",component:Tc},{path:"/settings",redirect:"/settings/general"},{path:"/settings/:setpart",component:Ph}],Mh=an({history:xs(),routes:Rh}),Qe=es(Jn);Qe.config.errorHandler=t=>{};Qe.use(ts);Qe.use(Mh);Qe.mount("#app");
