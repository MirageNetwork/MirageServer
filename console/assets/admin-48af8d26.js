import{s as Wt,u as K,d as Q,r as Et,i as pe,n as we,e as Pt,f as Qt,g as Xt,h as Rt,j as Mt,p as Xe,k as x,w as Re,l as ce,o as u,c as m,m as e,t as $,q as Nt,v as jt,x as ge,y as V,z as k,A as W,T as fe,B as ae,C as de,F as X,D as He,E as ne,G as he,_ as je,H as Ue,I as nt,J as Ie,K as Be,L as ie,a as be,M as Yt,N as Zt,b as Jt}from"./plugin-vueexport-helper-eb5ad5eb.js";import{u as Ae,_ as ot,p as es}from"./Toast-0cb68a77.js";/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Pe=typeof window<"u";function ts(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const z=Object.assign;function Ye(t,s){const n={};for(const l in s){const a=s[l];n[l]=ue(a)?a.map(t):t(a)}return n}const Te=()=>{},ue=Array.isArray,ss=/\/$/,ns=t=>t.replace(ss,"");function Ze(t,s,n="/"){let l,a={},h="",f="";const d=s.indexOf("#");let r=s.indexOf("?");return d<r&&d>=0&&(r=-1),r>-1&&(l=s.slice(0,r),h=s.slice(r+1,d>-1?d:s.length),a=t(h)),d>-1&&(l=l||s.slice(0,d),f=s.slice(d,s.length)),l=is(l??s,n),{fullPath:l+(h&&"?")+h+f,path:l,query:a,hash:f}}function os(t,s){const n=s.query?t(s.query):"";return s.path+(n&&"?")+n+(s.hash||"")}function ut(t,s){return!s||!t.toLowerCase().startsWith(s.toLowerCase())?t:t.slice(s.length)||"/"}function as(t,s,n){const l=s.matched.length-1,a=n.matched.length-1;return l>-1&&l===a&&Me(s.matched[l],n.matched[a])&&It(s.params,n.params)&&t(s.query)===t(n.query)&&s.hash===n.hash}function Me(t,s){return(t.aliasOf||t)===(s.aliasOf||s)}function It(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(!ls(t[n],s[n]))return!1;return!0}function ls(t,s){return ue(t)?ht(t,s):ue(s)?ht(s,t):t===s}function ht(t,s){return ue(s)?t.length===s.length&&t.every((n,l)=>n===s[l]):t.length===1&&t[0]===s}function is(t,s){if(t.startsWith("/"))return t;if(!t)return s;const n=s.split("/"),l=t.split("/");let a=n.length-1,h,f;for(h=0;h<l.length;h++)if(f=l[h],f!==".")if(f==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+l.slice(h-(h===l.length?1:0)).join("/")}var Ve;(function(t){t.pop="pop",t.push="push"})(Ve||(Ve={}));var ze;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ze||(ze={}));function rs(t){if(!t)if(Pe){const s=document.querySelector("base");t=s&&s.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ns(t)}const ds=/^[^#]+#/;function cs(t,s){return t.replace(ds,"#")+s}function us(t,s){const n=document.documentElement.getBoundingClientRect(),l=t.getBoundingClientRect();return{behavior:s.behavior,left:l.left-n.left-(s.left||0),top:l.top-n.top-(s.top||0)}}const Ke=()=>({left:window.pageXOffset,top:window.pageYOffset});function hs(t){let s;if("el"in t){const n=t.el,l=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?l?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;s=us(a,t)}else s=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(s):window.scrollTo(s.left!=null?s.left:window.pageXOffset,s.top!=null?s.top:window.pageYOffset)}function vt(t,s){return(history.state?history.state.position-s:-1)+t}const et=new Map;function vs(t,s){et.set(t,s)}function ms(t){const s=et.get(t);return et.delete(t),s}let fs=()=>location.protocol+"//"+location.host;function Bt(t,s){const{pathname:n,search:l,hash:a}=s,h=t.indexOf("#");if(h>-1){let d=a.includes(t.slice(h))?t.slice(h).length:1,r=a.slice(d);return r[0]!=="/"&&(r="/"+r),ut(r,"")}return ut(n,t)+l+a}function ps(t,s,n,l){let a=[],h=[],f=null;const d=({state:v})=>{const _=Bt(t,location),y=n.value,j=s.value;let I=0;if(v){if(n.value=_,s.value=v,f&&f===y){f=null;return}I=j?v.position-j.position:0}else l(_);a.forEach(S=>{S(n.value,y,{delta:I,type:Ve.pop,direction:I?I>0?ze.forward:ze.back:ze.unknown})})};function r(){f=n.value}function i(v){a.push(v);const _=()=>{const y=a.indexOf(v);y>-1&&a.splice(y,1)};return h.push(_),_}function o(){const{history:v}=window;v.state&&v.replaceState(z({},v.state,{scroll:Ke()}),"")}function c(){for(const v of h)v();h=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",o)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",o),{pauseListeners:r,listen:i,destroy:c}}function mt(t,s,n,l=!1,a=!1){return{back:t,current:s,forward:n,replaced:l,position:window.history.length,scroll:a?Ke():null}}function gs(t){const{history:s,location:n}=window,l={value:Bt(t,n)},a={value:s.state};a.value||h(l.value,{back:null,current:l.value,forward:null,position:s.length-1,replaced:!0,scroll:null},!0);function h(r,i,o){const c=t.indexOf("#"),v=c>-1?(n.host&&document.querySelector("base")?t:t.slice(c))+r:fs()+t+r;try{s[o?"replaceState":"pushState"](i,"",v),a.value=i}catch(_){console.error(_),n[o?"replace":"assign"](v)}}function f(r,i){const o=z({},s.state,mt(a.value.back,r,a.value.forward,!0),i,{position:a.value.position});h(r,o,!0),l.value=r}function d(r,i){const o=z({},a.value,s.state,{forward:r,scroll:Ke()});h(o.current,o,!0);const c=z({},mt(l.value,r,null),{position:o.position+1},i);h(r,c,!1),l.value=r}return{location:l,state:a,push:d,replace:f}}function bs(t){t=rs(t);const s=gs(t),n=ps(t,s.state,s.location,s.replace);function l(h,f=!0){f||n.pauseListeners(),history.go(h)}const a=z({location:"",base:t,go:l,createHref:cs.bind(null,t)},s,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>s.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>s.state.value}),a}function _s(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),bs(t)}function xs(t){return typeof t=="string"||t&&typeof t=="object"}function At(t){return typeof t=="string"||typeof t=="symbol"}const _e={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ot=Symbol("");var ft;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(ft||(ft={}));function Ne(t,s){return z(new Error,{type:t,[Ot]:!0},s)}function me(t,s){return t instanceof Error&&Ot in t&&(s==null||!!(t.type&s))}const pt="[^/]+?",ys={sensitive:!1,strict:!1,start:!0,end:!0},ws=/[.+*?^${}()[\]/\\]/g;function ks(t,s){const n=z({},ys,s),l=[];let a=n.start?"^":"";const h=[];for(const i of t){const o=i.length?[]:[90];n.strict&&!i.length&&(a+="/");for(let c=0;c<i.length;c++){const v=i[c];let _=40+(n.sensitive?.25:0);if(v.type===0)c||(a+="/"),a+=v.value.replace(ws,"\\$&"),_+=40;else if(v.type===1){const{value:y,repeatable:j,optional:I,regexp:S}=v;h.push({name:y,repeatable:j,optional:I});const b=S||pt;if(b!==pt){_+=10;try{new RegExp(`(${b})`)}catch(p){throw new Error(`Invalid custom RegExp for param "${y}" (${b}): `+p.message)}}let N=j?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;c||(N=I&&i.length<2?`(?:/${N})`:"/"+N),I&&(N+="?"),a+=N,_+=20,I&&(_+=-8),j&&(_+=-20),b===".*"&&(_+=-50)}o.push(_)}l.push(o)}if(n.strict&&n.end){const i=l.length-1;l[i][l[i].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&(a+="(?:/|$)");const f=new RegExp(a,n.sensitive?"":"i");function d(i){const o=i.match(f),c={};if(!o)return null;for(let v=1;v<o.length;v++){const _=o[v]||"",y=h[v-1];c[y.name]=_&&y.repeatable?_.split("/"):_}return c}function r(i){let o="",c=!1;for(const v of t){(!c||!o.endsWith("/"))&&(o+="/"),c=!1;for(const _ of v)if(_.type===0)o+=_.value;else if(_.type===1){const{value:y,repeatable:j,optional:I}=_,S=y in i?i[y]:"";if(ue(S)&&!j)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const b=ue(S)?S.join("/"):S;if(!b)if(I)v.length<2&&(o.endsWith("/")?o=o.slice(0,-1):c=!0);else throw new Error(`Missing required param "${y}"`);o+=b}}return o||"/"}return{re:f,score:l,keys:h,parse:d,stringify:r}}function $s(t,s){let n=0;for(;n<t.length&&n<s.length;){const l=s[n]-t[n];if(l)return l;n++}return t.length<s.length?t.length===1&&t[0]===40+40?-1:1:t.length>s.length?s.length===1&&s[0]===40+40?1:-1:0}function Cs(t,s){let n=0;const l=t.score,a=s.score;for(;n<l.length&&n<a.length;){const h=$s(l[n],a[n]);if(h)return h;n++}if(Math.abs(a.length-l.length)===1){if(gt(l))return 1;if(gt(a))return-1}return a.length-l.length}function gt(t){const s=t[t.length-1];return t.length>0&&s[s.length-1]<0}const Ss={type:0,value:""},Es=/[a-zA-Z0-9_]/;function Ps(t){if(!t)return[[]];if(t==="/")return[[Ss]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function s(_){throw new Error(`ERR (${n})/"${i}": ${_}`)}let n=0,l=n;const a=[];let h;function f(){h&&a.push(h),h=[]}let d=0,r,i="",o="";function c(){i&&(n===0?h.push({type:0,value:i}):n===1||n===2||n===3?(h.length>1&&(r==="*"||r==="+")&&s(`A repeatable param (${i}) must be alone in its segment. eg: '/:ids+.`),h.push({type:1,value:i,regexp:o,repeatable:r==="*"||r==="+",optional:r==="*"||r==="?"})):s("Invalid state to consume buffer"),i="")}function v(){i+=r}for(;d<t.length;){if(r=t[d++],r==="\\"&&n!==2){l=n,n=4;continue}switch(n){case 0:r==="/"?(i&&c(),f()):r===":"?(c(),n=1):v();break;case 4:v(),n=l;break;case 1:r==="("?n=2:Es.test(r)?v():(c(),n=0,r!=="*"&&r!=="?"&&r!=="+"&&d--);break;case 2:r===")"?o[o.length-1]=="\\"?o=o.slice(0,-1)+r:n=3:o+=r;break;case 3:c(),n=0,r!=="*"&&r!=="?"&&r!=="+"&&d--,o="";break;default:s("Unknown state");break}}return n===2&&s(`Unfinished custom RegExp for param "${i}"`),c(),f(),a}function Rs(t,s,n){const l=ks(Ps(t.path),n),a=z(l,{record:t,parent:s,children:[],alias:[]});return s&&!a.record.aliasOf==!s.record.aliasOf&&s.children.push(a),a}function Ms(t,s){const n=[],l=new Map;s=xt({strict:!1,end:!0,sensitive:!1},s);function a(o){return l.get(o)}function h(o,c,v){const _=!v,y=Ns(o);y.aliasOf=v&&v.record;const j=xt(s,o),I=[y];if("alias"in o){const N=typeof o.alias=="string"?[o.alias]:o.alias;for(const p of N)I.push(z({},y,{components:v?v.record.components:y.components,path:p,aliasOf:v?v.record:y}))}let S,b;for(const N of I){const{path:p}=N;if(c&&p[0]!=="/"){const w=c.record.path,H=w[w.length-1]==="/"?"":"/";N.path=c.record.path+(p&&H+p)}if(S=Rs(N,c,j),v?v.alias.push(S):(b=b||S,b!==S&&b.alias.push(S),_&&o.name&&!_t(S)&&f(o.name)),y.children){const w=y.children;for(let H=0;H<w.length;H++)h(w[H],S,v&&v.children[H])}v=v||S,(S.record.components&&Object.keys(S.record.components).length||S.record.name||S.record.redirect)&&r(S)}return b?()=>{f(b)}:Te}function f(o){if(At(o)){const c=l.get(o);c&&(l.delete(o),n.splice(n.indexOf(c),1),c.children.forEach(f),c.alias.forEach(f))}else{const c=n.indexOf(o);c>-1&&(n.splice(c,1),o.record.name&&l.delete(o.record.name),o.children.forEach(f),o.alias.forEach(f))}}function d(){return n}function r(o){let c=0;for(;c<n.length&&Cs(o,n[c])>=0&&(o.record.path!==n[c].record.path||!Dt(o,n[c]));)c++;n.splice(c,0,o),o.record.name&&!_t(o)&&l.set(o.record.name,o)}function i(o,c){let v,_={},y,j;if("name"in o&&o.name){if(v=l.get(o.name),!v)throw Ne(1,{location:o});j=v.record.name,_=z(bt(c.params,v.keys.filter(b=>!b.optional).map(b=>b.name)),o.params&&bt(o.params,v.keys.map(b=>b.name))),y=v.stringify(_)}else if("path"in o)y=o.path,v=n.find(b=>b.re.test(y)),v&&(_=v.parse(y),j=v.record.name);else{if(v=c.name?l.get(c.name):n.find(b=>b.re.test(c.path)),!v)throw Ne(1,{location:o,currentLocation:c});j=v.record.name,_=z({},c.params,o.params),y=v.stringify(_)}const I=[];let S=v;for(;S;)I.unshift(S.record),S=S.parent;return{name:j,path:y,params:_,matched:I,meta:Is(I)}}return t.forEach(o=>h(o)),{addRoute:h,resolve:i,removeRoute:f,getRoutes:d,getRecordMatcher:a}}function bt(t,s){const n={};for(const l of s)l in t&&(n[l]=t[l]);return n}function Ns(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:js(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function js(t){const s={},n=t.props||!1;if("component"in t)s.default=n;else for(const l in t.components)s[l]=typeof n=="boolean"?n:n[l];return s}function _t(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Is(t){return t.reduce((s,n)=>z(s,n.meta),{})}function xt(t,s){const n={};for(const l in t)n[l]=l in s?s[l]:t[l];return n}function Dt(t,s){return s.children.some(n=>n===t||Dt(t,n))}const Lt=/#/g,Bs=/&/g,As=/\//g,Os=/=/g,Ds=/\?/g,Ut=/\+/g,Ls=/%5B/g,Us=/%5D/g,Tt=/%5E/g,Ts=/%60/g,zt=/%7B/g,zs=/%7C/g,Ht=/%7D/g,Hs=/%20/g;function at(t){return encodeURI(""+t).replace(zs,"|").replace(Ls,"[").replace(Us,"]")}function Vs(t){return at(t).replace(zt,"{").replace(Ht,"}").replace(Tt,"^")}function tt(t){return at(t).replace(Ut,"%2B").replace(Hs,"+").replace(Lt,"%23").replace(Bs,"%26").replace(Ts,"`").replace(zt,"{").replace(Ht,"}").replace(Tt,"^")}function Gs(t){return tt(t).replace(Os,"%3D")}function Ks(t){return at(t).replace(Lt,"%23").replace(Ds,"%3F")}function qs(t){return t==null?"":Ks(t).replace(As,"%2F")}function Ge(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Fs(t){const s={};if(t===""||t==="?")return s;const l=(t[0]==="?"?t.slice(1):t).split("&");for(let a=0;a<l.length;++a){const h=l[a].replace(Ut," "),f=h.indexOf("="),d=Ge(f<0?h:h.slice(0,f)),r=f<0?null:Ge(h.slice(f+1));if(d in s){let i=s[d];ue(i)||(i=s[d]=[i]),i.push(r)}else s[d]=r}return s}function yt(t){let s="";for(let n in t){const l=t[n];if(n=Gs(n),l==null){l!==void 0&&(s+=(s.length?"&":"")+n);continue}(ue(l)?l.map(h=>h&&tt(h)):[l&&tt(l)]).forEach(h=>{h!==void 0&&(s+=(s.length?"&":"")+n,h!=null&&(s+="="+h))})}return s}function Ws(t){const s={};for(const n in t){const l=t[n];l!==void 0&&(s[n]=ue(l)?l.map(a=>a==null?null:""+a):l==null?l:""+l)}return s}const lt=Symbol(""),wt=Symbol(""),qe=Symbol(""),it=Symbol(""),st=Symbol("");function De(){let t=[];function s(l){return t.push(l),()=>{const a=t.indexOf(l);a>-1&&t.splice(a,1)}}function n(){t=[]}return{add:s,list:()=>t,reset:n}}function Vt(t,s,n){const l=()=>{t[s].delete(n)};Pt(l),Qt(l),Xt(()=>{t[s].add(n)}),t[s].add(n)}function Qs(t){const s=pe(lt,{}).value;s&&Vt(s,"leaveGuards",t)}function Xs(t){const s=pe(lt,{}).value;s&&Vt(s,"updateGuards",t)}function xe(t,s,n,l,a){const h=l&&(l.enterCallbacks[a]=l.enterCallbacks[a]||[]);return()=>new Promise((f,d)=>{const r=c=>{c===!1?d(Ne(4,{from:n,to:s})):c instanceof Error?d(c):xs(c)?d(Ne(2,{from:s,to:c})):(h&&l.enterCallbacks[a]===h&&typeof c=="function"&&h.push(c),f())},i=t.call(l&&l.instances[a],s,n,r);let o=Promise.resolve(i);t.length<3&&(o=o.then(r)),o.catch(c=>d(c))})}function Je(t,s,n,l){const a=[];for(const h of t)for(const f in h.components){let d=h.components[f];if(!(s!=="beforeRouteEnter"&&!h.instances[f]))if(Ys(d)){const i=(d.__vccOpts||d)[s];i&&a.push(xe(i,n,l,h,f))}else{let r=d();a.push(()=>r.then(i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${f}" at "${h.path}"`));const o=ts(i)?i.default:i;h.components[f]=o;const v=(o.__vccOpts||o)[s];return v&&xe(v,n,l,h,f)()}))}}return a}function Ys(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function kt(t){const s=pe(qe),n=pe(it),l=Q(()=>s.resolve(K(t.to))),a=Q(()=>{const{matched:r}=l.value,{length:i}=r,o=r[i-1],c=n.matched;if(!o||!c.length)return-1;const v=c.findIndex(Me.bind(null,o));if(v>-1)return v;const _=$t(r[i-2]);return i>1&&$t(o)===_&&c[c.length-1].path!==_?c.findIndex(Me.bind(null,r[i-2])):v}),h=Q(()=>a.value>-1&&tn(n.params,l.value.params)),f=Q(()=>a.value>-1&&a.value===n.matched.length-1&&It(n.params,l.value.params));function d(r={}){return en(r)?s[K(t.replace)?"replace":"push"](K(t.to)).catch(Te):Promise.resolve()}return{route:l,href:Q(()=>l.value.href),isActive:h,isExactActive:f,navigate:d}}const Zs=Rt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:kt,setup(t,{slots:s}){const n=Et(kt(t)),{options:l}=pe(qe),a=Q(()=>({[Ct(t.activeClass,l.linkActiveClass,"router-link-active")]:n.isActive,[Ct(t.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const h=s.default&&s.default(n);return t.custom?h:Mt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},h)}}}),Js=Zs;function en(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const s=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return t.preventDefault&&t.preventDefault(),!0}}function tn(t,s){for(const n in s){const l=s[n],a=t[n];if(typeof l=="string"){if(l!==a)return!1}else if(!ue(a)||a.length!==l.length||l.some((h,f)=>h!==a[f]))return!1}return!0}function $t(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ct=(t,s,n)=>t??s??n,sn=Rt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:s,slots:n}){const l=pe(st),a=Q(()=>t.route||l.value),h=pe(wt,0),f=Q(()=>{let i=K(h);const{matched:o}=a.value;let c;for(;(c=o[i])&&!c.components;)i++;return i}),d=Q(()=>a.value.matched[f.value]);Xe(wt,Q(()=>f.value+1)),Xe(lt,d),Xe(st,a);const r=x();return Re(()=>[r.value,d.value,t.name],([i,o,c],[v,_,y])=>{o&&(o.instances[c]=i,_&&_!==o&&i&&i===v&&(o.leaveGuards.size||(o.leaveGuards=_.leaveGuards),o.updateGuards.size||(o.updateGuards=_.updateGuards))),i&&o&&(!_||!Me(o,_)||!v)&&(o.enterCallbacks[c]||[]).forEach(j=>j(i))},{flush:"post"}),()=>{const i=a.value,o=t.name,c=d.value,v=c&&c.components[o];if(!v)return St(n.default,{Component:v,route:i});const _=c.props[o],y=_?_===!0?i.params:typeof _=="function"?_(i):_:null,I=Mt(v,z({},y,s,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(c.instances[o]=null)},ref:r}));return St(n.default,{Component:I,route:i})||I}}});function St(t,s){if(!t)return null;const n=t(s);return n.length===1?n[0]:n}const nn=sn;function on(t){const s=Ms(t.routes,t),n=t.parseQuery||Fs,l=t.stringifyQuery||yt,a=t.history,h=De(),f=De(),d=De(),r=Wt(_e);let i=_e;Pe&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const o=Ye.bind(null,g=>""+g),c=Ye.bind(null,qs),v=Ye.bind(null,Ge);function _(g,E){let C,R;return At(g)?(C=s.getRecordMatcher(g),R=E):R=g,s.addRoute(R,C)}function y(g){const E=s.getRecordMatcher(g);E&&s.removeRoute(E)}function j(){return s.getRoutes().map(g=>g.record)}function I(g){return!!s.getRecordMatcher(g)}function S(g,E){if(E=z({},E||r.value),typeof g=="string"){const O=Ze(n,g,E.path),J=s.resolve({path:O.path},E),Oe=a.createHref(O.fullPath);return z(O,J,{params:v(J.params),hash:Ge(O.hash),redirectedFrom:void 0,href:Oe})}let C;if("path"in g)C=z({},g,{path:Ze(n,g.path,E.path).path});else{const O=z({},g.params);for(const J in O)O[J]==null&&delete O[J];C=z({},g,{params:c(g.params)}),E.params=c(E.params)}const R=s.resolve(C,E),G=g.hash||"";R.params=o(v(R.params));const Z=os(l,z({},g,{hash:Vs(G),path:R.path})),L=a.createHref(Z);return z({fullPath:Z,hash:G,query:l===yt?Ws(g.query):g.query||{}},R,{redirectedFrom:void 0,href:L})}function b(g){return typeof g=="string"?Ze(n,g,r.value.path):z({},g)}function N(g,E){if(i!==g)return Ne(8,{from:E,to:g})}function p(g){return te(g)}function w(g){return p(z(b(g),{replace:!0}))}function H(g){const E=g.matched[g.matched.length-1];if(E&&E.redirect){const{redirect:C}=E;let R=typeof C=="function"?C(g):C;return typeof R=="string"&&(R=R.includes("?")||R.includes("#")?R=b(R):{path:R},R.params={}),z({query:g.query,hash:g.hash,params:"path"in R?{}:g.params},R)}}function te(g,E){const C=i=S(g),R=r.value,G=g.state,Z=g.force,L=g.replace===!0,O=H(C);if(O)return te(z(b(O),{state:typeof O=="object"?z({},G,O.state):G,force:Z,replace:L}),E||C);const J=C;J.redirectedFrom=E;let Oe;return!Z&&as(l,R,C)&&(Oe=Ne(16,{to:J,from:R}),P(R,R,!0,!1)),(Oe?Promise.resolve(Oe):$e(J,R)).catch(oe=>me(oe)?me(oe,2)?oe:q(oe):D(oe,J,R)).then(oe=>{if(oe){if(me(oe,2))return te(z({replace:L},b(oe.to),{state:typeof oe.to=="object"?z({},G,oe.to.state):G,force:Z}),E||J)}else oe=Se(J,R,!0,L,G);return Ce(J,R,oe),oe})}function ke(g,E){const C=N(g,E);return C?Promise.reject(C):Promise.resolve()}function $e(g,E){let C;const[R,G,Z]=an(g,E);C=Je(R.reverse(),"beforeRouteLeave",g,E);for(const O of R)O.leaveGuards.forEach(J=>{C.push(xe(J,g,E))});const L=ke.bind(null,g,E);return C.push(L),Ee(C).then(()=>{C=[];for(const O of h.list())C.push(xe(O,g,E));return C.push(L),Ee(C)}).then(()=>{C=Je(G,"beforeRouteUpdate",g,E);for(const O of G)O.updateGuards.forEach(J=>{C.push(xe(J,g,E))});return C.push(L),Ee(C)}).then(()=>{C=[];for(const O of g.matched)if(O.beforeEnter&&!E.matched.includes(O))if(ue(O.beforeEnter))for(const J of O.beforeEnter)C.push(xe(J,g,E));else C.push(xe(O.beforeEnter,g,E));return C.push(L),Ee(C)}).then(()=>(g.matched.forEach(O=>O.enterCallbacks={}),C=Je(Z,"beforeRouteEnter",g,E),C.push(L),Ee(C))).then(()=>{C=[];for(const O of f.list())C.push(xe(O,g,E));return C.push(L),Ee(C)}).catch(O=>me(O,8)?O:Promise.reject(O))}function Ce(g,E,C){for(const R of d.list())R(g,E,C)}function Se(g,E,C,R,G){const Z=N(g,E);if(Z)return Z;const L=E===_e,O=Pe?history.state:{};C&&(R||L?a.replace(g.fullPath,z({scroll:L&&O&&O.scroll},G)):a.push(g.fullPath,G)),r.value=g,P(g,E,C,L),q()}let ve;function B(){ve||(ve=a.listen((g,E,C)=>{if(!ct.listening)return;const R=S(g),G=H(R);if(G){te(z(G,{replace:!0}),R).catch(Te);return}i=R;const Z=r.value;Pe&&vs(vt(Z.fullPath,C.delta),Ke()),$e(R,Z).catch(L=>me(L,12)?L:me(L,2)?(te(L.to,R).then(O=>{me(O,20)&&!C.delta&&C.type===Ve.pop&&a.go(-1,!1)}).catch(Te),Promise.reject()):(C.delta&&a.go(-C.delta,!1),D(L,R,Z))).then(L=>{L=L||Se(R,Z,!1),L&&(C.delta&&!me(L,8)?a.go(-C.delta,!1):C.type===Ve.pop&&me(L,20)&&a.go(-1,!1)),Ce(R,Z,L)}).catch(Te)}))}let T=De(),F=De(),U;function D(g,E,C){q(g);const R=F.list();return R.length?R.forEach(G=>G(g,E,C)):console.error(g),Promise.reject(g)}function M(){return U&&r.value!==_e?Promise.resolve():new Promise((g,E)=>{T.add([g,E])})}function q(g){return U||(U=!g,B(),T.list().forEach(([E,C])=>g?C(g):E()),T.reset()),g}function P(g,E,C,R){const{scrollBehavior:G}=t;if(!Pe||!G)return Promise.resolve();const Z=!C&&ms(vt(g.fullPath,0))||(R||!C)&&history.state&&history.state.scroll||null;return we().then(()=>G(g,E,Z)).then(L=>L&&hs(L)).catch(L=>D(L,g,E))}const Y=g=>a.go(g);let ee;const Qe=new Set,ct={currentRoute:r,listening:!0,addRoute:_,removeRoute:y,hasRoute:I,getRoutes:j,resolve:S,options:t,push:p,replace:w,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:h.add,beforeResolve:f.add,afterEach:d.add,onError:F.add,isReady:M,install(g){const E=this;g.component("RouterLink",Js),g.component("RouterView",nn),g.config.globalProperties.$router=E,Object.defineProperty(g.config.globalProperties,"$route",{enumerable:!0,get:()=>K(r)}),Pe&&!ee&&r.value===_e&&(ee=!0,p(a.location).catch(G=>{}));const C={};for(const G in _e)C[G]=Q(()=>r.value[G]);g.provide(qe,E),g.provide(it,Et(C)),g.provide(st,r);const R=g.unmount;Qe.add(g),g.unmount=function(){Qe.delete(g),Qe.size<1&&(i=_e,ve&&ve(),ve=null,r.value=_e,ee=!1,U=!1),R()}}};return ct}function Ee(t){return t.reduce((s,n)=>s.then(()=>n()),Promise.resolve())}function an(t,s){const n=[],l=[],a=[],h=Math.max(s.matched.length,t.matched.length);for(let f=0;f<h;f++){const d=s.matched[f];d&&(t.matched.find(i=>Me(i,d))?l.push(d):n.push(d));const r=t.matched[f];r&&(s.matched.find(i=>Me(i,r))||a.push(r))}return[n,l,a]}function rt(){return pe(qe)}function dt(){return pe(it)}const ln="/img/logo.svg",rn={class:"dropdown bg-white rounded-md py-1 z-20",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},dn={class:"block px-4 py-2"},cn={class:"opacity-75"},un=e("div",{class:"my-1 border-b border-base-300"},null,-1),hn=e("div",{class:"relative block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},[e("a",{class:"stretched-link",href:"/admin/logout"},"登出")],-1),vn={__name:"UserMenu",props:{userName:String,userAccount:String,toleft:Number,totop:Number},emits:["close"],setup(t,{emit:s}){const n=t;Ae();const l=x(null),a=Q(()=>{var d;return String(String(n.toleft+32-((d=l.value)==null?void 0:d.clientWidth)))}),h=Q(()=>String(n.totop+40)),f=d=>{s("close")};return(d,r)=>{const i=jt("click-away");return ce((u(),m("div",{ref_key:"userMenu",ref:l,class:"shadow-lg border border-base-300 rounded-md z-20",style:Nt("position: fixed; left: "+K(a)+"px; top: "+K(h)+"px; min-width: max-content; --radix-popper-transform-origin: 100% 0px;")},[e("div",rn,[e("div",dn,[e("div",null,[e("strong",null,$(t.userName),1)]),e("div",cn,$(t.userAccount),1)]),un,hn])],4)),[[i,f]])}}};const mn={key:0,class:"bg-amber-700 text-white font-medium py-2 px-4 text-center"},fn=["href"],pn={class:"bg-base-200 border-b border-base-300 pt-4 mb-6"},gn={class:"container mx-auto mb-4 md:mb-6"},bn={class:"flex justify-between items-center px-2 md:px-0"},_n={href:"/",class:"flex items-center",style:{"max-width":"80%"}},xn=e("img",{width:"18",height:"18",src:ln},null,-1),yn={role:"banner",class:"text-lg font-semibold ml-3 truncate"},wn=e("span",{class:"badge badge-secondary"},"仅供测试",-1),kn={class:"flex items-center"},$n=e("a",{class:"hidden text-gray-600 hover:text-gray-800 sm:inline-block px-2 py-1",href:"https://github.com/gps949/tailscale/releases",target:"_blank",rel:"noopener noreferrer"},"下载客户端",-1),Cn={class:"relative rounded-full"},Sn={class:"relative shrink-0 rounded-full overflow-hidden w-8 h-8"},En={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-8 h-8",style:{"background-color":"rgb(161, 56, 33)"}},Pn={class:"relative overflow-hidden",style:{top:"1px"}},Rn={id:"nav",class:"navigation flex items-center overflow-auto left-1 relative md:container md:mx-auto md:px-0 md:-left-3"},Mn=["stroke-width"],Nn=e("rect",{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"},null,-1),jn=e("rect",{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"},null,-1),In=e("line",{x1:"6",y1:"6",x2:"6.01",y2:"6"},null,-1),Bn=e("line",{x1:"6",y1:"18",x2:"6.01",y2:"18"},null,-1),An=[Nn,jn,In,Bn],On=["stroke-width"],Dn=e("circle",{cx:"12",cy:"12",r:"10"},null,-1),Ln=e("line",{x1:"2",y1:"12",x2:"22",y2:"12"},null,-1),Un=e("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},null,-1),Tn=[Dn,Ln,Un],zn=["stroke-width"],Hn=e("circle",{cx:"12",cy:"12",r:"3"},null,-1),Vn=e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1),Gn=[Hn,Vn],Kn={key:2,class:"container mx-auto pb-20 md:pb-24"},qn={class:"mb-24"},Fn=e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2"},"错误")])])],-1),Wn={class:"w-full p-3 flex items-center justify-center text-sm"},Qn={class:"flex items-center justify-center"},Xn=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-3 text-red-400 h-5 w-5"},[e("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1),Yn=e("strong",null,"错误：",-1),Zn={__name:"Console",setup(t){rt();const s=dt(),n=x(null),l=x(0),a=x(0),h=x(!1),f=x(""),d=Q(()=>s.path);function r(){var b,N;l.value=(b=n.value)==null?void 0:b.getBoundingClientRect().left,a.value=(N=n.value)==null?void 0:N.getBoundingClientRect().top}const i=x(!1);function o(){i.value=!i.value,i.value?document.body.style.pointerEvents="none":document.body.style.removeProperty("pointer-events")}const c=Q(()=>{let b=s.path;if(b=="/")return"machine";if(b.substring(0,4)=="/dns")return"dns";if(b.substring(0,8)=="/machine")return"machine";if(b.substring(0,8)=="/setting")return"setting"}),v=x(""),_=x(""),y=x(""),j=x(""),I=x("");function S(){return new Promise((b,N)=>{axios.get("/admin/api/self").then(function(p){(p.data.errormsg==null||p.data.errormsg==="")&&(v.value=p.data.useraccount,_.value=p.data.basedomain,y.value=p.data.username,j.value=p.data.usernamehead,I.value=p.data.orgname,b("success")),N("err")}).catch(function(p){N("error")})})}return ge(()=>{r(),window.addEventListener("resize",r),window.addEventListener("scroll",r),axios.interceptors.response.use(b=>(b.status==200?(f.value="",h.value=!1):(f.value="登录状态超时失效",h.value=!0),b),b=>{if(b&&b.response)switch(b.response.status){case 400:b.message="请求错误(400)";break;case 401:b.message="未授权，请重新登录(401)";break;case 403:b.message="拒绝访问(403)";break;case 404:b.message="请求出错(404)";break;case 408:b.message="请求超时(408)";break;case 500:b.message="服务器错误(500)";break;case 501:b.message="服务未实现(501)";break;case 502:b.message="网络错误(502)";break;case 503:b.message="服务不可用(503)";break;case 504:b.message="网络超时(504)";break;case 505:b.message="HTTP版本不受支持(505)";break;default:b.message="连接出错"+b.response.status}else b.message="连接服务器失败!";return f.value=b.message,h.value=!0,Promise.reject(b)}),S().then().catch(),setInterval(()=>{S().then().catch()},15e3)}),(b,N)=>{const p=He("router-link"),w=He("router-view");return u(),m(X,null,[h.value?(u(),m("div",mn,[V("连接服务器出现"+$(f.value)+"，请尝试 ",1),e("a",{class:"text-amber-100",href:"/login?next_url=/admin#"+K(d)},"重新登录",8,fn)])):k("",!0),e("div",pn,[e("div",gn,[e("header",bn,[e("a",_n,[xn,e("div",yn,$(I.value),1),wn]),e("nav",kn,[$n,e("div",{ref_key:"userAvatar",ref:n,onClick:o,class:"heart-wrapper ml-2"},[e("button",Cn,[e("div",Sn,[e("div",En,$(j.value),1)])])],512),(u(),W(fe,{to:"body"},[i.value?(u(),W(vn,{key:0,toleft:l.value,totop:a.value,"user-account":v.value,"user-name":y.value,onClose:o},null,8,["toleft","totop","user-account","user-name"])):k("",!0)]))])])]),e("div",Pn,[e("nav",Rn,[ae(p,{class:"whitespace-nowrap py-2 group relative",to:"/machines"},{default:de(()=>[e("div",{class:ne([{"text-blue-600 after:visible":K(c)=="machine","text-gray-600 group-hover:text-gray-800 after:invisible":K(c)!="machine"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(u(),m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":K(c)=="machine"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},An,8,Mn)),e("div",{class:ne({"font-medium":K(c)=="machine"})},"设备",2)],2)]),_:1}),ae(p,{class:"whitespace-nowrap py-2 group relative",to:"/dns"},{default:de(()=>[e("div",{class:ne([{"text-blue-600 after:visible":K(c)=="dns","text-gray-600 group-hover:text-gray-800 after:invisible":K(c)!="dns"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(u(),m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":K(c)=="dns"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},Tn,8,On)),e("div",{class:ne({"font-medium":K(c)=="dns"})},"DNS",2)],2)]),_:1}),ae(p,{class:"whitespace-nowrap py-2 group relative",to:"/settings"},{default:de(()=>[e("div",{class:ne([{"text-blue-600 after:visible":K(c)=="setting","text-gray-600 group-hover:text-gray-800 after:invisible":K(c)!="setting"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(u(),m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":K(c)=="setting"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},Gn,8,zn)),e("div",{class:ne({"font-medium":K(c)=="setting"})},"设置",2)],2)]),_:1})])])]),h.value?k("",!0):(u(),W(w,{key:1})),h.value?(u(),m("main",Kn,[e("section",qn,[Fn,e("div",Wn,[e("div",Qn,[Xn,e("div",null,[Yn,V(" 请求失败 "+$(f.value),1)])])])])])):k("",!0)],64)}}},Jn={class:"dropdown bg-white rounded-md py-1 z-20",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},eo=["hidden"],to=["hidden"],so=e("div",{class:"my-1 border-b border-base-300"},null,-1),no=["hidden"],oo=["hidden"],ao=e("div",{class:"my-1 border-b border-base-300"},null,-1),Gt={__name:"MachineMenu",props:{toleft:Number,totop:Number,neverExpires:Boolean},emits:["close"],setup(t,{emit:s}){const n=t,l=x(!0);Ae();const a=x(null),h=Q(()=>{var r;return String(String(n.toleft+32-((r=a.value)==null?void 0:r.clientWidth)))}),f=Q(()=>{var r;return n.totop<=window.innerHeight/2?String(n.totop+36):String(n.totop-10-((r=a.value)==null?void 0:r.clientHeight))}),d=r=>{s("close")};return(r,i)=>{const o=jt("click-away");return ce((u(),m("div",{ref_key:"machineMenu",ref:a,class:"shadow-xl border border-base-300 rounded-md z-20",style:Nt("position: fixed; left: "+K(h)+"px; top: "+K(f)+"px; min-width: max-content; --radix-popper-transform-origin: 0% 0px;")},[e("div",Jn,[e("div",{onClick:i[0]||(i[0]=c=>r.$emit("showdialog-updatehostname")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:l.value}," 编辑设备名称…",8,eo),e("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:l.value}," 分享…",8,to),e("div",{onClick:i[1]||(i[1]=c=>r.$emit("set-expires")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},$(t.neverExpires?"启用密钥过期":"禁用密钥过期"),1),so,e("div",{onClick:i[2]||(i[2]=c=>r.$emit("showdialog-setsubnet")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:l.value}," 编辑子网转发…",8,no),e("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:l.value}," 编辑ACL标签…",8,oo),ao,e("div",{onClick:i[3]||(i[3]=c=>r.$emit("showdialog-remove")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100 text-red-400"}," 移除…")])],4)),[[o,d]])}}},lo={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},io={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},ro={class:"font-semibold text-lg truncate"},co=e("p",{class:"text-gray-700 mb-4"},"这个设备将从您的蜃境网络中永久删除！如需重新添加该设备，您将需要在该设备上重新进行授权",-1),uo={class:"flex mt-10 justify-end space-x-4"},ho=e("button",{class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit",type:"submit"},"删除设备",-1),vo=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),mo=[vo],Kt={__name:"RemoveMachine",props:{machineName:String},setup(t){return Ae(),(s,n)=>(u(),m("div",{onClick:n[3]||(n[3]=he(l=>s.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",lo,[e("header",io,[e("div",ro,"删除 "+$(t.machineName),1)]),e("form",{onSubmit:n[1]||(n[1]=he(l=>s.$emit("confirm"),["prevent"]))},[co,e("footer",uo,[e("button",{onClick:n[0]||(n[0]=l=>s.$emit("close")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消"),ho])],32),e("button",{onClick:n[2]||(n[2]=l=>s.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},mo)])]))}};const Fe=t=>(Ie("data-v-7e611cdc"),t=t(),Be(),t),fo={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},po={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},go={class:"font-semibold text-lg truncate"},bo=Fe(()=>e("p",{class:"text-gray-700 mb-6"},[V("这个名称显示在控制台、客户端，以及生成对应的「"),e("strong",null,"幻域"),V("」名称")],-1)),_o={class:"flex items-center"},xo=["disabled"],yo=Fe(()=>e("label",{for:"auto-generate-checkbox",class:"font-medium ml-3"},"由设备OS主机名生成",-1)),wo=Fe(()=>e("label",{for:"machine-name",class:"block font-medium mt-6 mb-2"},"设备名称",-1)),ko={class:"flex mb-2"},$o={class:"relative w-full z-30"},Co=["disabled"],So={key:0,class:"text-sm text-red-500 mb-2"},Eo={key:1,class:"text-sm text-red-500 mb-2"},Po={key:2,class:"text-sm text-red-500 mb-2"},Ro={key:3,class:"text-sm text-gray-600"},Mo={class:"text-xs break-words bg-gray-200 px-1 rounded"},No={key:4,class:"text-sm text-gray-600"},jo={class:"text-xs break-words bg-gray-200 px-1 rounded"},Io={class:"text-xs break-words bg-gray-200 px-1 rounded"},Bo={class:"flex mt-10 justify-end space-x-4"},Ao=["disabled"],Oo=["disabled"],Do=Fe(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),Lo=[Do],Uo={__name:"UpdateHostname",props:{id:String,hostName:String,givenName:String,autoGen:Boolean},emits:["update-done","update-fail","close"],setup(t,{emit:s}){const n=t;Ae();const l=x(!1),a=x(!0),h=x(""),f=x(!1),d=x(!1),r=x(""),i=x(!1),o=x(!1),c=x(!1);Re(()=>a.value,_=>{i.value=!1,o.value=!1,c.value=!1,_==n.autoGen?f.value=!1:f.value=!0,_&&(n.autoGen?h.value=n.givenName:h.value=n.hostName)}),Re(()=>h.value,_=>{i.value=!1,o.value=!1,c.value=!1,h.value=h.value.toLowerCase().replace(/[^-0-9a-z]/ig,"-").replace(/--*/g,"-"),_==n.givenName?d.value=!1:d.value=!0}),ge(()=>{f.value=!1,d.value=!1,a.value=n.autoGen,h.value=n.givenName,i.value=!1,o.value=!1,c.value=!1});function v(){if(!/^([0-9a-z]|-(?!-))+$/.test(h.value)){c.value=!0;return}if(/^(-.*|.*-)$/.test(h.value)){c.value=!0;return}l.value=!0;var _="";r.value=n.hostName,a.value||(_=h.value,r.value=h.value),axios.post("/admin/api/machines",{mid:n.id,state:"rename-node",nodeName:_}).then(function(y){y.data.status=="success"?y.data.data.name==r.value?s("update-done",y.data.data.name,y.data.data.automaticNameMode,!0):_===""?(i.value=!0,s("update-done",y.data.data.name,y.data.data.automaticNameMode,!1)):y.data.data.name==n.givenName?(o.value=!0,s("update-fail","目标主机名已存在！")):(console.log("unexpected case happended during the hostname updating!"),s("update-fail","意外情形发生了！")):s("update-fail",y.data.status.substring(6))}).catch(function(y){console.log(y),s("update-fail",y)}),l.value=!1}return(_,y)=>(u(),m("div",{onClick:y[5]||(y[5]=he(j=>_.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",fo,[e("header",po,[e("div",go,"修改设备名称 "+$(t.givenName),1)]),e("form",{onSubmit:y[3]||(y[3]=he(j=>_.$emit("confirm"),["prevent"]))},[bo,e("div",_o,[ce(e("input",{disabled:l.value,"onUpdate:modelValue":y[0]||(y[0]=j=>a.value=j),id:"auto-generate-checkbox",type:"checkbox",class:"toggle toggle-sm"},null,8,xo),[[Ue,a.value]]),yo]),wo,e("div",ko,[e("div",$o,[ce(e("input",{"onUpdate:modelValue":y[1]||(y[1]=j=>h.value=j),class:"input w-full z-30 border focus:outline-blue-500/60 hover:border disabled:hover:border-stone-200 disabled:border-stone-200 border-stone-200 hover:border-stone-400 rounded-md h-9 min-h-fit",type:"text",disabled:l.value||a.value,id:"machine-name"},null,8,Co),[[nt,h.value]])])]),i.value?(u(),m("p",So,"名称 “"+$(r.value)+"” 已有设备占用 , 因此设备被自动命名为 “"+$(h.value)+"”.",1)):k("",!0),o.value?(u(),m("p",Eo,"名称 “"+$(r.value)+"” 已有设备占用",1)):k("",!0),c.value?(u(),m("p",Po,"名称不能为空，只能是字母数字和连接线组成，且不能以连接线开头结尾")):k("",!0),d.value?k("",!0):(u(),m("div",Ro,[V("这个设备可以通过「幻域」使用 "),e("code",Mo,$(t.givenName),1),V(" 进行访问")])),d.value?(u(),m("div",No,[V("这个设备可以通过「幻域」使用 "),e("code",jo,$(h.value),1),V(" 进行访问。 "),e("code",Io,$(t.givenName),1),V(" 不再指向该设备。")])):k("",!0),e("footer",Bo,[e("button",{disabled:l.value,onClick:y[2]||(y[2]=j=>_.$emit("close")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消",8,Ao),e("button",{disabled:l.value||!f.value&&!d.value,onClick:v,class:"btn border-0 bg-blue-500 hover:bg-blue-900 disabled:bg-blue-500/60 text-white disabled:text-white/60 h-9 min-h-fit",type:"submit"},"更新",8,Oo)])],32),e("button",{onClick:y[4]||(y[4]=j=>_.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},Lo)])]))}},qt=je(Uo,[["__scopeId","data-v-7e611cdc"]]);const ye=t=>(Ie("data-v-a389bf8d"),t=t(),Be(),t),To={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},zo={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},Ho={class:"font-semibold text-lg truncate"},Vo={class:"mb-6"},Go=ye(()=>e("h3",{class:"font-semibold text-gray-800 mb-2"},"子网转发路由",-1)),Ko=ye(()=>e("p",{class:"text-gray-700 mb-3"},"通过子网转发连接您无法安装蜃境客户端的设备",-1)),qo={key:0,class:"rounded-md border bg-stone-100 border-stone-300 p-6"},Fo=ye(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备未披露任何子网转发路由")],-1)),Wo=[Fo],Qo={key:1},Xo={class:"flex items-center py-2 border-t"},Yo=["disabled","checked","id"],Zo={class:"flex items-center"},Jo=["for"],ea={key:2,class:"flex-1 flex border-t items-center pt-2"},ta=["disabled"],sa=["disabled"],na=ye(()=>e("h3",{class:"font-semibold flex items-center text-gray-800 mb-2"},"出口节点",-1)),oa=ye(()=>e("p",{class:"text-gray-700 mb-3"},"允许您的网络上访问互联网流量通过该设备流出",-1)),aa={class:"flex items-center"},la=["disabled","checked"],ia=ye(()=>e("label",{for:"exit-node"},"用作出口节点",-1)),ra={key:0,class:"tooltip","data-tip":"该设备未声明它自己为出口节点。可使用 --advertise-exit-node 参数再次运行以开启。"},da=ye(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mx-2 text-gray-500"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)),ca=[da],ua=ye(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),ha=[ua],va={__name:"SetSubnet",props:{id:String,currentMachine:Object},emits:["update-done","update-fail"],setup(t,{emit:s}){const n=t;Ae();const l=x(!1),a=Q(()=>n.currentMachine.allowedIPs&&n.currentMachine.allowedIPs.length>0),h=Q(()=>n.currentMachine.extraIPs&&n.currentMachine.extraIPs.length>0);function f(r){if(!n.currentMachine.allowedIPs||n.currentMachine.allowedIPs.length==0)return!1;for(var i in n.currentMachine.allowedIPs)if(r===n.currentMachine.allowedIPs[i])return!0;return!1}ge(()=>{});function d(r){l.value=!0;var i=[];if(r!="Off")for(var o in n.currentMachine.advertisedIPs)(r=="On"||document.getElementById(n.currentMachine.advertisedIPs[o]).checked)&&i.push(n.currentMachine.advertisedIPs[o]);var c=document.getElementById("exit-node").checked;axios.post("/admin/api/machines",{mid:n.id,state:"set-route-settings",allowedIPs:i,allowedExitNode:c}).then(function(v){v.data.status=="success"?s("update-done",v.data.data.advertisedIPs,v.data.data.allowedIPs,v.data.data.extraIPs,v.data.data.allowedExitNode):s("update-fail",v.data.status.substring(6))}).catch(function(v){console.log(v),s("update-fail",v)}),l.value=!1}return(r,i)=>(u(),m("div",{onClick:i[5]||(i[5]=he(o=>r.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",To,[e("header",zo,[e("div",Ho,"编辑 "+$(t.currentMachine.name)+" 子网转发设置",1)]),e("div",Vo,[Go,Ko,e("div",null,[t.currentMachine.hasSubnets?k("",!0):(u(),m("div",qo,Wo)),t.currentMachine.hasSubnets?(u(),m("div",Qo,[(u(!0),m(X,null,ie(t.currentMachine.advertisedIPs,o=>(u(),m("li",Xo,[e("div",null,[e("input",{onChange:i[0]||(i[0]=c=>d("Update")),disabled:l.value,checked:f(o),id:o,type:"checkbox",class:"toggle block mr-3"},null,40,Yo)]),e("div",Zo,[e("label",{for:o},$(o),9,Jo)])]))),256))])):k("",!0),t.currentMachine.hasSubnets?(u(),m("div",ea,[e("button",{onClick:i[1]||(i[1]=o=>d("Off")),class:"btn border-0 bg-red-600 hover:bg-red-700 disabled:bg-red-600/60 disabled:text-white/60 text-white h-9 min-h-fit mr-2",disabled:!K(a)},"全部禁用",8,ta),e("button",{onClick:i[2]||(i[2]=o=>d("On")),class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit",disabled:!K(h)},"全部启用",8,sa)])):k("",!0)])]),e("div",null,[na,oa,e("div",aa,[e("input",{onChange:i[3]||(i[3]=o=>d("Update")),disabled:l.value||!t.currentMachine.advertisedExitNode,checked:t.currentMachine.allowedExitNode,id:"exit-node",type:"checkbox",class:"toggle mr-3"},null,40,la),ia,t.currentMachine.advertisedExitNode?k("",!0):(u(),m("span",ra,ca))])]),e("button",{onClick:i[4]||(i[4]=o=>r.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},ha)])]))}},Ft=je(va,[["__scopeId","data-v-a389bf8d"]]);const re=t=>(Ie("data-v-d2dc0a09"),t=t(),Be(),t),ma={class:"container mx-auto pb-20 md:pb-24"},fa={class:"mb-24"},pa=re(()=>e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2",tabindex:"-1"}," 设备 ")])])],-1)),ga={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-full px-2 py-1 leading-none text-sm mb-8"},ba={class:"table w-full"},_a=re(()=>e("thead",null,[e("tr",null,[e("th",{class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"}," 设备 "),e("th",{class:"hidden md:table-cell md:w-1/4"},"IP"),e("th",{class:"hidden md:table-cell w-1/4 lg:w-1/5"},"系统"),e("th",{class:"hidden lg:table-cell md:flex-auto"},"状态"),e("th",{class:"table-cell justify-end ml-auto md:ml-0 relative w-1/6 lg:w-12"},[e("span",{class:"sr-only"},"设备操作菜单")])])],-1)),xa=["id","v-if","onMouseenter","onMouseleave"],ya={class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"},wa={class:"items-center text-gray-900"},ka={class:"font-semibold hover:text-blue-500"},$a={class:"stretched-link"},Ca={class:"md:hidden flex space-x-1 truncate"},Sa={class:"text-sm"},Ea=re(()=>e("span",null,"·",-1)),Pa={class:"md:hidden text-gray-600 text-sm",title:"m.version"},Ra={class:"flex items-center text-gray-600 text-sm"},Ma={class:"my-1"},Na={key:0},ja=re(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1)),Ia=[ja],Ba={key:1},Aa=re(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1)),Oa=[Aa],Da={key:2},La=re(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1)),Ua=[La],Ta={key:3},za=re(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1)),Ha=[za],Va={key:4},Ga={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},Ka={key:5},qa={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},Fa={key:0,class:"tooltip","data-tip":"该设备存在未批准子网转发，请在设备菜单的“编辑子网转发…”中检查"},Wa=re(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),Qa=[Wa],Xa={key:6},Ya={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},Za={key:0,class:"tooltip","data-tip":"该设备申请被用作出口节点，请在设备菜单的“编辑子网转发…”中检查"},Ja=re(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),el=[Ja],tl={class:"hidden md:table-cell md:w-1/4"},sl={class:"font-medium pr-6"},nl={class:"truncate"},ol={key:0,class:"absolute -mt-1 -ml-2 -top-px -left-px shadow-md cursor-pointer rounded-md active:shadow-sm transition-shadow duration-100 ease-in-out z-20",style:{visibility:"visible","max-width":"934px"}},al={class:"flex border rounded-md button-outline bg-white"},ll={class:"inline-block select-none truncate"},il=re(()=>e("span",{class:"cursor-pointer text-blue-500 pl-2"},"复制",-1)),rl={class:"tooltip text-gray-400","data-tip":"这条子网转发未启用"},dl=re(()=>e("br",null,null,-1)),cl={class:"hidden md:table-cell w-1/4 lg:w-1/5"},ul={class:"flex items-center relative"},hl={class:"text-sm text-gray-600"},vl={class:"hidden lg:table-cell md:flex-auto"},ml={class:"inline-flex items-center cursor-default"},fl=["data-tip"],pl=["data-tip"],gl={class:"table-cell justify-end ml-auto md:ml-0 relative w-12 justify-items-end items-center md:items-start"},bl=["onClick"],_l=be('<button class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-20" data-v-d2dc0a09><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500" data-v-d2dc0a09><circle cx="12" cy="12" r="1" data-v-d2dc0a09></circle><circle cx="19" cy="12" r="1" data-v-d2dc0a09></circle><circle cx="5" cy="12" r="1" data-v-d2dc0a09></circle></svg></button>',1),xl=[_l],yl=["onClick"],wl=re(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})],-1)),kl=[wl],$l={__name:"Machines",setup(t){const s=x(null),n=x(0),l=x(0);function a(){var D,M;s.value!=null&&(n.value=((D=s.value)==null?void 0:D.getBoundingClientRect().left)+14,l.value=(M=s.value)==null?void 0:M.getBoundingClientRect().top)}function h(D,M){var q,P,Y,ee;for(s.value=M.target;((q=s.value)==null?void 0:q.tagName)!="DIV"&&((P=s.value)==null?void 0:P.tagName)!="div";)s.value=s.value.parentNode;i.value=D,n.value=((Y=s.value)==null?void 0:Y.getBoundingClientRect().left)+14,l.value=(ee=s.value)==null?void 0:ee.getBoundingClientRect().top,_.value=!0}function f(){s.value=null,_.value=!1}const d=x(!1),r=x("");Re(d,()=>{d.value&&setTimeout(function(){d.value=!1},5e3)});const i=x("-1");function o(D){i.value=D,y.value=!0}function c(){y.value=!1}const v=x(!1),_=x(!1),y=x(!1),j=x(!1);function I(){y.value=!1,f(i.value),j.value=!0}const S=x(!1);function b(){y.value=!1,f(i.value),S.value=!0}const N=x(!1);function p(){y.value=!1,f(i.value),N.value=!0}const w=x({}),H=Q(()=>Object.getOwnPropertyNames(w.value).length);let te;function ke(){return new Promise((D,M)=>{axios.get("/admin/api/machines").then(function(q){if((q.data.needreauth!=null||q.data.needreauth==!0)&&(r.value=q.data.needreauthreason+"，登录状态失效，请重新登录",d.value=!0,M()),q.data.errormsg==null||q.data.errormsg===""){for(var P in q.data.mlist){w.value[P]=q.data.mlist[P];let Y=w.value[P].expirydesc.slice(-2);w.value[P].expirydesc=="马上就要过期"||Y=="分钟"||Y=="小时"||Y=="1天"?w.value[P].soonexpiry=!0:w.value[P].soonexpiry=!1}D()}else q.data.errormsg!=null&&(r.value="获设备信息出错："+q.data.errormsg,d.value=!0,M())}).catch(function(q){r.value="更新页面出错："+q,d.value=!0,M()}).then(function(){})})}ge(()=>{a(),window.addEventListener("resize",a),window.addEventListener("scroll",a),ke().then().catch(),te=setInterval(()=>{ke().then().catch()},15e3)}),Pt(()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a)}),Qs(()=>{clearInterval(te)});function $e(D){f(),axios.post("/admin/api/machines",{mid:D,state:"set-expires"}).then(function(M){M.data.status=="success"?(w.value[D].neverExpires=M.data.data.neverExpires,w.value[D].expirydesc=M.data.data.expires,M.data.data.neverExpires==!0?r.value="已禁用密钥过期":r.value="已启用密钥过期",d.value=!0):(r.value="失败："+M.data.status.substring(6),d.value=!0)}).catch(function(M){console.log(M)})}function Ce(D){axios.post("/admin/api/machine/remove",{mid:D}).then(function(M){M.data.status=="OK"?(j.value=!1,r.value=w.value[D].name+"已从您的蜃境网络移除！",d.value=!0,delete w.value[D]):alert("失败："+M.data.errmsg)}).catch(function(M){console.log(M)})}function Se(D,M,q){w.value[i.value].name=D,w.value[i.value].automaticNameMode=M,we(()=>{S.value=!q,we(()=>{r.value="已更新设备名称！",d.value=!0})})}function ve(D){r.value="更新设备名称失败！",d.value=!0}function B(D,M,q,P){w.value[i.value].advertisedIPs=D,w.value[i.value].allowedIPs=M,w.value[i.value].extraIPs=q,w.value[i.value].allowedExitNode=P,we(()=>{r.value="已更新子网转发设置！",d.value=!0})}function T(D){r.value="更新子网转发设置失败！",d.value=!0}function F(){navigator.clipboard.writeText(w.value[i.value].mipv4).then(function(){r.value="蜃境网络IPv4地址已复制到粘贴板！",d.value=!0})}function U(){navigator.clipboard.writeText(w.value[i.value].mipv6).then(function(){r.value="蜃境网络IPv6地址已复制到粘贴板！",d.value=!0})}return(D,M)=>{const q=He("router-link");return u(),m(X,null,[e("main",ma,[e("section",fa,[pa,e("div",ga,$(K(H))+" 个设备 ",1),e("table",ba,[_a,e("tbody",null,[(u(!0),m(X,null,ie(w.value,(P,Y)=>(u(),m("tr",{id:Y,"v-if":w.value[Y]!=D.nil,onMouseenter:ee=>o(Y),onMouseleave:ee=>c(),class:"w-full px-0.5 hover"},[e("td",ya,[ae(q,{class:"relative",to:"/machines/"+P.mipv4},{default:de(()=>[e("div",wa,[e("p",ka,[e("span",{class:ne([{"bg-green-500":P.ifonline,"bg-gray-300":!P.ifonline},"inline-block w-2 h-2 rounded-full relative -top-px lg:hidden mr-2"])},null,2),e("a",$a,$(P.name),1)]),e("div",Ca,[e("span",Sa,$(P.mipv4),1),Ea,e("span",Pa,$(P.os),1)])]),e("div",null,[e("div",Ra,[e("span",null,$(P.useraccount),1)])])]),_:2},1032,["to"]),e("div",Ma,[e("div",null,[P.issharedin?(u(),m("span",Na,Ia)):k("",!0),P.issharedout?(u(),m("span",Ba,Oa)):k("",!0),P.expirydesc=="已过期"?(u(),m("span",Da,Ua)):k("",!0),P.neverExpires?(u(),m("span",Ta,Ha)):k("",!0),P.soonexpiry?(u(),m("span",Va,[e("div",Ga,$(P.expirydesc),1)])):k("",!0),P.hasSubnets?(u(),m("span",Ka,[e("div",qa,[V(" 子网转发 "),P.hasSubnets&&P.extraIPs&&P.extraIPs.length>0?(u(),m("div",Fa,Qa)):k("",!0)])])):k("",!0),P.advertisedExitNode?(u(),m("span",Xa,[e("div",Ya,[V(" 出口节点 "),P.allowedExitNode?k("",!0):(u(),m("div",Za,el))])])):k("",!0)])])]),e("td",tl,[e("ul",null,[e("li",sl,[e("div",{onMouseenter:M[0]||(M[0]=ee=>v.value=!0),onMouseleave:M[1]||(M[1]=ee=>v.value=!1),class:"flex relative min-w-0"},[e("div",nl,[e("span",null,$(P.mipv4),1)]),v.value&&i.value==Y?(u(),m("div",ol,[e("div",al,[e("div",{onClick:F,class:"flex min-w-0 py-1 px-2 hover:bg-gray-100 rounded-l-md"},[e("span",ll,[e("span",null,$(P.mipv4),1)]),il]),e("div",{onClick:U,class:"text-blue-500 py-1 px-2 border-l hover:bg-gray-100 rounded-r-md"}," IPv6 ")])])):k("",!0)],32)]),(u(!0),m(X,null,ie(P.allowedIPs,ee=>(u(),m("li",null,[e("span",null,$(ee),1)]))),256)),(u(!0),m(X,null,ie(P.extraIPs,ee=>(u(),m(X,null,[e("li",rl,[e("span",null,$(ee),1)]),dl],64))),256))])]),e("td",cl,[e("div",ul,[e("div",null,$(P.os),1)]),e("div",hl,$(P.version),1)]),e("td",vl,[e("span",null,[e("div",ml,[e("span",{class:ne(["inline-block w-2 h-2 rounded-full mr-2",{"bg-green-500":P.ifonline,"bg-gray-300":!P.ifonline}])},null,2),P.ifonline?(u(),m("span",{key:0,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+P.lastseen},"已连接",8,fl)):(u(),m("span",{key:1,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+P.lastseen},$(P.lastseen),9,pl))])])]),e("td",gl,[!y.value&&!_.value||i.value!=Y?(u(),m("div",{key:0,onClick:ee=>h(Y,ee),class:"flex-none w-12 -mt-0.5 relative"},xl,8,bl)):k("",!0),(y.value||_.value)&&i.value==Y?(u(),m("div",{key:1,onClick:ee=>h(Y,ee),class:"flex-none w-12 border button-outline bg-white shadow-md cursor-pointer focus:outline-none focus:ring -mt-0.5 relative py-0.5 px-2 rounded-md border-gray-300/100 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 transition-shadow duration-100 ease-in-out z-20"},kl,8,yl)):k("",!0)])],40,xa))),256))])])])]),(u(),W(fe,{to:".toast-container"},[ae(ot,{show:d.value,msg:r.value,onClose:M[2]||(M[2]=P=>d.value=!1)},null,8,["show","msg"])])),(u(),W(fe,{to:"body"},[_.value?(u(),W(Gt,{key:0,toleft:n.value,totop:l.value,neverExpires:w.value[i.value].neverExpires,onClose:f,onSetExpires:M[3]||(M[3]=P=>$e(i.value)),onShowdialogRemove:I,onShowdialogUpdatehostname:b,onShowdialogSetsubnet:p},null,8,["toleft","totop","neverExpires"])):k("",!0)])),(u(),W(fe,{to:"body"},[j.value?(u(),W(Kt,{key:0,"machine-name":w.value[i.value].name,onClose:M[4]||(M[4]=P=>j.value=!1),onConfirm:M[5]||(M[5]=P=>Ce(i.value))},null,8,["machine-name"])):k("",!0),S.value?(u(),W(qt,{key:1,id:i.value,"given-name":w.value[i.value].name,"host-name":w.value[i.value].hostname,"auto-gen":w.value[i.value].automaticNameMode,onClose:M[6]||(M[6]=P=>S.value=!1),onUpdateDone:Se,onUpdateFail:ve},null,8,["id","given-name","host-name","auto-gen"])):k("",!0),N.value?(u(),W(Ft,{key:2,id:i.value,"current-machine":w.value[i.value],onClose:M[7]||(M[7]=P=>N.value=!1),onUpdateDone:B,onUpdateFail:T},null,8,["id","current-machine"])):k("",!0)]))],64)}}},Cl=je($l,[["__scopeId","data-v-d2dc0a09"]]);const A=t=>(Ie("data-v-2820c8a8"),t=t(),Be(),t),Sl={class:"container mx-auto pb-20 md:pb-24"},El={class:"mb-24"},Pl={class:"pb-4 mb-8"},Rl={class:"font-medium space-x-2 mb-5 truncate flex"},Ml=A(()=>e("span",{class:"text-gray-400"},"/",-1)),Nl={class:"flex flex-wrap gap-2 items-center justify-between"},jl={class:"text-2xl font-semibold tracking-tight leading-tight truncate flex-shrink-0 max-w-full",tabindex:"-1"},Il={class:"flex"},Bl={class:"flex gap-2 flex-wrap"},Al=A(()=>e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]),V("设备设置 ")],-1)),Ol=[Al],Dl={class:"flex border-t border-gray-200 text-sm mt-4 pt-4"},Ll={class:"max-w-sm"},Ul=A(()=>e("div",{class:"text-gray-500 mb-2"},"归属于",-1)),Tl={class:"mt-0.5"},zl={class:"flex items-center text-gray-600 text-sm"},Hl={class:"relative shrink-0 rounded-full overflow-hidden w-5 h-5 text-xs mr-2"},Vl={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-5 h-5 text-xs",style:{"background-color":"rgb(161, 56, 33)"}},Gl={"data-state":"closed"},Kl={key:0,class:"max-w-sm border-l border-gray-200 ml-4 pl-4"},ql=A(()=>e("p",{class:"text-gray-500 mb-2"},"状态",-1)),Fl={key:0},Wl=A(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1)),Ql=[Wl],Xl={key:1},Yl=A(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1)),Zl=[Yl],Jl={key:2},ei=A(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1)),ti=[ei],si={key:3},ni=A(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1)),oi=[ni],ai={key:4},li={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},ii={key:5},ri={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},di={key:0,class:"tooltip","data-tip":"该设备存在未批准子网转发，请在设备菜单的“编辑子网转发…”中检查"},ci=A(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),ui=[ci],hi={key:6},vi={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},mi={key:0,class:"tooltip","data-tip":"该设备申请被用作出口节点，请在设备菜单的“编辑子网转发…”中检查"},fi=A(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),pi=[fi],gi={class:"mb-8"},bi={class:"flex justify-between mb-4"},_i=A(()=>e("div",{class:"max-w-xl"},[e("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"子网转发"),e("p",{class:"text-gray-600"}," “子网转发”允许你暴露设备可访问物理网络路由给您的蜃境网络 ")],-1)),xi={key:0},yi={key:0,class:"p-4 md:p-6 border border-gray-200 rounded-md"},wi={class:"leading-normal"},ki={class:"tooltip text-gray-400","data-tip":"这条子网转发未启用"},$i=A(()=>e("br",null,null,-1)),Ci={key:1,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},Si=A(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备未暴露任何子网可供转发 ")],-1)),Ei=[Si],Pi={key:2,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},Ri=A(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备来自外部共享，不能暴露子网转发给你 ")],-1)),Mi=[Ri],Ni={class:"mb-8"},ji=A(()=>e("header",{class:"max-w-xl mb-4"},[e("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"设备信息"),e("p",{class:"text-gray-600"},"关于该设备网络的信息，用于调试连接问题")],-1)),Ii={class:"p-4 md:p-6 border border-gray-200 rounded-md grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-2"},Bi={class:"space-y-2"},Ai={class:"flex text-sm"},Oi=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建者",-1)),Di={class:"min-w-0 truncate"},Li={class:"flex text-sm"},Ui=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备名称",-1)),Ti={class:"min-w-0"},zi={class:"flex relative min-w-0"},Hi={class:"truncate"},Vi={key:0,class:"cursor-pointer text-blue-500 pl-2"},Gi={class:"flex text-sm"},Ki=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"域名",-1)),qi={class:"min-w-0"},Fi={class:"flex relative min-w-0"},Wi={class:"truncate"},Qi={key:0,class:"cursor-pointer text-blue-500 pl-2"},Xi={class:"flex text-sm"},Yi=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"系统主机名",-1)),Zi={class:"min-w-0 truncate"},Ji={class:"flex text-sm"},er=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"操作系统",-1)),tr={class:"min-w-0 truncate"},sr={class:"flex text-sm"},nr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境客户端版本",-1)),or={class:"min-w-0 truncate"},ar={class:"flex items-center"},lr={class:"flex text-sm"},ir=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv4",-1)),rr={class:"min-w-0"},dr={class:"flex relative min-w-0"},cr={class:"truncate"},ur={key:0,class:"cursor-pointer text-blue-500 pl-2"},hr={class:"flex text-sm"},vr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv6",-1)),mr={class:"min-w-0"},fr={class:"flex relative min-w-0"},pr={class:"truncate"},gr={class:"inline-flex justify-start min-w-0 max-w-full"},br={class:"truncate w-fit flex-shrink"},_r={key:0,class:"cursor-pointer text-blue-500 pl-2"},xr={class:"flex text-sm"},yr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备ID",-1)),wr={class:"min-w-0 truncate"},kr={class:"flex text-sm"},$r=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备端点信息",-1)),Cr={class:"min-w-0 truncate"},Sr={class:"pl-3 -indent-3"},Er={class:"select-all"},Pr={class:"flex text-sm"},Rr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"中继器",-1)),Mr={class:"min-w-0 truncate"},Nr={key:0},jr=A(()=>e("li",null," 中继器未设定或出错 ",-1)),Ir=[jr],Br={key:1},Ar={class:"font-medium"},Or={key:0,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"relative inline-block ml-1 -top-px"},Dr=A(()=>e("polyline",{points:"20 6 9 17 4 12"},null,-1)),Lr=[Dr],Ur={class:"space-y-2"},Tr={class:"flex text-sm"},zr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建于",-1)),Hr={class:"min-w-0 truncate"},Vr={class:"flex text-sm"},Gr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"最近更新",-1)),Kr={class:"min-w-0 truncate"},qr={class:"flex text-sm"},Fr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"密钥过期",-1)),Wr={key:0,class:"min-w-0 truncate"},Qr={key:1,class:"min-w-0 truncate"},Xr=A(()=>e("h2",{class:"pt-2 text-xs uppercase font-semibold text-gray-500 tracking-wide"}," 客户端连通性 ",-1)),Yr={class:"flex text-sm"},Zr=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"复杂网络 Varies",-1)),Jr={key:0,class:"min-w-0 truncate"},ed={key:1,class:"min-w-0 truncate"},td={class:"flex text-sm"},sd=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"}," 需发夹机制 Hairpinning ",-1)),nd={key:0,class:"min-w-0 truncate"},od={key:1,class:"min-w-0 truncate"},ad={class:"flex text-sm"},ld=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"IPv6",-1)),id={key:0,class:"min-w-0 truncate"},rd={key:1,class:"min-w-0 truncate"},dd={class:"flex text-sm"},cd=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UDP",-1)),ud={key:0,class:"min-w-0 truncate"},hd={key:1,class:"min-w-0 truncate"},vd={class:"flex text-sm"},md=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UPnP",-1)),fd={key:0,class:"min-w-0 truncate"},pd={key:1,class:"min-w-0 truncate"},gd={class:"flex text-sm"},bd=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"PCP",-1)),_d={key:0,class:"min-w-0 truncate"},xd={key:1,class:"min-w-0 truncate"},yd={class:"flex text-sm"},wd=A(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"NAT-PMP",-1)),kd={key:0,class:"min-w-0 truncate"},$d={key:1,class:"min-w-0 truncate"},Cd={__name:"Machine",setup(t){const s=x(!1),n=rt(),l=dt(),a=x(!1),h=x("");Re(a,()=>{a.value&&setTimeout(function(){a.value=!1},5e3)});const f=Q(()=>p.value.issharedin||p.value.issharedout||p.value.expirydesc=="已过期"||p.value.neverExpires||p.value.soonexpiry||p.value.advertisedExitNode||p.value.hasSubnets),d=x(null),r=x(0),i=x(0),o=x(!1);function c(){var B,T;d.value!=null&&(r.value=((B=d.value)==null?void 0:B.getBoundingClientRect().left)+78,i.value=((T=d.value)==null?void 0:T.getBoundingClientRect().top)+20),window.onresize=()=>{var F,U;d.value!=null&&(r.value=((F=d.value)==null?void 0:F.getBoundingClientRect().left)+78,i.value=((U=d.value)==null?void 0:U.getBoundingClientRect().top)+20)},window.onscroll=()=>{var F,U;d.value!=null&&(r.value=((F=d.value)==null?void 0:F.getBoundingClientRect().left)+78,i.value=((U=d.value)==null?void 0:U.getBoundingClientRect().top)+20)}}function v(B){var T,F,U,D,M;for(d.value=B.target;((T=d.value)==null?void 0:T.tagName)!="BUTTON"&&((F=d.value)==null?void 0:F.tagName)!="button";)d.value=(U=d.value)==null?void 0:U.parentNode;r.value=((D=d.value)==null?void 0:D.getBoundingClientRect().left)+78,i.value=((M=d.value)==null?void 0:M.getBoundingClientRect().top)+20,o.value=!0}function _(){d.value=null,o.value=!1}const y=x(!1);function j(){_(),y.value=!0}const I=x(!1);function S(){_(),I.value=!0}const b=x(!1);function N(){_(),b.value=!0}const p=x({}),w=x(""),H=x("");ge(()=>{c(),axios.get("/admin/api/machines").then(function(B){if((B.data.needreauth!=null||B.data.needreauth==!0)&&(h.value=B.data.needreauthreason+"，登录状态失效，请重新登录",a.value=!0,reject()),B.data.errormsg==null||B.data.errormsg===""){H.value=B.data.basedomain;for(var T in B.data.mlist)if(B.data.mlist[T].mipv4===l.params.mip){p.value=B.data.mlist[T],w.value=T;let F=p.value.expirydesc.slice(-2);p.value.expirydesc=="马上就要过期"||F=="分钟"||F=="小时"||F=="1天"?p.value.soonexpiry=!0:p.value.soonexpiry=!1;break}}}).catch(function(B){alert(B)}).then(function(){})});function te(){_(),axios.post("/admin/api/machines",{mid:w.value,state:"set-expires"}).then(function(B){B.data.status=="success"?(p.value.neverExpires=B.data.data.neverExpires,p.value.expirydesc=B.data.data.expires,B.data.data.neverExpires==!0?h.value="已禁用密钥过期":h.value="已启用密钥过期",a.value=!0):(h.value="失败："+B.data.status.substring(6),a.value=!0)}).catch(function(B){console.log(B)})}function ke(){axios.post("/admin/api/machine/remove",{mid:w}).then(function(B){B.data.status=="OK"?(y.value=!1,h.value=p.value.name+"已从您的蜃境网络移除！",a.value=!0,n.push("/machines")):alert("失败："+B.data.errmsg)}).catch(function(B){console.log(B)})}function $e(B,T,F){p.value.name=B,p.value.automaticNameMode=T,we(()=>{I.value=!F,we(()=>{h.value="已更新设备名称！",a.value=!0})})}function Ce(B){h.value="更新设备名称失败！",a.value=!0}function Se(B,T,F,U){p.value.advertisedIPs=B,p.value.allowedIPs=T,p.value.extraIPs=F,p.value.allowedExitNode=U,we(()=>{h.value="已更新子网转发设置！",a.value=!0})}function ve(B){h.value="更新子网转发设置失败！",a.value=!0}return(B,T)=>{const F=He("router-link");return u(),m(X,null,[e("main",Sl,[e("section",El,[e("header",Pl,[e("div",Rl,[ae(F,{to:"/machines",class:"text-blue-500"},{default:de(()=>[V("全部设备")]),_:1}),Ml,e("span",null,$(p.value.mipv4),1)]),e("div",Nl,[e("h1",jl,$(p.value.name),1),e("div",Il,[e("div",Bl,[e("button",{onClick:T[0]||(T[0]=U=>v(U)),class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 min-w-0"},Ol)])])]),e("div",Dl,[e("div",Ll,[Ul,e("div",Tl,[e("div",zl,[e("div",Hl,[e("div",Vl,$(p.value.usernamehead),1)]),e("span",Gl,$(p.value.useraccount),1)])])]),K(f)?(u(),m("div",Kl,[ql,e("div",null,[p.value.issharedin?(u(),m("span",Fl,Ql)):k("",!0),p.value.issharedout?(u(),m("span",Xl,Zl)):k("",!0),p.value.expirydesc=="已过期"?(u(),m("span",Jl,ti)):k("",!0),p.value.neverExpires?(u(),m("span",si,oi)):k("",!0),p.value.soonexpiry?(u(),m("span",ai,[e("div",li,$(p.value.expirydesc),1)])):k("",!0),p.value.hasSubnets?(u(),m("span",ii,[e("div",ri,[V(" 子网转发 "),p.value.hasSubnets&&p.value.extraIPs&&p.value.extraIPs.length>0?(u(),m("div",di,ui)):k("",!0)])])):k("",!0),p.value.advertisedExitNode?(u(),m("span",hi,[e("div",vi,[V(" 出口节点 "),p.value.allowedExitNode?k("",!0):(u(),m("div",mi,pi))])])):k("",!0)])])):k("",!0)])]),e("section",gi,[e("header",bi,[_i,p.value.hasSubnets?(u(),m("div",xi,[e("button",{onClick:N,class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 mt-2"}," 配置 ")])):k("",!0)]),p.value.hasSubnets?(u(),m("div",yi,[e("ul",wi,[(u(!0),m(X,null,ie(p.value.allowedIPs,U=>(u(),m("li",null,[e("span",null,$(U),1)]))),256)),(u(!0),m(X,null,ie(p.value.extraIPs,U=>(u(),m(X,null,[e("li",ki,[e("span",null,$(U),1)]),$i],64))),256))])])):k("",!0),!p.value.hasSubnets&&!p.value.issharedin?(u(),m("div",Ci,Ei)):k("",!0),p.value.issharedin?(u(),m("div",Pi,Mi)):k("",!0)]),e("section",Ni,[ji,e("div",Ii,[e("div",Bi,[e("dl",Ai,[Oi,e("dd",Di,$(p.value.useraccount),1)]),e("dl",Li,[Ui,e("dd",Ti,[e("div",zi,[e("div",Hi,$(p.value.name),1),s.value?(u(),m("div",Vi,"复制")):k("",!0)])])]),e("dl",Gi,[Ki,e("dd",qi,[e("div",Fi,[e("div",Wi,$(p.value.name)+"."+$(p.value.useraccount)+"."+$(H.value),1),s.value?(u(),m("div",Qi,"复制")):k("",!0)])])]),e("dl",Xi,[Yi,e("dd",Zi,$(p.value.hostname),1)]),e("dl",Ji,[er,e("dd",tr,$(p.value.os),1)]),e("dl",sr,[nr,e("dd",or,[e("div",ar,$(p.value.version),1)])]),e("dl",lr,[ir,e("dd",rr,[e("div",dr,[e("div",cr,[e("span",null,$(p.value.mipv4),1)]),s.value?(u(),m("div",ur,"复制")):k("",!0)])])]),e("dl",hr,[vr,e("dd",mr,[e("div",fr,[e("div",pr,[e("span",gr,[e("span",br,$(p.value.mipv6),1)])]),s.value?(u(),m("div",_r,"复制")):k("",!0)])])]),e("dl",xr,[yr,e("dd",wr,$(w.value),1)]),e("dl",kr,[$r,e("dd",Cr,[e("ul",Sr,[(u(!0),m(X,null,ie(p.value.endpoints,U=>(u(),m("li",Er,[e("span",null,$(U),1)]))),256))])])]),e("dl",Pr,[Rr,e("dd",Mr,[p.value.usederp=="x"?(u(),m("ul",Nr,Ir)):(u(),m("ul",Br,[(u(!0),m(X,null,ie(p.value.derps,(U,D)=>(u(),m("li",null,[e("strong",Ar,$(D)+" 号中继",1),V(": "+$(U)+" ms ",1),p.value.usederp==D?(u(),m("svg",Or,Lr)):k("",!0)]))),256))]))])])]),e("div",Ur,[e("dl",Tr,[zr,e("dd",Hr,$(p.value.createat),1)]),e("dl",Vr,[Gr,e("dd",Kr,$(p.value.lastseen),1)]),e("dl",qr,[Fr,p.value.neverExpires?(u(),m("dd",Wr," 永不过期 ")):k("",!0),p.value.neverExpires?k("",!0):(u(),m("dd",Qr,$(p.value.expirydesc),1))]),Xr,e("dl",Yr,[Zr,p.value.varies?(u(),m("dd",Jr,"是")):(u(),m("dd",ed,"否"))]),e("dl",td,[sd,p.value.hairpinning?(u(),m("dd",nd,"是")):(u(),m("dd",od,"否"))]),e("dl",ad,[ld,p.value.ipv6en?(u(),m("dd",id,"是")):(u(),m("dd",rd,"否"))]),e("dl",dd,[cd,p.value.udpen?(u(),m("dd",ud,"是")):(u(),m("dd",hd,"否"))]),e("dl",vd,[md,p.value.upnpen?(u(),m("dd",fd,"是")):(u(),m("dd",pd,"否"))]),e("dl",gd,[bd,p.value.pcpen?(u(),m("dd",_d,"是")):(u(),m("dd",xd,"否"))]),e("dl",yd,[wd,p.value.pmpen?(u(),m("dd",kd,"是")):(u(),m("dd",$d,"否"))])])])])])]),(u(),W(fe,{to:".toast-container"},[ae(ot,{show:a.value,msg:h.value,onClose:T[1]||(T[1]=U=>a.value=!1)},null,8,["show","msg"])])),(u(),W(fe,{to:"body"},[o.value?(u(),W(Gt,{key:0,toleft:r.value,totop:i.value,neverExpires:p.value.neverExpires,onClose:_,onSetExpires:te,onShowdialogRemove:j,onShowdialogUpdatehostname:S,onShowdialogSetsubnet:N},null,8,["toleft","totop","neverExpires"])):k("",!0)])),(u(),W(fe,{to:"body"},[y.value?(u(),W(Kt,{key:0,"machine-name":p.value.name,onClose:T[2]||(T[2]=U=>y.value=!1),onConfirm:ke},null,8,["machine-name"])):k("",!0),I.value?(u(),W(qt,{key:1,id:w.value,"host-name":p.value.hostname,"given-name":p.value.name,"auto-gen":p.value.automaticNameMode,onClose:T[3]||(T[3]=U=>I.value=!1),onUpdateDone:$e,onUpdateFail:Ce},null,8,["id","host-name","given-name","auto-gen"])):k("",!0),b.value?(u(),W(Ft,{key:2,id:w.value,"current-machine":p.value,onClose:T[4]||(T[4]=U=>b.value=!1),onUpdateDone:Se,onUpdateFail:ve},null,8,["id","current-machine"])):k("",!0)]))],64)}}},Sd=je(Cd,[["__scopeId","data-v-2820c8a8"]]);const le=t=>(Ie("data-v-c64092e7"),t=t(),Be(),t),Ed={class:"container mx-auto pb-20 md:pb-24"},Pd={class:"mb-24"},Rd=le(()=>e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2",tabindex:"-1"},"DNS")])])],-1)),Md={class:"mb-16 max-w-2xl"},Nd=le(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},"蜃境网域"),e("p",{class:"text-gray-600"},"这个名称用来注册DNS条目、分享设备给其他蜃境网域以及发放TLS证书")],-1)),jd={class:"max-w-sm"},Id={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0"},Bd=["value"],Ad={class:"mb-16 max-w-2xl"},Od=le(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},"幻域"),e("p",{class:"text-gray-600"},"自动为您蜃境网域中的设备注册域名，令您从而可以使用名称替代IP地址访问设备")],-1)),Dd={key:0,class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit"},Ld={key:1,class:"btn border-0 bg-blue-500 hover:bg-blue-900 text-white h-9 min-h-fit"},Ud={class:"mb-16 max-w-2xl"},Td=le(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},"域名服务器"),e("p",{class:"text-gray-600"},"设置您网络中设备可用来解析DNS的域名服务器")],-1)),zd={class:"text-gray-900"},Hd={key:0,class:"py-3"},Vd={class:"flex mb-1"},Gd={class:"font-medium text-gray-600 mr-2 mb-1"},Kd=be('<div class="space-x-2 mb-1" data-v-c64092e7><div class="inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs relative -top-px" data-v-c64092e7><svg width="0.9em" height="0.9em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-1" data-v-c64092e7><path d="M6.5 12.5L8.05719 15.9428L11.5 17.5L8.05719 19.0572L6.5 22.5L4.94281 19.0572L1.5 17.5L4.94281 15.9428L6.5 12.5Z" fill="currentColor" data-v-c64092e7></path><path d="M15.5 1L17.8358 6.16421L23 8.5L17.8358 10.8358L15.5 16L13.1642 10.8358L8 8.5L13.1642 6.16421L15.5 1Z" fill="currentColor" data-v-c64092e7></path></svg><span data-v-c64092e7>幻域</span></div></div>',1),qd={class:"border border-gray-200 bg-white rounded-md divide-y overflow-hidden"},Fd={class:"flex justify-between select-none"},Wd=le(()=>e("div",{class:"pl-4 flex flex-1 items-start"},[e("div",{class:"tabular-nums pr-2 py-2 w-full"},"100.100.100.100")],-1)),Qd={class:"p-2 pr-4 flex items-center justify-center"},Xd={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400",style:{transform:"translateX(0.125rem) scale(0.75)"}},Yd=le(()=>e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},null,-1)),Zd=le(()=>e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)),Jd=[Yd,Zd],ec={"data-rbd-droppable-id":"search-domains","data-rbd-droppable-context-id":"0"},tc={class:"DNSDomainGroup py-3 -mx-3 px-3 rounded-md","data-rbd-draggable-context-id":"0","data-rbd-draggable-id":"abc.com"},sc={class:"flex items-center mb-1",tabindex:"0",role:"button","aria-describedby":"rbd-hidden-text-0-hidden-text-0","data-rbd-drag-handle-draggable-id":"abc.com","data-rbd-drag-handle-context-id":"0",draggable:"false"},nc=be('<div class="py-1 px-2 -ml-2" data-v-c64092e7><svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" class="relative -top-px text-gray-400" data-v-c64092e7><circle cx="12" cy="12" r="10" data-v-c64092e7></circle><line x1="2" y1="12" x2="22" y2="12" data-v-c64092e7></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" data-v-c64092e7></path></svg></div>',1),oc={class:"font-medium mb-1 mr-2 text-gray-600"},ac=be('<div class="space-x-2 mb-1" data-v-c64092e7><span data-state="closed" data-v-c64092e7><div class="inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs" data-v-c64092e7><svg xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1" data-v-c64092e7><polyline points="16 3 21 3 21 8" data-v-c64092e7></polyline><line x1="4" y1="20" x2="21" y2="3" data-v-c64092e7></line><polyline points="21 16 21 21 16 21" data-v-c64092e7></polyline><line x1="15" y1="15" x2="21" y2="21" data-v-c64092e7></line><line x1="4" y1="4" x2="9" y2="9" data-v-c64092e7></line></svg>分离 DNS </div></span></div>',1),lc={class:"border border-gray-200 bg-white rounded-md divide-y overflow-hidden"},ic={class:"transition-shadow -mb-px flex justify-between select-none"},rc={class:"pl-4 flex flex-1 items-start"},dc={class:"tabular-nums pr-2 py-2 w-full"},cc=be('<div class="pr-2 pt-1.5" data-v-c64092e7><button type="button" id="radix-:r19:" aria-haspopup="menu" aria-expanded="false" data-state="closed" class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 group-hover:border-gray-300/100 hover:border-gray-300/100 group-hover:bg-white hover:!bg-gray-0 group-hover:shadow-md hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-50" data-v-c64092e7><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Actions…" class="text-gray-500" data-v-c64092e7><circle cx="12" cy="12" r="1" data-v-c64092e7></circle><circle cx="19" cy="12" r="1" data-v-c64092e7></circle><circle cx="5" cy="12" r="1" data-v-c64092e7></circle></svg></button></div>',1),uc={class:"pt-3"},hc={class:"flex items-center mb-2"},vc=le(()=>e("h4",{class:"font-medium text-gray-600 mr-2"},"全球域名服务器",-1)),mc={class:"flex items-center space-x-2 ml-auto"},fc=le(()=>e("label",{class:"flex items-center cursor-pointer text-sm font-medium select-none space-x-1 text-gray-500",for:"fallback"},[e("span",null,"覆盖本地 DNS")],-1)),pc={class:"border border-gray-200 bg-white rounded-md divide-y overflow-hidden"},gc={key:0,class:"-mb-px flex justify-between select-none"},bc=le(()=>e("div",{class:"pl-4 flex flex-1 items-start text-gray-400"},[e("div",{class:"tabular-nums pr-2 py-2 w-full"},"本地 DNS 设置")],-1)),_c={class:"p-2 pr-4 flex items-center justify-center"},xc={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400",style:{transform:"translateX(0.125rem) scale(0.75)"}},yc=le(()=>e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},null,-1)),wc=le(()=>e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)),kc=[yc,wc],$c={class:"transition-shadow -mb-px flex justify-between select-none"},Cc={class:"pl-4 flex flex-1 items-start"},Sc={class:"tabular-nums pr-2 py-2 w-full"},Ec=be('<div class="pr-2 pt-1.5" data-v-c64092e7><button type="button" id="radix-:r26:" aria-haspopup="menu" aria-expanded="false" data-state="closed" class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 group-hover:border-gray-300/100 hover:border-gray-300/100 group-hover:bg-white hover:!bg-gray-0 group-hover:shadow-md hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-50" data-v-c64092e7><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Actions…" class="text-gray-500" data-v-c64092e7><circle cx="12" cy="12" r="1" data-v-c64092e7></circle><circle cx="19" cy="12" r="1" data-v-c64092e7></circle><circle cx="5" cy="12" r="1" data-v-c64092e7></circle></svg></button></div>',1),Pc=le(()=>e("button",{class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit mt-8"},[V(" 添加域名服务器 "),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.2","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1)),Rc={key:0,class:"mb-16 max-w-2xl"},Mc=le(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},[V("HTTPS 证书"),e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-yellow-50 bg-yellow-50 text-yellow-600 rounded-full px-2 py-1 leading-none relative text-sm ml-2 -top-px"}," Unavailable")]),e("p",{class:"text-gray-600"},"允许用户为他们的设备生辰HTTPS证书")],-1)),Nc={key:0,class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit"},jc={__name:"DNS",setup(t){const s=x("true"),n=x(""),l=x([]),a=x([]),h=x({}),f=x(!1),d=x(!1),r=x("复制");function i(){navigator.clipboard.writeText(n.value).then(function(){r.value="已复制!",setTimeout(()=>{r.value="复制"},3e3)})}return ge(()=>{axios.get("/admin/api/dns").then(function(o){if(o.data.status=="success"){n.value=o.data.data.magicDNSDomains[0],f.value=o.data.data.magicDNS,d.value=o.data.data.resolvers&&o.data.data.resolvers.length>0,d.value?l.value=o.data.data.resolvers:l.value=o.data.data.fallbackResolvers,a.value=o.data.data.domains;for(var c in o.data.data.routes)h.value[c]=o.data.data.routes[c]}else o.data.status.substring(6)=="用户信息核对失败"}).catch(function(o){alert(o)})}),(o,c)=>(u(),m("main",Ed,[e("section",Pd,[Rd,e("section",Md,[Nd,e("div",jd,[e("div",Id,[e("input",{onclick:"this.select()",class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:n.value},null,8,Bd),e("button",{onClick:i,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},$(r.value),1)])]),e("button",{disabled:"",onClick:c[0]||(c[0]=v=>o.$emit("")),class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit mt-8"},"网域重命名")]),e("section",Ad,[Od,f.value?(u(),m("button",Dd,"停用幻域…")):k("",!0),f.value?k("",!0):(u(),m("button",Ld,"启用幻域"))]),e("section",Ud,[Td,e("div",zd,[f.value?(u(),m("div",Hd,[e("header",Vd,[e("h4",Gd,$(n.value),1),Kd]),e("div",qd,[e("div",Fd,[Wd,e("div",Qd,[(u(),m("svg",Xd,Jd))])])])])):k("",!0),e("div",ec,[(u(!0),m(X,null,ie(a.value,v=>(u(),m("div",tc,[e("header",sc,[nc,e("h4",oc,$(v),1),ac]),(u(!0),m(X,null,ie(h.value[v],_=>(u(),m("div",lc,[e("div",ic,[e("div",rc,[e("div",dc,$(_),1)]),cc])]))),256))]))),256))]),e("div",uc,[e("header",hc,[vc,e("div",mc,[fc,ce(e("input",{"onUpdate:modelValue":c[1]||(c[1]=v=>d.value=v),id:"fallback",ref:"fallback",type:"checkbox",class:"toggle toggle-xs"},null,512),[[Ue,d.value]])])]),e("div",pc,[d.value?k("",!0):(u(),m("div",gc,[bc,e("div",_c,[(u(),m("svg",xc,kc))])])),(u(!0),m(X,null,ie(l.value,v=>(u(),m("div",$c,[e("div",Cc,[e("div",Sc,$(v),1)]),Ec]))),256))])])]),Pc]),s.value?k("",!0):(u(),m("section",Rc,[Mc,(u(),m("button",Nc,"停用HTTPS证书…")),k("",!0)]))])]))}},Ic=je(jc,[["__scopeId","data-v-c64092e7"]]),Bc={class:"flex-1"},Ac=e("div",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"},[e("h1",{class:"mr-2",tabindex:"-1"},"通用")],-1),Oc=e("div",{class:"text-gray-600 mt-3 mb-10"},[e("p",null,"管理您的蜃境网络配置")],-1),Dc={class:"mt-10"},Lc={class:"space-y-10"},Uc=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"机构"),e("p",{class:"mt-1 text-gray-600"}," 这是您所属机构名称（个人用户显示您的账户），无法修改！ ")],-1),Tc={class:"mt-4"},zc={class:"max-w-sm"},Hc={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0"},Vc=["value"],Gc=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"密钥过期"),e("p",{class:"mt-1 text-gray-600"}," 设置设备可以保持登录蜃境网络而不需重新登录认证的天数 ")],-1),Kc={class:"mt-4"},qc={class:"flex"},Fc={class:"relative"},Wc={class:"bg-white top-1 bottom-1 right-1 rounded-r-md absolute flex items-center"},Qc={class:"flex items-center"},Xc=["disabled"],Yc=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),Zc=[Yc],Jc=["disabled"],eu=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),tu=[eu],su=e("div",{class:"flex items-center px-3 bg-gray-50 text-gray-500 border rounded-r border-l-0 border-gray-300"}," 天 ",-1),nu=e("p",{class:"text-sm text-gray-500 mt-1"},"请设置为1~180天",-1),ou={class:"mt-4"},au=["disabled"],lu=["disabled"],iu={class:"mt-8"},ru=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"注销蜃境"),e("p",{class:"mt-1 text-gray-600"}," 永久注销蜃境网络（删除所有设备及用户信息），无法恢复！ ")],-1),du={class:"mt-4"},cu=["disabled"],Le={__name:"General",setup(t){const s=x(!0),n=x(!1),l=x("");Re(n,()=>{n.value&&setTimeout(function(){n.value=!1},5e3)});const a=x(""),h=x(""),f=x(""),d=x(""),r=x(""),i=x(180),o=x(180),c=x(!1),v=x(!1),_=x(!1),y=x("复制");function j(){navigator.clipboard.writeText(r.value).then(function(){y.value="已复制!",setTimeout(()=>{y.value="复制"},3e3)})}function I(){Number(o.value)>1?c.value=!1:c.value=!0,Number(o.value)<180?v.value=!1:v.value=!0,Number(o.value)!=i.value?_.value=!1:_.value=!0}function S(w){o.value=o.value.replace(/[^\d]+/g,"").replace(/^0+(\d)/,"$1"),w&&(o.value==""&&(o.value=i.value),Number(o.value)==0&&(o.value=1),Number(o.value)>180&&(o.value=180)),I()}function b(w){w==!0?o.value=Number(o.value)+1:o.value=Number(o.value)-1,I()}function N(){o.value=i.value,I()}ge(()=>{axios.get("/admin/api/self").then(function(w){(w.data.errormsg==null||w.data.errormsg==="")&&(a.value=w.data.useraccount,h.value=w.data.basedomain,f.value=w.data.username,d.value=w.data.usernamehead,r.value=w.data.orgname)}).catch(function(w){alert(w)}).then(function(){}),axios.get("/admin/api/netsettings").then(function(w){w.data.status=="success"?(i.value=w.data.data.maxKeyDurationDays,o.value=w.data.data.maxKeyDurationDays,I()):w.data.status.substring(6)=="用户信息核对失败"}).catch(function(w){alert(w)}).then(function(){})});function p(){axios.post("/admin/api/netsetting/updatekeyexpiry",{maxKeyDurationDays:Number(o.value)}).then(function(w){w.data.status=="success"?(i.value=w.data.data,I(),l.value="已更新您网络中节点密钥最长有效期！",n.value=!0):(l.value="失败："+w.data.status.substring(6),n.value=!0)}).catch(function(w){console.log(w)})}return(w,H)=>(u(),m(X,null,[e("div",Bc,[Ac,Oc,e("div",Dc,[e("div",Lc,[e("div",null,[Uc,e("div",Tc,[e("div",zc,[e("div",Hc,[e("input",{onclick:"this.select()",class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:r.value},null,8,Vc),e("button",{onClick:j,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},$(y.value),1)])])])]),e("div",null,[Gc,e("div",Kc,[e("div",qc,[e("div",Fc,[ce(e("input",{"onUpdate:modelValue":H[0]||(H[0]=te=>o.value=te),onInput:H[1]||(H[1]=te=>S(!1)),onBlur:H[2]||(H[2]=te=>S(!0)),class:"input z-0 border focus:outline-blue-500/60 hover:border border-stone-200 hover:border-stone-400 rounded-r-none h-9 min-h-fit",inputmode:"numeric",pattern:"[0-9]*",id:"key-expiry-duration",tabindex:"0"},null,544),[[nt,o.value]]),e("div",Wc,[e("div",Qc,[e("button",{onClick:H[3]||(H[3]=te=>b(!1)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:c.value,type:"button",tabindex:"-1"},Zc,8,Xc),e("button",{onClick:H[4]||(H[4]=te=>b(!0)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:v.value,type:"button",tabindex:"-1"},tu,8,Jc)])])]),su]),nu,e("div",ou,[e("button",{onClick:p,class:"btn border-0 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-600/60 text-white disabled:text-white/60 h-9 min-h-fit",disabled:_.value}," 保存 ",8,au),e("button",{onClick:N,class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3",disabled:_.value}," 重置 ",8,lu)])])])]),e("div",iu,[ru,e("div",du,[e("button",{disabled:s.value,class:"btn border-0 bg-red-600 hover:bg-red-700 disabled:bg-red-600/60 disabled:text-white/60 text-white h-9 min-h-fit"}," 注销蜃境… ",8,cu)])])])]),(u(),W(fe,{to:".toast-container"},[ae(ot,{show:n.value,msg:l.value,onClose:H[5]||(H[5]=te=>n.value=!1)},null,8,["show","msg"])]))],64))}};const se=t=>(Ie("data-v-73b20d8a"),t=t(),Be(),t),uu={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",tabindex:"-1",style:{"pointer-events":"auto"}},hu=se(()=>e("header",{class:"flex items-center justify-between space-x-4 mb-5 mr-8"},[e("div",{class:"font-semibold text-lg truncate"},"生成授权密钥")],-1)),vu={key:0},mu={class:"flex justify-between"},fu=se(()=>e("div",null,[e("h4",{class:"font-medium mb-1"},"可重用"),e("p",{class:"text-sm text-gray-500"},"使用此密钥授权多个设备")],-1)),pu={class:"ml-6"},gu=["disabled"],bu={class:"mt-4"},_u=se(()=>e("h4",{class:"font-medium mb-1"},"过期",-1)),xu=se(()=>e("p",{class:"text-sm text-gray-500"},"该授权密钥有效期天数。这个并不会影响使用该密钥授权的设备自身的设备密钥有效期限",-1)),yu={class:"flex mt-4"},wu={class:"relative"},ku=["disabled"],$u={class:"bg-white top-1 bottom-1 right-1 rounded-r-md absolute flex items-center"},Cu={class:"flex items-center"},Su=["disabled"],Eu=se(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)),Pu=[Eu],Ru=["disabled"],Mu=se(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)),Nu=[Mu],ju=se(()=>e("div",{class:"flex items-center px-3 bg-gray-50 text-gray-500 border rounded-r border-l-0 border-gray-300"}," 天 ",-1)),Iu=se(()=>e("p",{class:"text-sm text-gray-500 mt-1"},"必须是1-90天",-1)),Bu=se(()=>e("div",{class:"border-t font-medium text-sm text-gray-500 tracking-wider uppercase mt-6 mb-1 pt-6"},"设备设置 ",-1)),Au=se(()=>e("p",{class:"text-sm text-gray-500 mb-4"},"这些设置将应用于使用该密钥授权的所有设备",-1)),Ou={class:"flex justify-between"},Du=se(()=>e("div",null,[e("h4",{class:"font-medium mb-1"},"自熄"),e("p",{class:"text-sm text-gray-500"},"使用此密钥授权的设备会在离线时被自动从蜃境网络删除")],-1)),Lu={class:"ml-6"},Uu=["disabled"],Tu={class:"flex justify-between mt-4"},zu=se(()=>e("div",null,[e("h4",{class:"font-medium mb-1"},"标签"),e("p",{class:"text-sm text-gray-500"},"使用该密钥授权的设备会自动添加标签。这同时会使该设备自身密钥过期被禁用 ")],-1)),Hu={class:"ml-6"},Vu=["disabled"],Gu={key:0,class:"rounded-md border border-stone-200 mt-4 mb-3 bg-stone-50 p-6"},Ku=se(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"},"未分配标签")],-1)),qu=[Ku],Fu={key:1},Wu=se(()=>e("button",{class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit",disabled:"",type:"button"},[V("添加标签"),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1)),Qu=[Wu],Xu={class:"flex mt-10 justify-end space-x-4"},Yu={key:1},Zu=se(()=>e("p",{class:"text-gray-700 mb-3"},"关闭前请确保您已复制下面新生成的密钥，它之后将不会再次完整展示",-1)),Ju={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0 mb-3 font-mono text-sm"},e0=["value"],t0={class:"flex overflow-hidden rounded-md py-3 px-4 gap-2 text-sm bg-stone-50 text-gray-600 border border-stone-200",role:"alert"},s0=be('<div class="pt-px" data-v-73b20d8a><svg xmlns="http://www.w3.org/2000/svg" width="1.125em" height="1.125em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-73b20d8a><circle cx="12" cy="12" r="10" data-v-73b20d8a></circle><line x1="12" y1="16" x2="12" y2="12" data-v-73b20d8a></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-73b20d8a></line></svg></div>',1),n0={class:"w-full"},o0={class:"flex mt-10 justify-end space-x-4"},a0=se(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),l0=[a0],i0={__name:"GenAuthKey",emits:["added-authkey"],setup(t,{emit:s}){Ae();const n=x(!1),l=x(!1),a=x(!1),h=x(!1),f=x(!1),d=x(90),r=x(!1),i=x(!0);function o(){Number(d.value)>1?r.value=!1:r.value=!0,Number(d.value)<90?i.value=!1:i.value=!0}function c(S){d.value=d.value.replace(/[^\d]+/g,"").replace(/^0+(\d)/,"$1"),S&&(d.value==""&&(d.value=1),Number(d.value)==0&&(d.value=1),Number(d.value)>90&&(d.value=90)),o()}function v(S){S==!0?d.value=Number(d.value)+1:d.value=Number(d.value)-1,o()}function _(){l.value=!0,axios.post("/admin/api/keys",{keyData:{type:"authkey",expirySeconds:Number(d.value*24*3600),authkey:{ephemeral:f.value,reusable:h.value,preauthorized:!1}}}).then(function(S){S.data.status=="success"?(j.value=S.data.data,s("added-authkey"),n.value=!0):console.log(S.data.status)}).catch(function(S){console.log(S)}).then(function(){l.value=!1})}const y=x("复制"),j=x({});function I(){navigator.clipboard.writeText(j.value.fullKey).then(function(){y.value="已复制!",setTimeout(()=>{y.value="复制"},3e3)})}return(S,b)=>(u(),m("div",{onClick:b[11]||(b[11]=he(N=>S.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",uu,[hu,n.value?k("",!0):(u(),m("form",vu,[e("div",mu,[fu,e("div",pu,[ce(e("input",{disabled:l.value,"onUpdate:modelValue":b[0]||(b[0]=N=>h.value=N),type:"checkbox",class:"toggle"},null,8,gu),[[Ue,h.value]])])]),e("div",bu,[_u,xu,e("div",yu,[e("div",wu,[ce(e("input",{disabled:l.value,"onUpdate:modelValue":b[1]||(b[1]=N=>d.value=N),onInput:b[2]||(b[2]=N=>c(!1)),onBlur:b[3]||(b[3]=N=>c(!0)),class:"input z-30 border focus:outline-blue-500/60 hover:border border-stone-200 hover:border-stone-400 rounded-r-none h-9 min-h-fit",inputmode:"numeric",pattern:"[0-9]*",id:"key-expiry-duration",tabindex:"0"},null,40,ku),[[nt,d.value]]),e("div",$u,[e("div",Cu,[e("button",{onClick:b[4]||(b[4]=N=>v(!1)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:r.value,type:"button",tabindex:"-1"},Pu,8,Su),e("button",{onClick:b[5]||(b[5]=N=>v(!0)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:i.value,type:"button",tabindex:"-1"},Nu,8,Ru)])])]),ju]),Iu]),Bu,Au,e("div",Ou,[Du,e("div",Lu,[ce(e("input",{disabled:l.value,"onUpdate:modelValue":b[6]||(b[6]=N=>f.value=N),type:"checkbox",class:"toggle"},null,8,Uu),[[Ue,f.value]])])]),e("div",Tu,[zu,e("div",Hu,[ce(e("input",{disabled:l.value,"onUpdate:modelValue":b[7]||(b[7]=N=>a.value=N),type:"checkbox",class:"toggle"},null,8,Vu),[[Ue,a.value]])])]),a.value?(u(),m("div",Gu,qu)):k("",!0),a.value?(u(),m("span",Fu,Qu)):k("",!0),e("footer",Xu,[e("button",{onClick:b[8]||(b[8]=he(N=>S.$emit("close"),["self"])),class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit"},"取消"),e("button",{onClick:_,class:"btn border-0 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-600/60 text-white disabled:text-white/60 h-9 min-h-fit"},"生成密钥")])])),n.value?(u(),m("form",Yu,[Zu,e("div",Ju,[e("input",{onclick:"this.select()",class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:j.value.fullKey},null,8,e0),e("button",{onClick:I,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},$(y.value),1)]),e("div",t0,[s0,e("div",n0,"该密钥将在 "+$(j.value.expiry.split(" ")[0])+" 过期，之后您要想继续使用授权密钥需要重新生成",1)]),e("footer",o0,[e("button",{onClick:b[9]||(b[9]=he(N=>S.$emit("close"),["self"])),class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit"},"完成")])])):k("",!0),e("button",{onClick:b[10]||(b[10]=N=>S.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},l0)])]))}},r0=je(i0,[["__scopeId","data-v-73b20d8a"]]),d0={class:"flex-1"},c0=be('<div class="text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"><h1 class="mr-2" tabindex="-1">密钥管理</h1></div><div class="text-gray-600 mt-3 mb-10"><p>查看和管理您的<strong>授权密钥</strong>和<strong>API密钥</strong></p><p class="mt-2">您个人设备的私钥<strong>不</strong>在此管理，它们永远是<strong>私有</strong>并存在于您的设备上，<strong>不</strong>向蜃境披露</p></div>',2),u0={class:"mt-10"},h0=e("div",null,[e("h3",{class:"text-xl font-semibold tracking-tight"},"授权密钥"),e("p",{class:"text-gray-600"},"用于无需交互式登录即可实现设备鉴别接入 ")],-1),v0={key:0,class:"rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"},m0=e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"},"你还没有任何密钥")],-1),f0=[m0],p0={key:1,class:"block border box-border rounded-lg mt-4 tb"},g0=e("thead",{class:"block font-semibold tracking-wider text-left text-xs text-stone-500"},[e("tr",{class:"flex border-b border-stone-200 pl-8 pr-4 lg:px-4"},[e("th",{class:"w-36 shrink-0 py-2"},"ID"),e("th",{class:"hidden shrink-0 py-2 lg:block w-40"},"创建日期"),e("th",{class:"hidden shrink-0 py-2 lg:block w-40"},"失效日期"),e("th",{class:"flex-1 shrink-0 py-2 min-w-0"},"类型"),e("th",{class:"w-20 shrink-0 py-2 text-right text-red-400 cursor-pointer pointer-events-auto hover:text-red-600"},[e("span",{class:"sr-only"},"注销密钥")])])],-1),b0={class:"block"},_0=["onClick"],x0={class:"flex shrink-0 py-2 w-36"},y0={class:"w-8 -ml-8 lg:hidden"},w0={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400 w-4 mx-2 group-hover:text-gray-500"},k0=["points"],$0={class:"text-sm truncate leading-6 font-semibold"},C0={class:"hidden shrink-0 py-2 lg:block w-40"},S0={"data-state":"closed"},E0={class:"cursor-default"},P0={class:"hidden shrink-0 py-2 lg:block w-40"},R0={"data-state":"closed"},M0={class:"cursor-default"},N0={class:"flex-1 shrink-0 py-2 min-w-0"},j0={class:"w-20 shrink-0 py-2 text-right text-red-400 cursor-pointer pointer-events-auto hover:text-red-600"},I0=["onClick"],B0={key:0,class:"border-b-0 flex border-stone-200"},A0={class:"shrink-0 p-0"},O0={class:"flex-col px-8 pt-0.5 pb-2 lg:hidden"},D0={class:"flex items-center lg:hidden"},L0=e("p",{class:"w-20 text-sm text-gray-500"},"创建日期",-1),U0={class:"text-sm"},T0={"data-state":"closed"},z0={class:"cursor-default"},H0={class:"flex items-center lg:hidden"},V0=e("p",{class:"w-20 text-sm text-gray-500"},"失效日期",-1),G0={class:"text-sm"},K0={"data-state":"closed"},q0={class:"cursor-default"},F0={class:"flex justify-between items-center mt-16"},W0=e("div",null,[e("h3",{class:"text-xl font-semibold tracking-tight"},"API 密钥"),e("p",{class:"text-gray-600"},"API 密钥用于访问蜃境API.")],-1),Q0=["disabled"],X0=e("div",{class:"rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"},[e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"},"你还没有任何密钥")])],-1),Y0={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},Z0=e("header",{class:"flex items-center justify-between space-x-4 mb-5 mr-8"},[e("div",{class:"font-semibold text-lg truncate"},"注销")],-1),J0=["onSubmit"],eh=e("p",{class:"text-gray-700 mb-4"},[V("注销此密钥"),e("strong",null,"并不会"),V("注销已使用此密钥进行授权的设备，但将阻止之后继续使用此密钥注册新设备。")],-1),th={class:"flex mt-10 justify-end space-x-4"},sh=e("button",{class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit",type:"submit"},"注销密钥",-1),nh=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),oh=[nh],ah={__name:"Keys",setup(t){const s=x(!0),n=x(!1);function l(){n.value=!0}const a=x([]);function h(){axios.get("/admin/api/keys").then(function(o){o.data.status=="success"&&(a.value=o.data.data.authKeys)}).catch(function(o){console.log(o)})}ge(()=>{axios.get("/admin/api/keys").then(function(o){o.data.status=="success"&&(a.value=o.data.data.authKeys)}).catch(function(o){console.log(o)})});const f=x(""),d=x(!1);function r(o){f.value=o,d.value=!0}function i(){axios.delete("/admin/api/keys/"+f.value,{}).then(function(o){if(o.data.status=="success"){var c=[];for(var v in a.value)a.value[v].id!=o.data.data&&c.push(a.value[v]);a.value=c,d.value=!1}else console.log(o.data.status)}).catch(function(o){console.log(o)})}return(o,c)=>(u(),m(X,null,[e("div",d0,[c0,e("div",u0,[e("div",{class:"flex justify-between items-center mt-16"},[h0,e("button",{onClick:l,class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"}," 生成授权密钥…")]),!a.value||a.value.length==0?(u(),m("div",v0,f0)):k("",!0),a.value&&a.value.length>0?(u(),m("table",p0,[g0,e("tbody",b0,[(u(!0),m(X,null,ie(a.value,(v,_)=>(u(),m(X,null,[e("tr",{onClick:y=>v.expand=!v.expand,class:ne([{"border-t":_>0},"group flex border-stone-200 cursor-pointer hover:bg-gray-50 pl-8 pr-4 lg:px-4 lg:cursor-auto border-b-0"])},[e("td",x0,[e("div",y0,[(u(),m("svg",w0,[e("polyline",{points:v.expand?"6 9 12 15 18 9":"9 18 15 12 9 6"},null,8,k0)]))]),e("pre",$0,[e("code",null,$(v.id),1)])]),e("td",C0,[e("span",S0,[e("span",E0,$(v.created.split(" ")[0]),1)])]),e("td",P0,[e("span",R0,[e("span",M0,$(v.expiry.split(" ")[0]),1)])]),e("td",N0,$((v.authkey.reusable==!0?"可重用":"一次性")+(v.authkey.ephemeral==!0?",自熄":"")),1),e("td",j0,[e("button",{onClick:y=>r(v.id),type:"button"},"注销…",8,I0)])],10,_0),v.expand?(u(),m("tr",B0,[e("td",A0,[e("div",O0,[e("div",D0,[L0,e("p",U0,[e("span",T0,[e("span",z0,$(v.created.split(" ")[0]),1)])])]),e("div",H0,[V0,e("p",G0,[e("span",K0,[e("span",q0,$(v.expiry.split(" ")[0]),1)])])])])])])):k("",!0)],64))),256))])])):k("",!0),e("div",F0,[W0,e("button",{disabled:s.value,class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"}," 生成 API 密钥…",8,Q0)]),X0])]),(u(),W(fe,{to:"body"},[n.value?(u(),W(r0,{key:0,onAddedAuthkey:h,onClose:c[0]||(c[0]=v=>n.value=!1)})):k("",!0),d.value?(u(),m("div",{key:1,onClick:c[3]||(c[3]=he(v=>d.value=!1,["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",Y0,[Z0,e("form",{onSubmit:he(i,["prevent"])},[eh,e("footer",th,[e("button",{onClick:c[1]||(c[1]=v=>d.value=!1),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消"),sh])],40,J0),e("button",{onClick:c[2]||(c[2]=v=>d.value=!1),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},oh)])])):k("",!0)]))],64))}},lh={class:"container mx-auto pb-20 md:pb-24"},ih={class:"md:flex md:mt-16"},rh={class:"mb-10 md:mr-20 lg:mr-40"},dh={class:"hidden md:block"},ch={class:"flex flex-row mb-12"},uh=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),hh={class:"ml-4"},vh=e("h2",{class:"text-gray-500 font-medium"},"网络配置",-1),mh={class:"flex flex-row mb-12"},fh=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),ph={class:"ml-4"},gh=e("h2",{class:"text-gray-500 font-medium"},"个人设置",-1),bh={class:"select-with-arrow md:hidden mb-4"},_h=be('<optgroup label="网络配置"><option value="features">敬请期待</option><option value="general">通用</option><option value="webhooks">敬请期待</option><option value="billing">敬请期待</option><option value="contact-preferences">敬请期待</option></optgroup><optgroup label="个人设置"><option value="keys">密钥管理</option></optgroup>',2),xh=[_h],yh={__name:"Settings",setup(t){const s={general:Le,features:Le,webhooks:Le,billing:Le,"contact-preferences":Le,keys:ah},n=dt(),l=rt(),a=x("");function h(f){l.push("/settings/"+f.target.value)}return Xs((f,d)=>{a.value=f.params.setpart}),ge(()=>{a.value=n.params.setpart}),(f,d)=>{const r=He("router-link");return u(),m("main",lh,[e("section",ih,[e("div",rh,[e("div",dh,[e("div",ch,[uh,e("div",hh,[vh,ae(r,{class:ne(["flex font-medium mt-4",{"text-blue-600":a.value=="general","text-gray-700":a.value!="general"}]),to:"/settings/general"},{default:de(()=>[V("通用")]),_:1},8,["class"]),ae(r,{class:ne(["flex font-medium mt-4",{"text-blue-600":a.value=="features","text-gray-700":a.value!="features"}]),to:"/settings/features"},{default:de(()=>[V("敬请期待")]),_:1},8,["class"]),ae(r,{class:ne(["flex font-medium mt-4",{"text-blue-600":a.value=="webhooks","text-gray-700":a.value!="webhooks"}]),to:"/settings/webhooks"},{default:de(()=>[V("敬请期待")]),_:1},8,["class"]),ae(r,{class:ne(["flex font-medium mt-4",{"text-blue-600":a.value=="billing","text-gray-700":a.value!="billing"}]),to:"/settings/billing"},{default:de(()=>[V("敬请期待")]),_:1},8,["class"]),ae(r,{class:ne(["flex font-medium mt-4",{"text-blue-600":a.value=="contact-preferences","text-gray-700":a.value!="contact-preferences"}]),to:"/settings/contact-preferences"},{default:de(()=>[V("敬请期待")]),_:1},8,["class"])])]),e("div",mh,[fh,e("div",ph,[gh,ae(r,{class:ne(["flex font-medium mt-4",{"text-blue-600":a.value=="keys","text-gray-700":a.value!="keys"}]),to:"/settings/keys"},{default:de(()=>[V("密钥管理")]),_:1},8,["class"])])])]),e("div",bh,[ce(e("select",{"onUpdate:modelValue":d[0]||(d[0]=i=>a.value=i),onChange:h,class:"select select-bordered w-full text-lg"},xh,544),[[Yt,a.value,void 0,{lazy:!0}]])])]),(u(),W(Zt(s[a.value])))])])}}},wh=[{path:"/",redirect:"/machines"},{path:"/machines",component:Cl},{path:"/machines/:mip",component:Sd},{path:"/dns",component:Ic},{path:"/settings",redirect:"/settings/general"},{path:"/settings/:setpart",component:yh}],kh=on({history:_s(),routes:wh}),We=Jt(Zn);We.config.errorHandler=t=>{};We.use(es);We.use(kh);We.mount("#app");
