import{s as Ft,u as G,d as W,r as $t,i as he,n as be,e as St,f as Wt,g as Qt,h as Ct,j as Et,p as We,k as y,w as Ee,l as xe,o as u,c as m,m as e,t as S,q as Pt,v as Rt,x as pe,y as q,z as $,A as Z,T as fe,B as ne,C as le,F as te,D as Oe,E as oe,G as Le,_ as Me,H as Mt,I as Nt,J as Ue,K as Te,L as re,a as ge,M as Xt,N as Yt,b as Zt}from"./plugin-vueexport-helper-222d57d8.js";import{u as He,_ as tt,p as Jt}from"./Toast-569f3f13.js";/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Ce=typeof window<"u";function es(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const H=Object.assign;function Qe(t,s){const n={};for(const o in s){const a=s[o];n[o]=ce(a)?a.map(t):t(a)}return n}const Be=()=>{},ce=Array.isArray,ts=/\/$/,ss=t=>t.replace(ts,"");function Xe(t,s,n="/"){let o,a={},c="",g="";const h=s.indexOf("#");let r=s.indexOf("?");return h<r&&h>=0&&(r=-1),r>-1&&(o=s.slice(0,r),c=s.slice(r+1,h>-1?h:s.length),a=t(c)),h>-1&&(o=o||s.slice(0,h),g=s.slice(h,s.length)),o=is(o??s,n),{fullPath:o+(c&&"?")+c+g,path:o,query:a,hash:g}}function ns(t,s){const n=s.query?t(s.query):"";return s.path+(n&&"?")+n+(s.hash||"")}function rt(t,s){return!s||!t.toLowerCase().startsWith(s.toLowerCase())?t:t.slice(s.length)||"/"}function os(t,s,n){const o=s.matched.length-1,a=n.matched.length-1;return o>-1&&o===a&&Pe(s.matched[o],n.matched[a])&&jt(s.params,n.params)&&t(s.query)===t(n.query)&&s.hash===n.hash}function Pe(t,s){return(t.aliasOf||t)===(s.aliasOf||s)}function jt(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(!as(t[n],s[n]))return!1;return!0}function as(t,s){return ce(t)?ct(t,s):ce(s)?ct(s,t):t===s}function ct(t,s){return ce(s)?t.length===s.length&&t.every((n,o)=>n===s[o]):t.length===1&&t[0]===s}function is(t,s){if(t.startsWith("/"))return t;if(!t)return s;const n=s.split("/"),o=t.split("/");let a=n.length-1,c,g;for(c=0;c<o.length;c++)if(g=o[c],g!==".")if(g==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+o.slice(c-(c===o.length?1:0)).join("/")}var De;(function(t){t.pop="pop",t.push="push"})(De||(De={}));var Ae;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ae||(Ae={}));function ls(t){if(!t)if(Ce){const s=document.querySelector("base");t=s&&s.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ss(t)}const rs=/^[^#]+#/;function cs(t,s){return t.replace(rs,"#")+s}function ds(t,s){const n=document.documentElement.getBoundingClientRect(),o=t.getBoundingClientRect();return{behavior:s.behavior,left:o.left-n.left-(s.left||0),top:o.top-n.top-(s.top||0)}}const Ve=()=>({left:window.pageXOffset,top:window.pageYOffset});function us(t){let s;if("el"in t){const n=t.el,o=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;s=ds(a,t)}else s=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(s):window.scrollTo(s.left!=null?s.left:window.pageXOffset,s.top!=null?s.top:window.pageYOffset)}function dt(t,s){return(history.state?history.state.position-s:-1)+t}const Ze=new Map;function hs(t,s){Ze.set(t,s)}function vs(t){const s=Ze.get(t);return Ze.delete(t),s}let ms=()=>location.protocol+"//"+location.host;function It(t,s){const{pathname:n,search:o,hash:a}=s,c=t.indexOf("#");if(c>-1){let h=a.includes(t.slice(c))?t.slice(c).length:1,r=a.slice(h);return r[0]!=="/"&&(r="/"+r),rt(r,"")}return rt(n,t)+o+a}function fs(t,s,n,o){let a=[],c=[],g=null;const h=({state:v})=>{const _=It(t,location),b=n.value,N=s.value;let I=0;if(v){if(n.value=_,s.value=v,g&&g===b){g=null;return}I=N?v.position-N.position:0}else o(_);a.forEach(R=>{R(n.value,b,{delta:I,type:De.pop,direction:I?I>0?Ae.forward:Ae.back:Ae.unknown})})};function r(){g=n.value}function l(v){a.push(v);const _=()=>{const b=a.indexOf(v);b>-1&&a.splice(b,1)};return c.push(_),_}function i(){const{history:v}=window;v.state&&v.replaceState(H({},v.state,{scroll:Ve()}),"")}function d(){for(const v of c)v();c=[],window.removeEventListener("popstate",h),window.removeEventListener("beforeunload",i)}return window.addEventListener("popstate",h),window.addEventListener("beforeunload",i),{pauseListeners:r,listen:l,destroy:d}}function ut(t,s,n,o=!1,a=!1){return{back:t,current:s,forward:n,replaced:o,position:window.history.length,scroll:a?Ve():null}}function ps(t){const{history:s,location:n}=window,o={value:It(t,n)},a={value:s.state};a.value||c(o.value,{back:null,current:o.value,forward:null,position:s.length-1,replaced:!0,scroll:null},!0);function c(r,l,i){const d=t.indexOf("#"),v=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+r:ms()+t+r;try{s[i?"replaceState":"pushState"](l,"",v),a.value=l}catch(_){console.error(_),n[i?"replace":"assign"](v)}}function g(r,l){const i=H({},s.state,ut(a.value.back,r,a.value.forward,!0),l,{position:a.value.position});c(r,i,!0),o.value=r}function h(r,l){const i=H({},a.value,s.state,{forward:r,scroll:Ve()});c(i.current,i,!0);const d=H({},ut(o.value,r,null),{position:i.position+1},l);c(r,d,!1),o.value=r}return{location:o,state:a,push:h,replace:g}}function gs(t){t=ls(t);const s=ps(t),n=fs(t,s.state,s.location,s.replace);function o(c,g=!0){g||n.pauseListeners(),history.go(c)}const a=H({location:"",base:t,go:o,createHref:cs.bind(null,t)},s,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>s.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>s.state.value}),a}function _s(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),gs(t)}function bs(t){return typeof t=="string"||t&&typeof t=="object"}function Bt(t){return typeof t=="string"||typeof t=="symbol"}const ve={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},At=Symbol("");var ht;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(ht||(ht={}));function Re(t,s){return H(new Error,{type:t,[At]:!0},s)}function ue(t,s){return t instanceof Error&&At in t&&(s==null||!!(t.type&s))}const vt="[^/]+?",xs={sensitive:!1,strict:!1,start:!0,end:!0},ys=/[.+*?^${}()[\]/\\]/g;function ws(t,s){const n=H({},xs,s),o=[];let a=n.start?"^":"";const c=[];for(const l of t){const i=l.length?[]:[90];n.strict&&!l.length&&(a+="/");for(let d=0;d<l.length;d++){const v=l[d];let _=40+(n.sensitive?.25:0);if(v.type===0)d||(a+="/"),a+=v.value.replace(ys,"\\$&"),_+=40;else if(v.type===1){const{value:b,repeatable:N,optional:I,regexp:R}=v;c.push({name:b,repeatable:N,optional:I});const x=R||vt;if(x!==vt){_+=10;try{new RegExp(`(${x})`)}catch(f){throw new Error(`Invalid custom RegExp for param "${b}" (${x}): `+f.message)}}let U=N?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(U=I&&l.length<2?`(?:/${U})`:"/"+U),I&&(U+="?"),a+=U,_+=20,I&&(_+=-8),N&&(_+=-20),x===".*"&&(_+=-50)}i.push(_)}o.push(i)}if(n.strict&&n.end){const l=o.length-1;o[l][o[l].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&(a+="(?:/|$)");const g=new RegExp(a,n.sensitive?"":"i");function h(l){const i=l.match(g),d={};if(!i)return null;for(let v=1;v<i.length;v++){const _=i[v]||"",b=c[v-1];d[b.name]=_&&b.repeatable?_.split("/"):_}return d}function r(l){let i="",d=!1;for(const v of t){(!d||!i.endsWith("/"))&&(i+="/"),d=!1;for(const _ of v)if(_.type===0)i+=_.value;else if(_.type===1){const{value:b,repeatable:N,optional:I}=_,R=b in l?l[b]:"";if(ce(R)&&!N)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const x=ce(R)?R.join("/"):R;if(!x)if(I)v.length<2&&(i.endsWith("/")?i=i.slice(0,-1):d=!0);else throw new Error(`Missing required param "${b}"`);i+=x}}return i||"/"}return{re:g,score:o,keys:c,parse:h,stringify:r}}function ks(t,s){let n=0;for(;n<t.length&&n<s.length;){const o=s[n]-t[n];if(o)return o;n++}return t.length<s.length?t.length===1&&t[0]===40+40?-1:1:t.length>s.length?s.length===1&&s[0]===40+40?1:-1:0}function $s(t,s){let n=0;const o=t.score,a=s.score;for(;n<o.length&&n<a.length;){const c=ks(o[n],a[n]);if(c)return c;n++}if(Math.abs(a.length-o.length)===1){if(mt(o))return 1;if(mt(a))return-1}return a.length-o.length}function mt(t){const s=t[t.length-1];return t.length>0&&s[s.length-1]<0}const Ss={type:0,value:""},Cs=/[a-zA-Z0-9_]/;function Es(t){if(!t)return[[]];if(t==="/")return[[Ss]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function s(_){throw new Error(`ERR (${n})/"${l}": ${_}`)}let n=0,o=n;const a=[];let c;function g(){c&&a.push(c),c=[]}let h=0,r,l="",i="";function d(){l&&(n===0?c.push({type:0,value:l}):n===1||n===2||n===3?(c.length>1&&(r==="*"||r==="+")&&s(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),c.push({type:1,value:l,regexp:i,repeatable:r==="*"||r==="+",optional:r==="*"||r==="?"})):s("Invalid state to consume buffer"),l="")}function v(){l+=r}for(;h<t.length;){if(r=t[h++],r==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:r==="/"?(l&&d(),g()):r===":"?(d(),n=1):v();break;case 4:v(),n=o;break;case 1:r==="("?n=2:Cs.test(r)?v():(d(),n=0,r!=="*"&&r!=="?"&&r!=="+"&&h--);break;case 2:r===")"?i[i.length-1]=="\\"?i=i.slice(0,-1)+r:n=3:i+=r;break;case 3:d(),n=0,r!=="*"&&r!=="?"&&r!=="+"&&h--,i="";break;default:s("Unknown state");break}}return n===2&&s(`Unfinished custom RegExp for param "${l}"`),d(),g(),a}function Ps(t,s,n){const o=ws(Es(t.path),n),a=H(o,{record:t,parent:s,children:[],alias:[]});return s&&!a.record.aliasOf==!s.record.aliasOf&&s.children.push(a),a}function Rs(t,s){const n=[],o=new Map;s=gt({strict:!1,end:!0,sensitive:!1},s);function a(i){return o.get(i)}function c(i,d,v){const _=!v,b=Ms(i);b.aliasOf=v&&v.record;const N=gt(s,i),I=[b];if("alias"in i){const U=typeof i.alias=="string"?[i.alias]:i.alias;for(const f of U)I.push(H({},b,{components:v?v.record.components:b.components,path:f,aliasOf:v?v.record:b}))}let R,x;for(const U of I){const{path:f}=U;if(d&&f[0]!=="/"){const w=d.record.path,z=w[w.length-1]==="/"?"":"/";U.path=d.record.path+(f&&z+f)}if(R=Ps(U,d,N),v?v.alias.push(R):(x=x||R,x!==R&&x.alias.push(R),_&&i.name&&!pt(R)&&g(i.name)),b.children){const w=b.children;for(let z=0;z<w.length;z++)c(w[z],R,v&&v.children[z])}v=v||R,(R.record.components&&Object.keys(R.record.components).length||R.record.name||R.record.redirect)&&r(R)}return x?()=>{g(x)}:Be}function g(i){if(Bt(i)){const d=o.get(i);d&&(o.delete(i),n.splice(n.indexOf(d),1),d.children.forEach(g),d.alias.forEach(g))}else{const d=n.indexOf(i);d>-1&&(n.splice(d,1),i.record.name&&o.delete(i.record.name),i.children.forEach(g),i.alias.forEach(g))}}function h(){return n}function r(i){let d=0;for(;d<n.length&&$s(i,n[d])>=0&&(i.record.path!==n[d].record.path||!Ot(i,n[d]));)d++;n.splice(d,0,i),i.record.name&&!pt(i)&&o.set(i.record.name,i)}function l(i,d){let v,_={},b,N;if("name"in i&&i.name){if(v=o.get(i.name),!v)throw Re(1,{location:i});N=v.record.name,_=H(ft(d.params,v.keys.filter(x=>!x.optional).map(x=>x.name)),i.params&&ft(i.params,v.keys.map(x=>x.name))),b=v.stringify(_)}else if("path"in i)b=i.path,v=n.find(x=>x.re.test(b)),v&&(_=v.parse(b),N=v.record.name);else{if(v=d.name?o.get(d.name):n.find(x=>x.re.test(d.path)),!v)throw Re(1,{location:i,currentLocation:d});N=v.record.name,_=H({},d.params,i.params),b=v.stringify(_)}const I=[];let R=v;for(;R;)I.unshift(R.record),R=R.parent;return{name:N,path:b,params:_,matched:I,meta:js(I)}}return t.forEach(i=>c(i)),{addRoute:c,resolve:l,removeRoute:g,getRoutes:h,getRecordMatcher:a}}function ft(t,s){const n={};for(const o of s)o in t&&(n[o]=t[o]);return n}function Ms(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Ns(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Ns(t){const s={},n=t.props||!1;if("component"in t)s.default=n;else for(const o in t.components)s[o]=typeof n=="boolean"?n:n[o];return s}function pt(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function js(t){return t.reduce((s,n)=>H(s,n.meta),{})}function gt(t,s){const n={};for(const o in t)n[o]=o in s?s[o]:t[o];return n}function Ot(t,s){return s.children.some(n=>n===t||Ot(t,n))}const Lt=/#/g,Is=/&/g,Bs=/\//g,As=/=/g,Os=/\?/g,Dt=/\+/g,Ls=/%5B/g,Ds=/%5D/g,Ut=/%5E/g,Us=/%60/g,Tt=/%7B/g,Ts=/%7C/g,Ht=/%7D/g,Hs=/%20/g;function st(t){return encodeURI(""+t).replace(Ts,"|").replace(Ls,"[").replace(Ds,"]")}function zs(t){return st(t).replace(Tt,"{").replace(Ht,"}").replace(Ut,"^")}function Je(t){return st(t).replace(Dt,"%2B").replace(Hs,"+").replace(Lt,"%23").replace(Is,"%26").replace(Us,"`").replace(Tt,"{").replace(Ht,"}").replace(Ut,"^")}function Vs(t){return Je(t).replace(As,"%3D")}function Gs(t){return st(t).replace(Lt,"%23").replace(Os,"%3F")}function Ks(t){return t==null?"":Gs(t).replace(Bs,"%2F")}function ze(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function qs(t){const s={};if(t===""||t==="?")return s;const o=(t[0]==="?"?t.slice(1):t).split("&");for(let a=0;a<o.length;++a){const c=o[a].replace(Dt," "),g=c.indexOf("="),h=ze(g<0?c:c.slice(0,g)),r=g<0?null:ze(c.slice(g+1));if(h in s){let l=s[h];ce(l)||(l=s[h]=[l]),l.push(r)}else s[h]=r}return s}function _t(t){let s="";for(let n in t){const o=t[n];if(n=Vs(n),o==null){o!==void 0&&(s+=(s.length?"&":"")+n);continue}(ce(o)?o.map(c=>c&&Je(c)):[o&&Je(o)]).forEach(c=>{c!==void 0&&(s+=(s.length?"&":"")+n,c!=null&&(s+="="+c))})}return s}function Fs(t){const s={};for(const n in t){const o=t[n];o!==void 0&&(s[n]=ce(o)?o.map(a=>a==null?null:""+a):o==null?o:""+o)}return s}const nt=Symbol(""),bt=Symbol(""),Ge=Symbol(""),ot=Symbol(""),et=Symbol("");function je(){let t=[];function s(o){return t.push(o),()=>{const a=t.indexOf(o);a>-1&&t.splice(a,1)}}function n(){t=[]}return{add:s,list:()=>t,reset:n}}function zt(t,s,n){const o=()=>{t[s].delete(n)};St(o),Wt(o),Qt(()=>{t[s].add(n)}),t[s].add(n)}function Ws(t){const s=he(nt,{}).value;s&&zt(s,"leaveGuards",t)}function Qs(t){const s=he(nt,{}).value;s&&zt(s,"updateGuards",t)}function me(t,s,n,o,a){const c=o&&(o.enterCallbacks[a]=o.enterCallbacks[a]||[]);return()=>new Promise((g,h)=>{const r=d=>{d===!1?h(Re(4,{from:n,to:s})):d instanceof Error?h(d):bs(d)?h(Re(2,{from:s,to:d})):(c&&o.enterCallbacks[a]===c&&typeof d=="function"&&c.push(d),g())},l=t.call(o&&o.instances[a],s,n,r);let i=Promise.resolve(l);t.length<3&&(i=i.then(r)),i.catch(d=>h(d))})}function Ye(t,s,n,o){const a=[];for(const c of t)for(const g in c.components){let h=c.components[g];if(!(s!=="beforeRouteEnter"&&!c.instances[g]))if(Xs(h)){const l=(h.__vccOpts||h)[s];l&&a.push(me(l,n,o,c,g))}else{let r=h();a.push(()=>r.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${g}" at "${c.path}"`));const i=es(l)?l.default:l;c.components[g]=i;const v=(i.__vccOpts||i)[s];return v&&me(v,n,o,c,g)()}))}}return a}function Xs(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function xt(t){const s=he(Ge),n=he(ot),o=W(()=>s.resolve(G(t.to))),a=W(()=>{const{matched:r}=o.value,{length:l}=r,i=r[l-1],d=n.matched;if(!i||!d.length)return-1;const v=d.findIndex(Pe.bind(null,i));if(v>-1)return v;const _=yt(r[l-2]);return l>1&&yt(i)===_&&d[d.length-1].path!==_?d.findIndex(Pe.bind(null,r[l-2])):v}),c=W(()=>a.value>-1&&en(n.params,o.value.params)),g=W(()=>a.value>-1&&a.value===n.matched.length-1&&jt(n.params,o.value.params));function h(r={}){return Js(r)?s[G(t.replace)?"replace":"push"](G(t.to)).catch(Be):Promise.resolve()}return{route:o,href:W(()=>o.value.href),isActive:c,isExactActive:g,navigate:h}}const Ys=Ct({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:xt,setup(t,{slots:s}){const n=$t(xt(t)),{options:o}=he(Ge),a=W(()=>({[wt(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[wt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const c=s.default&&s.default(n);return t.custom?c:Et("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},c)}}}),Zs=Ys;function Js(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const s=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return t.preventDefault&&t.preventDefault(),!0}}function en(t,s){for(const n in s){const o=s[n],a=t[n];if(typeof o=="string"){if(o!==a)return!1}else if(!ce(a)||a.length!==o.length||o.some((c,g)=>c!==a[g]))return!1}return!0}function yt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const wt=(t,s,n)=>t??s??n,tn=Ct({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:s,slots:n}){const o=he(et),a=W(()=>t.route||o.value),c=he(bt,0),g=W(()=>{let l=G(c);const{matched:i}=a.value;let d;for(;(d=i[l])&&!d.components;)l++;return l}),h=W(()=>a.value.matched[g.value]);We(bt,W(()=>g.value+1)),We(nt,h),We(et,a);const r=y();return Ee(()=>[r.value,h.value,t.name],([l,i,d],[v,_,b])=>{i&&(i.instances[d]=l,_&&_!==i&&l&&l===v&&(i.leaveGuards.size||(i.leaveGuards=_.leaveGuards),i.updateGuards.size||(i.updateGuards=_.updateGuards))),l&&i&&(!_||!Pe(i,_)||!v)&&(i.enterCallbacks[d]||[]).forEach(N=>N(l))},{flush:"post"}),()=>{const l=a.value,i=t.name,d=h.value,v=d&&d.components[i];if(!v)return kt(n.default,{Component:v,route:l});const _=d.props[i],b=_?_===!0?l.params:typeof _=="function"?_(l):_:null,I=Et(v,H({},b,s,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(d.instances[i]=null)},ref:r}));return kt(n.default,{Component:I,route:l})||I}}});function kt(t,s){if(!t)return null;const n=t(s);return n.length===1?n[0]:n}const sn=tn;function nn(t){const s=Rs(t.routes,t),n=t.parseQuery||qs,o=t.stringifyQuery||_t,a=t.history,c=je(),g=je(),h=je(),r=Ft(ve);let l=ve;Ce&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const i=Qe.bind(null,p=>""+p),d=Qe.bind(null,Ks),v=Qe.bind(null,ze);function _(p,C){let k,P;return Bt(p)?(k=s.getRecordMatcher(p),P=C):P=p,s.addRoute(P,k)}function b(p){const C=s.getRecordMatcher(p);C&&s.removeRoute(C)}function N(){return s.getRoutes().map(p=>p.record)}function I(p){return!!s.getRecordMatcher(p)}function R(p,C){if(C=H({},C||r.value),typeof p=="string"){const A=Xe(n,p,C.path),Y=s.resolve({path:A.path},C),Ne=a.createHref(A.fullPath);return H(A,Y,{params:v(Y.params),hash:ze(A.hash),redirectedFrom:void 0,href:Ne})}let k;if("path"in p)k=H({},p,{path:Xe(n,p.path,C.path).path});else{const A=H({},p.params);for(const Y in A)A[Y]==null&&delete A[Y];k=H({},p,{params:d(p.params)}),C.params=d(C.params)}const P=s.resolve(k,C),V=p.hash||"";P.params=i(v(P.params));const X=ns(o,H({},p,{hash:zs(V),path:P.path})),L=a.createHref(X);return H({fullPath:X,hash:V,query:o===_t?Fs(p.query):p.query||{}},P,{redirectedFrom:void 0,href:L})}function x(p){return typeof p=="string"?Xe(n,p,r.value.path):H({},p)}function U(p,C){if(l!==p)return Re(8,{from:C,to:p})}function f(p){return ee(p)}function w(p){return f(H(x(p),{replace:!0}))}function z(p){const C=p.matched[p.matched.length-1];if(C&&C.redirect){const{redirect:k}=C;let P=typeof k=="function"?k(p):k;return typeof P=="string"&&(P=P.includes("?")||P.includes("#")?P=x(P):{path:P},P.params={}),H({query:p.query,hash:p.hash,params:"path"in P?{}:p.params},P)}}function ee(p,C){const k=l=R(p),P=r.value,V=p.state,X=p.force,L=p.replace===!0,A=z(k);if(A)return ee(H(x(A),{state:typeof A=="object"?H({},V,A.state):V,force:X,replace:L}),C||k);const Y=k;Y.redirectedFrom=C;let Ne;return!X&&os(o,P,k)&&(Ne=Re(16,{to:Y,from:P}),E(P,P,!0,!1)),(Ne?Promise.resolve(Ne):we(Y,P)).catch(se=>ue(se)?ue(se,2)?se:K(se):O(se,Y,P)).then(se=>{if(se){if(ue(se,2))return ee(H({replace:L},x(se.to),{state:typeof se.to=="object"?H({},V,se.to.state):V,force:X}),C||Y)}else se=$e(Y,P,!0,L,V);return ke(Y,P,se),se})}function ye(p,C){const k=U(p,C);return k?Promise.reject(k):Promise.resolve()}function we(p,C){let k;const[P,V,X]=on(p,C);k=Ye(P.reverse(),"beforeRouteLeave",p,C);for(const A of P)A.leaveGuards.forEach(Y=>{k.push(me(Y,p,C))});const L=ye.bind(null,p,C);return k.push(L),Se(k).then(()=>{k=[];for(const A of c.list())k.push(me(A,p,C));return k.push(L),Se(k)}).then(()=>{k=Ye(V,"beforeRouteUpdate",p,C);for(const A of V)A.updateGuards.forEach(Y=>{k.push(me(Y,p,C))});return k.push(L),Se(k)}).then(()=>{k=[];for(const A of p.matched)if(A.beforeEnter&&!C.matched.includes(A))if(ce(A.beforeEnter))for(const Y of A.beforeEnter)k.push(me(Y,p,C));else k.push(me(A.beforeEnter,p,C));return k.push(L),Se(k)}).then(()=>(p.matched.forEach(A=>A.enterCallbacks={}),k=Ye(X,"beforeRouteEnter",p,C),k.push(L),Se(k))).then(()=>{k=[];for(const A of g.list())k.push(me(A,p,C));return k.push(L),Se(k)}).catch(A=>ue(A,8)?A:Promise.reject(A))}function ke(p,C,k){for(const P of h.list())P(p,C,k)}function $e(p,C,k,P,V){const X=U(p,C);if(X)return X;const L=C===ve,A=Ce?history.state:{};k&&(P||L?a.replace(p.fullPath,H({scroll:L&&A&&A.scroll},V)):a.push(p.fullPath,V)),r.value=p,E(p,C,k,L),K()}let de;function j(){de||(de=a.listen((p,C,k)=>{if(!lt.listening)return;const P=R(p),V=z(P);if(V){ee(H(V,{replace:!0}),P).catch(Be);return}l=P;const X=r.value;Ce&&hs(dt(X.fullPath,k.delta),Ve()),we(P,X).catch(L=>ue(L,12)?L:ue(L,2)?(ee(L.to,P).then(A=>{ue(A,20)&&!k.delta&&k.type===De.pop&&a.go(-1,!1)}).catch(Be),Promise.reject()):(k.delta&&a.go(-k.delta,!1),O(L,P,X))).then(L=>{L=L||$e(P,X,!1),L&&(k.delta&&!ue(L,8)?a.go(-k.delta,!1):k.type===De.pop&&ue(L,20)&&a.go(-1,!1)),ke(P,X,L)}).catch(Be)}))}let T=je(),F=je(),D;function O(p,C,k){K(p);const P=F.list();return P.length?P.forEach(V=>V(p,C,k)):console.error(p),Promise.reject(p)}function M(){return D&&r.value!==ve?Promise.resolve():new Promise((p,C)=>{T.add([p,C])})}function K(p){return D||(D=!p,j(),T.list().forEach(([C,k])=>p?k(p):C()),T.reset()),p}function E(p,C,k,P){const{scrollBehavior:V}=t;if(!Ce||!V)return Promise.resolve();const X=!k&&vs(dt(p.fullPath,0))||(P||!k)&&history.state&&history.state.scroll||null;return be().then(()=>V(p,C,X)).then(L=>L&&us(L)).catch(L=>O(L,p,C))}const Q=p=>a.go(p);let J;const Fe=new Set,lt={currentRoute:r,listening:!0,addRoute:_,removeRoute:b,hasRoute:I,getRoutes:N,resolve:R,options:t,push:f,replace:w,go:Q,back:()=>Q(-1),forward:()=>Q(1),beforeEach:c.add,beforeResolve:g.add,afterEach:h.add,onError:F.add,isReady:M,install(p){const C=this;p.component("RouterLink",Zs),p.component("RouterView",sn),p.config.globalProperties.$router=C,Object.defineProperty(p.config.globalProperties,"$route",{enumerable:!0,get:()=>G(r)}),Ce&&!J&&r.value===ve&&(J=!0,f(a.location).catch(V=>{}));const k={};for(const V in ve)k[V]=W(()=>r.value[V]);p.provide(Ge,C),p.provide(ot,$t(k)),p.provide(et,r);const P=p.unmount;Fe.add(p),p.unmount=function(){Fe.delete(p),Fe.size<1&&(l=ve,de&&de(),de=null,r.value=ve,J=!1,D=!1),P()}}};return lt}function Se(t){return t.reduce((s,n)=>s.then(()=>n()),Promise.resolve())}function on(t,s){const n=[],o=[],a=[],c=Math.max(s.matched.length,t.matched.length);for(let g=0;g<c;g++){const h=s.matched[g];h&&(t.matched.find(l=>Pe(l,h))?o.push(h):n.push(h));const r=t.matched[g];r&&(s.matched.find(l=>Pe(l,r))||a.push(r))}return[n,o,a]}function at(){return he(Ge)}function it(){return he(ot)}const an="/img/logo.svg",ln={class:"dropdown bg-white rounded-md py-1 z-20",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},rn={class:"block px-4 py-2"},cn={class:"opacity-75"},dn=e("div",{class:"my-1 border-b border-base-300"},null,-1),un=e("div",{class:"relative block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},[e("a",{class:"stretched-link",href:"/admin/logout"},"登出")],-1),hn={__name:"UserMenu",props:{userName:String,userAccount:String,toleft:Number,totop:Number},emits:["close"],setup(t,{emit:s}){const n=t;He();const o=y(null),a=W(()=>{var h;return String(String(n.toleft+32-((h=o.value)==null?void 0:h.clientWidth)))}),c=W(()=>String(n.totop+40)),g=h=>{s("close")};return(h,r)=>{const l=Rt("click-away");return xe((u(),m("div",{ref_key:"userMenu",ref:o,class:"shadow-lg border border-base-300 rounded-md z-20",style:Pt("position: fixed; left: "+G(a)+"px; top: "+G(c)+"px; min-width: max-content; --radix-popper-transform-origin: 100% 0px;")},[e("div",ln,[e("div",rn,[e("div",null,[e("strong",null,S(t.userName),1)]),e("div",cn,S(t.userAccount),1)]),dn,un])],4)),[[l,g]])}}};const vn={key:0,class:"bg-amber-700 text-white font-medium py-2 px-4 text-center"},mn=["href"],fn={class:"bg-base-200 border-b border-base-300 pt-4 mb-6"},pn={class:"container mx-auto mb-4 md:mb-6"},gn={class:"flex justify-between items-center px-2 md:px-0"},_n={href:"/",class:"flex items-center",style:{"max-width":"80%"}},bn=e("img",{width:"18",height:"18",src:an},null,-1),xn={role:"banner",class:"text-lg font-semibold ml-3 truncate"},yn=e("span",{class:"badge badge-secondary"},"仅供测试",-1),wn={class:"flex items-center"},kn=e("a",{class:"hidden text-gray-600 hover:text-gray-800 sm:inline-block px-2 py-1",href:"https://github.com/gps949/tailscale/releases",target:"_blank",rel:"noopener noreferrer"},"下载客户端",-1),$n={class:"relative rounded-full"},Sn={class:"relative shrink-0 rounded-full overflow-hidden w-8 h-8"},Cn={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-8 h-8",style:{"background-color":"rgb(161, 56, 33)"}},En={class:"relative overflow-hidden",style:{top:"1px"}},Pn={id:"nav",class:"navigation flex items-center overflow-auto left-1 relative md:container md:mx-auto md:px-0 md:-left-3"},Rn=["stroke-width"],Mn=e("rect",{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"},null,-1),Nn=e("rect",{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"},null,-1),jn=e("line",{x1:"6",y1:"6",x2:"6.01",y2:"6"},null,-1),In=e("line",{x1:"6",y1:"18",x2:"6.01",y2:"18"},null,-1),Bn=[Mn,Nn,jn,In],An=["stroke-width"],On=e("circle",{cx:"12",cy:"12",r:"10"},null,-1),Ln=e("line",{x1:"2",y1:"12",x2:"22",y2:"12"},null,-1),Dn=e("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},null,-1),Un=[On,Ln,Dn],Tn=["stroke-width"],Hn=e("circle",{cx:"12",cy:"12",r:"3"},null,-1),zn=e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1),Vn=[Hn,zn],Gn={key:2,class:"container mx-auto pb-20 md:pb-24"},Kn={class:"mb-24"},qn=e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2"},"错误")])])],-1),Fn={class:"w-full p-3 flex items-center justify-center text-sm"},Wn={class:"flex items-center justify-center"},Qn=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-3 text-red-400 h-5 w-5"},[e("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1),Xn=e("strong",null,"错误：",-1),Yn={__name:"Console",setup(t){at();const s=it(),n=y(null),o=y(0),a=y(0),c=y(!1),g=y(""),h=W(()=>s.path);function r(){var x,U;o.value=(x=n.value)==null?void 0:x.getBoundingClientRect().left,a.value=(U=n.value)==null?void 0:U.getBoundingClientRect().top}const l=y(!1);function i(){l.value=!l.value,l.value?document.body.style.pointerEvents="none":document.body.style.removeProperty("pointer-events")}const d=W(()=>{let x=s.path;if(x=="/")return"machine";if(x.substring(0,4)=="/dns")return"dns";if(x.substring(0,8)=="/machine")return"machine";if(x.substring(0,8)=="/setting")return"setting"}),v=y(""),_=y(""),b=y(""),N=y(""),I=y("");function R(){return new Promise((x,U)=>{axios.get("/admin/api/self").then(function(f){(f.data.errormsg==null||f.data.errormsg==="")&&(v.value=f.data.useraccount,_.value=f.data.basedomain,b.value=f.data.username,N.value=f.data.usernamehead,I.value=f.data.orgname,x("success")),U("err")}).catch(function(f){U("error")})})}return pe(()=>{r(),window.addEventListener("resize",r),window.addEventListener("scroll",r),axios.interceptors.response.use(x=>(x.status==200?(g.value="",c.value=!1):(g.value="登录状态超时失效",c.value=!0),x),x=>{if(x&&x.response)switch(x.response.status){case 400:x.message="请求错误(400)";break;case 401:x.message="未授权，请重新登录(401)";break;case 403:x.message="拒绝访问(403)";break;case 404:x.message="请求出错(404)";break;case 408:x.message="请求超时(408)";break;case 500:x.message="服务器错误(500)";break;case 501:x.message="服务未实现(501)";break;case 502:x.message="网络错误(502)";break;case 503:x.message="服务不可用(503)";break;case 504:x.message="网络超时(504)";break;case 505:x.message="HTTP版本不受支持(505)";break;default:x.message="连接出错"+x.response.status}else x.message="连接服务器失败!";return g.value=x.message,c.value=!0,Promise.reject(x)}),R().then().catch(),setInterval(()=>{R().then().catch()},15e3)}),(x,U)=>{const f=Oe("router-link"),w=Oe("router-view");return u(),m(te,null,[c.value?(u(),m("div",vn,[q("连接服务器出现"+S(g.value)+"，请尝试 ",1),e("a",{class:"text-amber-100",href:"/login?next_url=/admin#"+G(h)},"重新登录",8,mn)])):$("",!0),e("div",fn,[e("div",pn,[e("header",gn,[e("a",_n,[bn,e("div",xn,S(I.value),1),yn]),e("nav",wn,[kn,e("div",{ref_key:"userAvatar",ref:n,onClick:i,class:"heart-wrapper ml-2"},[e("button",$n,[e("div",Sn,[e("div",Cn,S(N.value),1)])])],512),(u(),Z(fe,{to:"body"},[l.value?(u(),Z(hn,{key:0,toleft:o.value,totop:a.value,"user-account":v.value,"user-name":b.value,onClose:i},null,8,["toleft","totop","user-account","user-name"])):$("",!0)]))])])]),e("div",En,[e("nav",Pn,[ne(f,{class:"whitespace-nowrap py-2 group relative",to:"/machines"},{default:le(()=>[e("div",{class:oe([{"text-blue-600 after:visible":G(d)=="machine","text-gray-600 group-hover:text-gray-800 after:invisible":G(d)!="machine"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(u(),m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":G(d)=="machine"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},Bn,8,Rn)),e("div",{class:oe({"font-medium":G(d)=="machine"})},"设备",2)],2)]),_:1}),ne(f,{class:"whitespace-nowrap py-2 group relative",to:"/dns"},{default:le(()=>[e("div",{class:oe([{"text-blue-600 after:visible":G(d)=="dns","text-gray-600 group-hover:text-gray-800 after:invisible":G(d)!="dns"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(u(),m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":G(d)=="dns"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},Un,8,An)),e("div",{class:oe({"font-medium":G(d)=="dns"})},"DNS",2)],2)]),_:1}),ne(f,{class:"whitespace-nowrap py-2 group relative",to:"/settings"},{default:le(()=>[e("div",{class:oe([{"text-blue-600 after:visible":G(d)=="setting","text-gray-600 group-hover:text-gray-800 after:invisible":G(d)!="setting"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(u(),m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":G(d)=="setting"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},Vn,8,Tn)),e("div",{class:oe({"font-medium":G(d)=="setting"})},"设置",2)],2)]),_:1})])])]),c.value?$("",!0):(u(),Z(w,{key:1})),c.value?(u(),m("main",Gn,[e("section",Kn,[qn,e("div",Fn,[e("div",Wn,[Qn,e("div",null,[Xn,q(" 请求失败 "+S(g.value),1)])])])])])):$("",!0)],64)}}},Zn={class:"dropdown bg-white rounded-md py-1 z-20",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},Jn=["hidden"],eo=["hidden"],to=e("div",{class:"my-1 border-b border-base-300"},null,-1),so=["hidden"],no=["hidden"],oo=e("div",{class:"my-1 border-b border-base-300"},null,-1),Vt={__name:"MachineMenu",props:{toleft:Number,totop:Number,neverExpires:Boolean},emits:["close"],setup(t,{emit:s}){const n=t,o=y(!0);He();const a=y(null),c=W(()=>{var r;return String(String(n.toleft+32-((r=a.value)==null?void 0:r.clientWidth)))}),g=W(()=>{var r;return n.totop<=window.innerHeight/2?String(n.totop+36):String(n.totop-10-((r=a.value)==null?void 0:r.clientHeight))}),h=r=>{s("close")};return(r,l)=>{const i=Rt("click-away");return xe((u(),m("div",{ref_key:"machineMenu",ref:a,class:"shadow-xl border border-base-300 rounded-md z-20",style:Pt("position: fixed; left: "+G(c)+"px; top: "+G(g)+"px; min-width: max-content; --radix-popper-transform-origin: 0% 0px;")},[e("div",Zn,[e("div",{onClick:l[0]||(l[0]=d=>r.$emit("showdialog-updatehostname")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 编辑设备名称…",8,Jn),e("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 分享…",8,eo),e("div",{onClick:l[1]||(l[1]=d=>r.$emit("set-expires")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},S(t.neverExpires?"启用密钥过期":"禁用密钥过期"),1),to,e("div",{onClick:l[2]||(l[2]=d=>r.$emit("showdialog-setsubnet")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 编辑子网转发…",8,so),e("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 编辑ACL标签…",8,no),oo,e("div",{onClick:l[3]||(l[3]=d=>r.$emit("showdialog-remove")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100 text-red-400"}," 移除…")])],4)),[[i,h]])}}},ao={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},io={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},lo={class:"font-semibold text-lg truncate"},ro=e("p",{class:"text-gray-700 mb-4"},"这个设备将从您的蜃境网络中永久删除！如需重新添加该设备，您将需要在该设备上重新进行授权",-1),co={class:"flex mt-10 justify-end space-x-4"},uo=e("button",{class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit",type:"submit"},"删除设备",-1),ho=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),vo=[ho],Gt={__name:"RemoveMachine",props:{machineName:String},setup(t){return He(),(s,n)=>(u(),m("div",{onClick:n[3]||(n[3]=Le(o=>s.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",ao,[e("header",io,[e("div",lo,"删除 "+S(t.machineName),1)]),e("form",{onSubmit:n[1]||(n[1]=Le(o=>s.$emit("confirm"),["prevent"]))},[ro,e("footer",co,[e("button",{onClick:n[0]||(n[0]=o=>s.$emit("close")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消"),uo])],32),e("button",{onClick:n[2]||(n[2]=o=>s.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},vo)])]))}};const Ke=t=>(Ue("data-v-7e611cdc"),t=t(),Te(),t),mo={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},fo={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},po={class:"font-semibold text-lg truncate"},go=Ke(()=>e("p",{class:"text-gray-700 mb-6"},[q("这个名称显示在控制台、客户端，以及生成对应的「"),e("strong",null,"幻域"),q("」名称")],-1)),_o={class:"flex items-center"},bo=["disabled"],xo=Ke(()=>e("label",{for:"auto-generate-checkbox",class:"font-medium ml-3"},"由设备OS主机名生成",-1)),yo=Ke(()=>e("label",{for:"machine-name",class:"block font-medium mt-6 mb-2"},"设备名称",-1)),wo={class:"flex mb-2"},ko={class:"relative w-full z-30"},$o=["disabled"],So={key:0,class:"text-sm text-red-500 mb-2"},Co={key:1,class:"text-sm text-red-500 mb-2"},Eo={key:2,class:"text-sm text-red-500 mb-2"},Po={key:3,class:"text-sm text-gray-600"},Ro={class:"text-xs break-words bg-gray-200 px-1 rounded"},Mo={key:4,class:"text-sm text-gray-600"},No={class:"text-xs break-words bg-gray-200 px-1 rounded"},jo={class:"text-xs break-words bg-gray-200 px-1 rounded"},Io={class:"flex mt-10 justify-end space-x-4"},Bo=["disabled"],Ao=["disabled"],Oo=Ke(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),Lo=[Oo],Do={__name:"UpdateHostname",props:{id:String,hostName:String,givenName:String,autoGen:Boolean},emits:["update-done","update-fail","close"],setup(t,{emit:s}){const n=t;He();const o=y(!1),a=y(!0),c=y(""),g=y(!1),h=y(!1),r=y(""),l=y(!1),i=y(!1),d=y(!1);Ee(()=>a.value,_=>{l.value=!1,i.value=!1,d.value=!1,_==n.autoGen?g.value=!1:g.value=!0,_&&(n.autoGen?c.value=n.givenName:c.value=n.hostName)}),Ee(()=>c.value,_=>{l.value=!1,i.value=!1,d.value=!1,c.value=c.value.toLowerCase().replace(/[^-0-9a-z]/ig,"-").replace(/--*/g,"-"),_==n.givenName?h.value=!1:h.value=!0}),pe(()=>{g.value=!1,h.value=!1,a.value=n.autoGen,c.value=n.givenName,l.value=!1,i.value=!1,d.value=!1});function v(){if(!/^([0-9a-z]|-(?!-))+$/.test(c.value)){d.value=!0;return}if(/^(-.*|.*-)$/.test(c.value)){d.value=!0;return}o.value=!0;var _="";r.value=n.hostName,a.value||(_=c.value,r.value=c.value),axios.post("/admin/api/machines",{mid:n.id,state:"rename-node",nodeName:_}).then(function(b){b.data.status=="success"?b.data.data.name==r.value?s("update-done",b.data.data.name,b.data.data.automaticNameMode,!0):_===""?(l.value=!0,s("update-done",b.data.data.name,b.data.data.automaticNameMode,!1)):b.data.data.name==n.givenName?(i.value=!0,s("update-fail","目标主机名已存在！")):(console.log("unexpected case happended during the hostname updating!"),s("update-fail","意外情形发生了！")):s("update-fail",b.data.status.substring(6))}).catch(function(b){console.log(b),s("update-fail",b)}),o.value=!1}return(_,b)=>(u(),m("div",{onClick:b[5]||(b[5]=Le(N=>_.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",mo,[e("header",fo,[e("div",po,"修改设备名称 "+S(t.givenName),1)]),e("form",{onSubmit:b[3]||(b[3]=Le(N=>_.$emit("confirm"),["prevent"]))},[go,e("div",_o,[xe(e("input",{disabled:o.value,"onUpdate:modelValue":b[0]||(b[0]=N=>a.value=N),id:"auto-generate-checkbox",type:"checkbox",class:"toggle toggle-sm"},null,8,bo),[[Mt,a.value]]),xo]),yo,e("div",wo,[e("div",ko,[xe(e("input",{"onUpdate:modelValue":b[1]||(b[1]=N=>c.value=N),class:"input w-full z-30 border focus:outline-blue-500/60 hover:border disabled:hover:border-stone-200 disabled:border-stone-200 border-stone-200 hover:border-stone-400 rounded-md h-9 min-h-fit",type:"text",disabled:o.value||a.value,id:"machine-name"},null,8,$o),[[Nt,c.value]])])]),l.value?(u(),m("p",So,"名称 “"+S(r.value)+"” 已有设备占用 , 因此设备被自动命名为 “"+S(c.value)+"”.",1)):$("",!0),i.value?(u(),m("p",Co,"名称 “"+S(r.value)+"” 已有设备占用",1)):$("",!0),d.value?(u(),m("p",Eo,"名称不能为空，只能是字母数字和连接线组成，且不能以连接线开头结尾")):$("",!0),h.value?$("",!0):(u(),m("div",Po,[q("这个设备可以通过「幻域」使用 "),e("code",Ro,S(t.givenName),1),q(" 进行访问")])),h.value?(u(),m("div",Mo,[q("这个设备可以通过「幻域」使用 "),e("code",No,S(c.value),1),q(" 进行访问。 "),e("code",jo,S(t.givenName),1),q(" 不再指向该设备。")])):$("",!0),e("footer",Io,[e("button",{disabled:o.value,onClick:b[2]||(b[2]=N=>_.$emit("close")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消",8,Bo),e("button",{disabled:o.value||!g.value&&!h.value,onClick:v,class:"btn border-0 bg-blue-500 hover:bg-blue-900 disabled:bg-blue-500/60 text-white disabled:text-white/60 h-9 min-h-fit",type:"submit"},"更新",8,Ao)])],32),e("button",{onClick:b[4]||(b[4]=N=>_.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},Lo)])]))}},Kt=Me(Do,[["__scopeId","data-v-7e611cdc"]]);const _e=t=>(Ue("data-v-8ebd61b6"),t=t(),Te(),t),Uo={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},To={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},Ho={class:"font-semibold text-lg truncate"},zo={class:"mb-6"},Vo=_e(()=>e("h3",{class:"font-semibold text-gray-800 mb-2"},"子网转发路由",-1)),Go=_e(()=>e("p",{class:"text-gray-700 mb-3"},"通过子网转发连接您无法安装蜃境客户端的设备",-1)),Ko={key:0,class:"rounded-md border bg-stone-100 border-stone-300 p-6"},qo=_e(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备未披露任何子网转发路由")],-1)),Fo=[qo],Wo={key:1},Qo={class:"flex items-center py-2 border-t"},Xo=["disabled","checked","id"],Yo={class:"flex items-center"},Zo=["for"],Jo={key:2,class:"flex-1 flex border-t items-center pt-2"},ea=["disabled"],ta=["disabled"],sa=_e(()=>e("h3",{class:"font-semibold flex items-center text-gray-800 mb-2"},"出口节点",-1)),na=_e(()=>e("p",{class:"text-gray-700 mb-3"},"允许您的网络上访问互联网流量通过该设备流出",-1)),oa={class:"flex items-center"},aa=["disabled","checked"],ia=_e(()=>e("label",{for:"exit-node"},"用作出口节点",-1)),la={key:0,class:"tooltip","data-tip":"该设备未声明它自己为出口节点。可使用 --advertise-exit-node 参数再次运行以开启。"},ra=_e(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mx-2 text-gray-500"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)),ca=[ra],da=_e(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),ua=[da],ha={__name:"SetSubnet",props:{id:String,currentMachine:Object},emits:["update-done","update-fail"],setup(t,{emit:s}){const n=t;He();const o=y(!1),a=W(()=>n.currentMachine.allowedIPs&&n.currentMachine.allowedIPs.length>0),c=W(()=>n.currentMachine.extraIPs&&n.currentMachine.extraIPs.length>0);function g(r){if(!n.currentMachine.allowedIPs||n.currentMachine.allowedIPs.length==0)return!1;for(var l in n.currentMachine.allowedIPs)if(r===n.currentMachine.allowedIPs[l])return!0;return!1}pe(()=>{});function h(r){o.value=!0;var l=[];if(r!="Off")for(var i in n.currentMachine.advertisedIPs)(r=="On"||document.getElementById(n.currentMachine.advertisedIPs[i]).checked)&&l.push(n.currentMachine.advertisedIPs[i]);var d=document.getElementById("exit-node").checked;axios.post("/admin/api/machines",{mid:n.id,state:"set-route-settings",allowedIPs:l,allowedExitNode:d}).then(function(v){v.data.status=="success"?s("update-done",v.data.data.advertisedIPs,v.data.data.allowedIPs,v.data.data.extraIPs,v.data.data.allowedExitNode):s("update-fail",v.data.status.substring(6))}).catch(function(v){console.log(v),s("update-fail",v)}),o.value=!1}return(r,l)=>(u(),m("div",{onClick:l[5]||(l[5]=Le(i=>r.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",Uo,[e("header",To,[e("div",Ho,"编辑 "+S(t.currentMachine.name)+" 子网转发设置",1)]),e("div",zo,[Vo,Go,e("div",null,[t.currentMachine.hasSubnets?$("",!0):(u(),m("div",Ko,Fo)),t.currentMachine.hasSubnets?(u(),m("div",Wo,[(u(!0),m(te,null,re(t.currentMachine.advertisedIPs,i=>(u(),m("li",Qo,[e("div",null,[e("input",{onChange:l[0]||(l[0]=d=>h("Update")),disabled:o.value,checked:g(i),id:i,type:"checkbox",class:"toggle block mr-3"},null,40,Xo)]),e("div",Yo,[e("label",{for:i},S(i),9,Zo)])]))),256))])):$("",!0),t.currentMachine.hasSubnets?(u(),m("div",Jo,[e("button",{onClick:l[1]||(l[1]=i=>h("Off")),class:"btn border-0 bg-red-600 hover:bg-red-700 disabled:bg-red-600/60 disabled:text-white/60 text-white h-9 min-h-fit mr-2",disabled:!G(a)},"全部禁用",8,ea),e("button",{onClick:l[2]||(l[2]=i=>h("On")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200 disabled:text-base-400 text-black h-9 min-h-fit",disabled:!G(c)},"全部启用",8,ta)])):$("",!0)])]),e("div",null,[sa,na,e("div",oa,[e("input",{onChange:l[3]||(l[3]=i=>h("Update")),disabled:o.value||!t.currentMachine.advertisedExitNode,checked:t.currentMachine.allowedExitNode,id:"exit-node",type:"checkbox",class:"toggle mr-3"},null,40,aa),ia,t.currentMachine.advertisedExitNode?$("",!0):(u(),m("span",la,ca))])]),e("button",{onClick:l[4]||(l[4]=i=>r.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},ua)])]))}},qt=Me(ha,[["__scopeId","data-v-8ebd61b6"]]);const ie=t=>(Ue("data-v-d2dc0a09"),t=t(),Te(),t),va={class:"container mx-auto pb-20 md:pb-24"},ma={class:"mb-24"},fa=ie(()=>e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2",tabindex:"-1"}," 设备 ")])])],-1)),pa={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-full px-2 py-1 leading-none text-sm mb-8"},ga={class:"table w-full"},_a=ie(()=>e("thead",null,[e("tr",null,[e("th",{class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"}," 设备 "),e("th",{class:"hidden md:table-cell md:w-1/4"},"IP"),e("th",{class:"hidden md:table-cell w-1/4 lg:w-1/5"},"系统"),e("th",{class:"hidden lg:table-cell md:flex-auto"},"状态"),e("th",{class:"table-cell justify-end ml-auto md:ml-0 relative w-1/6 lg:w-12"},[e("span",{class:"sr-only"},"设备操作菜单")])])],-1)),ba=["id","v-if","onMouseenter","onMouseleave"],xa={class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"},ya={class:"items-center text-gray-900"},wa={class:"font-semibold hover:text-blue-500"},ka={class:"stretched-link"},$a={class:"md:hidden flex space-x-1 truncate"},Sa={class:"text-sm"},Ca=ie(()=>e("span",null,"·",-1)),Ea={class:"md:hidden text-gray-600 text-sm",title:"m.version"},Pa={class:"flex items-center text-gray-600 text-sm"},Ra={class:"my-1"},Ma={key:0},Na=ie(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1)),ja=[Na],Ia={key:1},Ba=ie(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1)),Aa=[Ba],Oa={key:2},La=ie(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1)),Da=[La],Ua={key:3},Ta=ie(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1)),Ha=[Ta],za={key:4},Va={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},Ga={key:5},Ka={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},qa={key:0,class:"tooltip","data-tip":"该设备存在未批准子网转发，请在设备菜单的“编辑子网转发…”中检查"},Fa=ie(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),Wa=[Fa],Qa={key:6},Xa={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},Ya={key:0,class:"tooltip","data-tip":"该设备申请被用作出口节点，请在设备菜单的“编辑子网转发…”中检查"},Za=ie(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),Ja=[Za],ei={class:"hidden md:table-cell md:w-1/4"},ti={class:"font-medium pr-6"},si={class:"truncate"},ni={key:0,class:"absolute -mt-1 -ml-2 -top-px -left-px shadow-md cursor-pointer rounded-md active:shadow-sm transition-shadow duration-100 ease-in-out z-20",style:{visibility:"visible","max-width":"934px"}},oi={class:"flex border rounded-md button-outline bg-white"},ai={class:"inline-block select-none truncate"},ii=ie(()=>e("span",{class:"cursor-pointer text-blue-500 pl-2"},"复制",-1)),li={class:"tooltip text-gray-400","data-tip":"这条子网转发未启用"},ri=ie(()=>e("br",null,null,-1)),ci={class:"hidden md:table-cell w-1/4 lg:w-1/5"},di={class:"flex items-center relative"},ui={class:"text-sm text-gray-600"},hi={class:"hidden lg:table-cell md:flex-auto"},vi={class:"inline-flex items-center cursor-default"},mi=["data-tip"],fi=["data-tip"],pi={class:"table-cell justify-end ml-auto md:ml-0 relative w-12 justify-items-end items-center md:items-start"},gi=["onClick"],_i=ge('<button class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-20" data-v-d2dc0a09><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500" data-v-d2dc0a09><circle cx="12" cy="12" r="1" data-v-d2dc0a09></circle><circle cx="19" cy="12" r="1" data-v-d2dc0a09></circle><circle cx="5" cy="12" r="1" data-v-d2dc0a09></circle></svg></button>',1),bi=[_i],xi=["onClick"],yi=ie(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})],-1)),wi=[yi],ki={__name:"Machines",setup(t){const s=y(null),n=y(0),o=y(0);function a(){var O,M;s.value!=null&&(n.value=((O=s.value)==null?void 0:O.getBoundingClientRect().left)+14,o.value=(M=s.value)==null?void 0:M.getBoundingClientRect().top)}function c(O,M){var K,E,Q,J;for(s.value=M.target;((K=s.value)==null?void 0:K.tagName)!="DIV"&&((E=s.value)==null?void 0:E.tagName)!="div";)s.value=s.value.parentNode;l.value=O,n.value=((Q=s.value)==null?void 0:Q.getBoundingClientRect().left)+14,o.value=(J=s.value)==null?void 0:J.getBoundingClientRect().top,_.value=!0}function g(){s.value=null,_.value=!1}const h=y(!1),r=y("");Ee(h,()=>{h.value&&setTimeout(function(){h.value=!1},5e3)});const l=y("-1");function i(O){l.value=O,b.value=!0}function d(){b.value=!1}const v=y(!1),_=y(!1),b=y(!1),N=y(!1);function I(){b.value=!1,g(l.value),N.value=!0}const R=y(!1);function x(){b.value=!1,g(l.value),R.value=!0}const U=y(!1);function f(){b.value=!1,g(l.value),U.value=!0}const w=y({}),z=W(()=>Object.getOwnPropertyNames(w.value).length);let ee;function ye(){return new Promise((O,M)=>{axios.get("/admin/api/machines").then(function(K){if((K.data.needreauth!=null||K.data.needreauth==!0)&&(r.value=K.data.needreauthreason+"，登录状态失效，请重新登录",h.value=!0,M()),K.data.errormsg==null||K.data.errormsg===""){for(var E in K.data.mlist){w.value[E]=K.data.mlist[E];let Q=w.value[E].expirydesc.slice(-2);w.value[E].expirydesc=="马上就要过期"||Q=="分钟"||Q=="小时"||Q=="1天"?w.value[E].soonexpiry=!0:w.value[E].soonexpiry=!1}O()}else K.data.errormsg!=null&&(r.value="获设备信息出错："+K.data.errormsg,h.value=!0,M())}).catch(function(K){r.value="更新页面出错："+K,h.value=!0,M()}).then(function(){})})}pe(()=>{a(),window.addEventListener("resize",a),window.addEventListener("scroll",a),ye().then().catch(),ee=setInterval(()=>{ye().then().catch()},15e3)}),St(()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a)}),Ws(()=>{clearInterval(ee)});function we(O){g(),axios.post("/admin/api/machines",{mid:O,state:"set-expires"}).then(function(M){M.data.status=="success"?(w.value[O].neverExpires=M.data.data.neverExpires,w.value[O].expirydesc=M.data.data.expires,M.data.data.neverExpires==!0?r.value="已禁用密钥过期":r.value="已启用密钥过期",h.value=!0):(r.value="失败："+M.data.status.substring(6),h.value=!0)}).catch(function(M){console.log(M)})}function ke(O){axios.post("/admin/api/machine/remove",{mid:O}).then(function(M){M.data.status=="OK"?(N.value=!1,r.value=w.value[O].name+"已从您的蜃境网络移除！",h.value=!0,delete w.value[O]):alert("失败："+M.data.errmsg)}).catch(function(M){console.log(M)})}function $e(O,M,K){w.value[l.value].name=O,w.value[l.value].automaticNameMode=M,be(()=>{R.value=!K,be(()=>{r.value="已更新设备名称！",h.value=!0})})}function de(O){r.value="更新设备名称失败！",h.value=!0}function j(O,M,K,E){w.value[l.value].advertisedIPs=O,w.value[l.value].allowedIPs=M,w.value[l.value].extraIPs=K,w.value[l.value].allowedExitNode=E,be(()=>{r.value="已更新子网转发设置！",h.value=!0})}function T(O){r.value="更新子网转发设置失败！",h.value=!0}function F(){navigator.clipboard.writeText(w.value[l.value].mipv4).then(function(){r.value="蜃境网络IPv4地址已复制到粘贴板！",h.value=!0})}function D(){navigator.clipboard.writeText(w.value[l.value].mipv6).then(function(){r.value="蜃境网络IPv6地址已复制到粘贴板！",h.value=!0})}return(O,M)=>{const K=Oe("router-link");return u(),m(te,null,[e("main",va,[e("section",ma,[fa,e("div",pa,S(G(z))+" 个设备 ",1),e("table",ga,[_a,e("tbody",null,[(u(!0),m(te,null,re(w.value,(E,Q)=>(u(),m("tr",{id:Q,"v-if":w.value[Q]!=O.nil,onMouseenter:J=>i(Q),onMouseleave:J=>d(),class:"w-full px-0.5 hover"},[e("td",xa,[ne(K,{class:"relative",to:"/machines/"+E.mipv4},{default:le(()=>[e("div",ya,[e("p",wa,[e("span",{class:oe([{"bg-green-500":E.ifonline,"bg-gray-300":!E.ifonline},"inline-block w-2 h-2 rounded-full relative -top-px lg:hidden mr-2"])},null,2),e("a",ka,S(E.name),1)]),e("div",$a,[e("span",Sa,S(E.mipv4),1),Ca,e("span",Ea,S(E.os),1)])]),e("div",null,[e("div",Pa,[e("span",null,S(E.useraccount),1)])])]),_:2},1032,["to"]),e("div",Ra,[e("div",null,[E.issharedin?(u(),m("span",Ma,ja)):$("",!0),E.issharedout?(u(),m("span",Ia,Aa)):$("",!0),E.expirydesc=="已过期"?(u(),m("span",Oa,Da)):$("",!0),E.neverExpires?(u(),m("span",Ua,Ha)):$("",!0),E.soonexpiry?(u(),m("span",za,[e("div",Va,S(E.expirydesc),1)])):$("",!0),E.hasSubnets?(u(),m("span",Ga,[e("div",Ka,[q(" 子网转发 "),E.hasSubnets&&E.extraIPs&&E.extraIPs.length>0?(u(),m("div",qa,Wa)):$("",!0)])])):$("",!0),E.advertisedExitNode?(u(),m("span",Qa,[e("div",Xa,[q(" 出口节点 "),E.allowedExitNode?$("",!0):(u(),m("div",Ya,Ja))])])):$("",!0)])])]),e("td",ei,[e("ul",null,[e("li",ti,[e("div",{onMouseenter:M[0]||(M[0]=J=>v.value=!0),onMouseleave:M[1]||(M[1]=J=>v.value=!1),class:"flex relative min-w-0"},[e("div",si,[e("span",null,S(E.mipv4),1)]),v.value&&l.value==Q?(u(),m("div",ni,[e("div",oi,[e("div",{onClick:F,class:"flex min-w-0 py-1 px-2 hover:bg-gray-100 rounded-l-md"},[e("span",ai,[e("span",null,S(E.mipv4),1)]),ii]),e("div",{onClick:D,class:"text-blue-500 py-1 px-2 border-l hover:bg-gray-100 rounded-r-md"}," IPv6 ")])])):$("",!0)],32)]),(u(!0),m(te,null,re(E.allowedIPs,J=>(u(),m("li",null,[e("span",null,S(J),1)]))),256)),(u(!0),m(te,null,re(E.extraIPs,J=>(u(),m(te,null,[e("li",li,[e("span",null,S(J),1)]),ri],64))),256))])]),e("td",ci,[e("div",di,[e("div",null,S(E.os),1)]),e("div",ui,S(E.version),1)]),e("td",hi,[e("span",null,[e("div",vi,[e("span",{class:oe(["inline-block w-2 h-2 rounded-full mr-2",{"bg-green-500":E.ifonline,"bg-gray-300":!E.ifonline}])},null,2),E.ifonline?(u(),m("span",{key:0,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+E.lastseen},"已连接",8,mi)):(u(),m("span",{key:1,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+E.lastseen},S(E.lastseen),9,fi))])])]),e("td",pi,[!b.value&&!_.value||l.value!=Q?(u(),m("div",{key:0,onClick:J=>c(Q,J),class:"flex-none w-12 -mt-0.5 relative"},bi,8,gi)):$("",!0),(b.value||_.value)&&l.value==Q?(u(),m("div",{key:1,onClick:J=>c(Q,J),class:"flex-none w-12 border button-outline bg-white shadow-md cursor-pointer focus:outline-none focus:ring -mt-0.5 relative py-0.5 px-2 rounded-md border-gray-300/100 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 transition-shadow duration-100 ease-in-out z-20"},wi,8,xi)):$("",!0)])],40,ba))),256))])])])]),(u(),Z(fe,{to:".toast-container"},[ne(tt,{show:h.value,msg:r.value,onClose:M[2]||(M[2]=E=>h.value=!1)},null,8,["show","msg"])])),(u(),Z(fe,{to:"body"},[_.value?(u(),Z(Vt,{key:0,toleft:n.value,totop:o.value,neverExpires:w.value[l.value].neverExpires,onClose:g,onSetExpires:M[3]||(M[3]=E=>we(l.value)),onShowdialogRemove:I,onShowdialogUpdatehostname:x,onShowdialogSetsubnet:f},null,8,["toleft","totop","neverExpires"])):$("",!0)])),(u(),Z(fe,{to:"body"},[N.value?(u(),Z(Gt,{key:0,"machine-name":w.value[l.value].name,onClose:M[4]||(M[4]=E=>N.value=!1),onConfirm:M[5]||(M[5]=E=>ke(l.value))},null,8,["machine-name"])):$("",!0),R.value?(u(),Z(Kt,{key:1,id:l.value,"given-name":w.value[l.value].name,"host-name":w.value[l.value].hostname,"auto-gen":w.value[l.value].automaticNameMode,onClose:M[6]||(M[6]=E=>R.value=!1),onUpdateDone:$e,onUpdateFail:de},null,8,["id","given-name","host-name","auto-gen"])):$("",!0),U.value?(u(),Z(qt,{key:2,id:l.value,"current-machine":w.value[l.value],onClose:M[7]||(M[7]=E=>U.value=!1),onUpdateDone:j,onUpdateFail:T},null,8,["id","current-machine"])):$("",!0)]))],64)}}},$i=Me(ki,[["__scopeId","data-v-d2dc0a09"]]);const B=t=>(Ue("data-v-2820c8a8"),t=t(),Te(),t),Si={class:"container mx-auto pb-20 md:pb-24"},Ci={class:"mb-24"},Ei={class:"pb-4 mb-8"},Pi={class:"font-medium space-x-2 mb-5 truncate flex"},Ri=B(()=>e("span",{class:"text-gray-400"},"/",-1)),Mi={class:"flex flex-wrap gap-2 items-center justify-between"},Ni={class:"text-2xl font-semibold tracking-tight leading-tight truncate flex-shrink-0 max-w-full",tabindex:"-1"},ji={class:"flex"},Ii={class:"flex gap-2 flex-wrap"},Bi=B(()=>e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]),q("设备设置 ")],-1)),Ai=[Bi],Oi={class:"flex border-t border-gray-200 text-sm mt-4 pt-4"},Li={class:"max-w-sm"},Di=B(()=>e("div",{class:"text-gray-500 mb-2"},"归属于",-1)),Ui={class:"mt-0.5"},Ti={class:"flex items-center text-gray-600 text-sm"},Hi={class:"relative shrink-0 rounded-full overflow-hidden w-5 h-5 text-xs mr-2"},zi={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-5 h-5 text-xs",style:{"background-color":"rgb(161, 56, 33)"}},Vi={"data-state":"closed"},Gi={key:0,class:"max-w-sm border-l border-gray-200 ml-4 pl-4"},Ki=B(()=>e("p",{class:"text-gray-500 mb-2"},"状态",-1)),qi={key:0},Fi=B(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1)),Wi=[Fi],Qi={key:1},Xi=B(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1)),Yi=[Xi],Zi={key:2},Ji=B(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1)),el=[Ji],tl={key:3},sl=B(()=>e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1)),nl=[sl],ol={key:4},al={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},il={key:5},ll={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},rl={key:0,class:"tooltip","data-tip":"该设备存在未批准子网转发，请在设备菜单的“编辑子网转发…”中检查"},cl=B(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),dl=[cl],ul={key:6},hl={class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"},vl={key:0,class:"tooltip","data-tip":"该设备申请被用作出口节点，请在设备菜单的“编辑子网转发…”中检查"},ml=B(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.35","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-1"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),fl=[ml],pl={class:"mb-8"},gl={class:"flex justify-between mb-4"},_l=B(()=>e("div",{class:"max-w-xl"},[e("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"子网转发"),e("p",{class:"text-gray-600"}," “子网转发”允许你暴露设备可访问物理网络路由给您的蜃境网络 ")],-1)),bl={key:0},xl={key:0,class:"p-4 md:p-6 border border-gray-200 rounded-md"},yl={class:"leading-normal"},wl={class:"tooltip text-gray-400","data-tip":"这条子网转发未启用"},kl=B(()=>e("br",null,null,-1)),$l={key:1,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},Sl=B(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备未暴露任何子网可供转发 ")],-1)),Cl=[Sl],El={key:2,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},Pl=B(()=>e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备来自外部共享，不能暴露子网转发给你 ")],-1)),Rl=[Pl],Ml={class:"mb-8"},Nl=B(()=>e("header",{class:"max-w-xl mb-4"},[e("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"设备信息"),e("p",{class:"text-gray-600"},"关于该设备网络的信息，用于调试连接问题")],-1)),jl={class:"p-4 md:p-6 border border-gray-200 rounded-md grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-2"},Il={class:"space-y-2"},Bl={class:"flex text-sm"},Al=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建者",-1)),Ol={class:"min-w-0 truncate"},Ll={class:"flex text-sm"},Dl=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备名称",-1)),Ul={class:"min-w-0"},Tl={class:"flex relative min-w-0"},Hl={class:"truncate"},zl={key:0,class:"cursor-pointer text-blue-500 pl-2"},Vl={class:"flex text-sm"},Gl=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"域名",-1)),Kl={class:"min-w-0"},ql={class:"flex relative min-w-0"},Fl={class:"truncate"},Wl={key:0,class:"cursor-pointer text-blue-500 pl-2"},Ql={class:"flex text-sm"},Xl=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"系统主机名",-1)),Yl={class:"min-w-0 truncate"},Zl={class:"flex text-sm"},Jl=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"操作系统",-1)),er={class:"min-w-0 truncate"},tr={class:"flex text-sm"},sr=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境客户端版本",-1)),nr={class:"min-w-0 truncate"},or={class:"flex items-center"},ar={class:"flex text-sm"},ir=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv4",-1)),lr={class:"min-w-0"},rr={class:"flex relative min-w-0"},cr={class:"truncate"},dr={key:0,class:"cursor-pointer text-blue-500 pl-2"},ur={class:"flex text-sm"},hr=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv6",-1)),vr={class:"min-w-0"},mr={class:"flex relative min-w-0"},fr={class:"truncate"},pr={class:"inline-flex justify-start min-w-0 max-w-full"},gr={class:"truncate w-fit flex-shrink"},_r={key:0,class:"cursor-pointer text-blue-500 pl-2"},br={class:"flex text-sm"},xr=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备ID",-1)),yr={class:"min-w-0 truncate"},wr={class:"flex text-sm"},kr=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备端点信息",-1)),$r={class:"min-w-0 truncate"},Sr={class:"pl-3 -indent-3"},Cr={class:"select-all"},Er={class:"flex text-sm"},Pr=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"中继器",-1)),Rr={class:"min-w-0 truncate"},Mr={key:0},Nr=B(()=>e("li",null," 中继器未设定或出错 ",-1)),jr=[Nr],Ir={key:1},Br={class:"font-medium"},Ar={key:0,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"relative inline-block ml-1 -top-px"},Or=B(()=>e("polyline",{points:"20 6 9 17 4 12"},null,-1)),Lr=[Or],Dr={class:"space-y-2"},Ur={class:"flex text-sm"},Tr=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建于",-1)),Hr={class:"min-w-0 truncate"},zr={class:"flex text-sm"},Vr=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"最近更新",-1)),Gr={class:"min-w-0 truncate"},Kr={class:"flex text-sm"},qr=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"密钥过期",-1)),Fr={key:0,class:"min-w-0 truncate"},Wr={key:1,class:"min-w-0 truncate"},Qr=B(()=>e("h2",{class:"pt-2 text-xs uppercase font-semibold text-gray-500 tracking-wide"}," 客户端连通性 ",-1)),Xr={class:"flex text-sm"},Yr=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"复杂网络 Varies",-1)),Zr={key:0,class:"min-w-0 truncate"},Jr={key:1,class:"min-w-0 truncate"},ec={class:"flex text-sm"},tc=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"}," 需发夹机制 Hairpinning ",-1)),sc={key:0,class:"min-w-0 truncate"},nc={key:1,class:"min-w-0 truncate"},oc={class:"flex text-sm"},ac=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"IPv6",-1)),ic={key:0,class:"min-w-0 truncate"},lc={key:1,class:"min-w-0 truncate"},rc={class:"flex text-sm"},cc=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UDP",-1)),dc={key:0,class:"min-w-0 truncate"},uc={key:1,class:"min-w-0 truncate"},hc={class:"flex text-sm"},vc=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UPnP",-1)),mc={key:0,class:"min-w-0 truncate"},fc={key:1,class:"min-w-0 truncate"},pc={class:"flex text-sm"},gc=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"PCP",-1)),_c={key:0,class:"min-w-0 truncate"},bc={key:1,class:"min-w-0 truncate"},xc={class:"flex text-sm"},yc=B(()=>e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"NAT-PMP",-1)),wc={key:0,class:"min-w-0 truncate"},kc={key:1,class:"min-w-0 truncate"},$c={__name:"Machine",setup(t){const s=y(!1),n=at(),o=it(),a=y(!1),c=y("");Ee(a,()=>{a.value&&setTimeout(function(){a.value=!1},5e3)});const g=W(()=>f.value.issharedin||f.value.issharedout||f.value.expirydesc=="已过期"||f.value.neverExpires||f.value.soonexpiry||f.value.advertisedExitNode||f.value.hasSubnets),h=y(null),r=y(0),l=y(0),i=y(!1);function d(){var j,T;h.value!=null&&(r.value=((j=h.value)==null?void 0:j.getBoundingClientRect().left)+78,l.value=((T=h.value)==null?void 0:T.getBoundingClientRect().top)+20),window.onresize=()=>{var F,D;h.value!=null&&(r.value=((F=h.value)==null?void 0:F.getBoundingClientRect().left)+78,l.value=((D=h.value)==null?void 0:D.getBoundingClientRect().top)+20)},window.onscroll=()=>{var F,D;h.value!=null&&(r.value=((F=h.value)==null?void 0:F.getBoundingClientRect().left)+78,l.value=((D=h.value)==null?void 0:D.getBoundingClientRect().top)+20)}}function v(j){var T,F,D,O,M;for(h.value=j.target;((T=h.value)==null?void 0:T.tagName)!="BUTTON"&&((F=h.value)==null?void 0:F.tagName)!="button";)h.value=(D=h.value)==null?void 0:D.parentNode;r.value=((O=h.value)==null?void 0:O.getBoundingClientRect().left)+78,l.value=((M=h.value)==null?void 0:M.getBoundingClientRect().top)+20,i.value=!0}function _(){h.value=null,i.value=!1}const b=y(!1);function N(){_(),b.value=!0}const I=y(!1);function R(){_(),I.value=!0}const x=y(!1);function U(){_(),x.value=!0}const f=y({}),w=y(""),z=y("");pe(()=>{d(),axios.get("/admin/api/machines").then(function(j){if((j.data.needreauth!=null||j.data.needreauth==!0)&&(c.value=j.data.needreauthreason+"，登录状态失效，请重新登录",a.value=!0,reject()),j.data.errormsg==null||j.data.errormsg===""){z.value=j.data.basedomain;for(var T in j.data.mlist)if(j.data.mlist[T].mipv4===o.params.mip){f.value=j.data.mlist[T],w.value=T;let F=f.value.expirydesc.slice(-2);f.value.expirydesc=="马上就要过期"||F=="分钟"||F=="小时"||F=="1天"?f.value.soonexpiry=!0:f.value.soonexpiry=!1;break}}}).catch(function(j){alert(j)}).then(function(){})});function ee(){_(),axios.post("/admin/api/machines",{mid:w.value,state:"set-expires"}).then(function(j){j.data.status=="success"?(f.value.neverExpires=j.data.data.neverExpires,f.value.expirydesc=j.data.data.expires,j.data.data.neverExpires==!0?c.value="已禁用密钥过期":c.value="已启用密钥过期",a.value=!0):(c.value="失败："+j.data.status.substring(6),a.value=!0)}).catch(function(j){console.log(j)})}function ye(){axios.post("/admin/api/machine/remove",{mid:w}).then(function(j){j.data.status=="OK"?(b.value=!1,c.value=f.value.name+"已从您的蜃境网络移除！",a.value=!0,n.push("/machines")):alert("失败："+j.data.errmsg)}).catch(function(j){console.log(j)})}function we(j,T,F){f.value.name=j,f.value.automaticNameMode=T,be(()=>{I.value=!F,be(()=>{c.value="已更新设备名称！",a.value=!0})})}function ke(j){c.value="更新设备名称失败！",a.value=!0}function $e(j,T,F,D){f.value.advertisedIPs=j,f.value.allowedIPs=T,f.value.extraIPs=F,f.value.allowedExitNode=D,be(()=>{c.value="已更新子网转发设置！",a.value=!0})}function de(j){c.value="更新子网转发设置失败！",a.value=!0}return(j,T)=>{const F=Oe("router-link");return u(),m(te,null,[e("main",Si,[e("section",Ci,[e("header",Ei,[e("div",Pi,[ne(F,{to:"/machines",class:"text-blue-500"},{default:le(()=>[q("全部设备")]),_:1}),Ri,e("span",null,S(f.value.mipv4),1)]),e("div",Mi,[e("h1",Ni,S(f.value.name),1),e("div",ji,[e("div",Ii,[e("button",{onClick:T[0]||(T[0]=D=>v(D)),class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 min-w-0"},Ai)])])]),e("div",Oi,[e("div",Li,[Di,e("div",Ui,[e("div",Ti,[e("div",Hi,[e("div",zi,S(f.value.usernamehead),1)]),e("span",Vi,S(f.value.useraccount),1)])])]),G(g)?(u(),m("div",Gi,[Ki,e("div",null,[f.value.issharedin?(u(),m("span",qi,Wi)):$("",!0),f.value.issharedout?(u(),m("span",Qi,Yi)):$("",!0),f.value.expirydesc=="已过期"?(u(),m("span",Zi,el)):$("",!0),f.value.neverExpires?(u(),m("span",tl,nl)):$("",!0),f.value.soonexpiry?(u(),m("span",ol,[e("div",al,S(f.value.expirydesc),1)])):$("",!0),f.value.hasSubnets?(u(),m("span",il,[e("div",ll,[q(" 子网转发 "),f.value.hasSubnets&&f.value.extraIPs&&f.value.extraIPs.length>0?(u(),m("div",rl,dl)):$("",!0)])])):$("",!0),f.value.advertisedExitNode?(u(),m("span",ul,[e("div",hl,[q(" 出口节点 "),f.value.allowedExitNode?$("",!0):(u(),m("div",vl,fl))])])):$("",!0)])])):$("",!0)])]),e("section",pl,[e("header",gl,[_l,f.value.hasSubnets?(u(),m("div",bl,[e("button",{onClick:U,class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 mt-2"}," 配置 ")])):$("",!0)]),f.value.hasSubnets?(u(),m("div",xl,[e("ul",yl,[(u(!0),m(te,null,re(f.value.allowedIPs,D=>(u(),m("li",null,[e("span",null,S(D),1)]))),256)),(u(!0),m(te,null,re(f.value.extraIPs,D=>(u(),m(te,null,[e("li",wl,[e("span",null,S(D),1)]),kl],64))),256))])])):$("",!0),!f.value.hasSubnets&&!f.value.issharedin?(u(),m("div",$l,Cl)):$("",!0),f.value.issharedin?(u(),m("div",El,Rl)):$("",!0)]),e("section",Ml,[Nl,e("div",jl,[e("div",Il,[e("dl",Bl,[Al,e("dd",Ol,S(f.value.useraccount),1)]),e("dl",Ll,[Dl,e("dd",Ul,[e("div",Tl,[e("div",Hl,S(f.value.name),1),s.value?(u(),m("div",zl,"复制")):$("",!0)])])]),e("dl",Vl,[Gl,e("dd",Kl,[e("div",ql,[e("div",Fl,S(f.value.name)+"."+S(f.value.useraccount)+"."+S(z.value),1),s.value?(u(),m("div",Wl,"复制")):$("",!0)])])]),e("dl",Ql,[Xl,e("dd",Yl,S(f.value.hostname),1)]),e("dl",Zl,[Jl,e("dd",er,S(f.value.os),1)]),e("dl",tr,[sr,e("dd",nr,[e("div",or,S(f.value.version),1)])]),e("dl",ar,[ir,e("dd",lr,[e("div",rr,[e("div",cr,[e("span",null,S(f.value.mipv4),1)]),s.value?(u(),m("div",dr,"复制")):$("",!0)])])]),e("dl",ur,[hr,e("dd",vr,[e("div",mr,[e("div",fr,[e("span",pr,[e("span",gr,S(f.value.mipv6),1)])]),s.value?(u(),m("div",_r,"复制")):$("",!0)])])]),e("dl",br,[xr,e("dd",yr,S(w.value),1)]),e("dl",wr,[kr,e("dd",$r,[e("ul",Sr,[(u(!0),m(te,null,re(f.value.endpoints,D=>(u(),m("li",Cr,[e("span",null,S(D),1)]))),256))])])]),e("dl",Er,[Pr,e("dd",Rr,[f.value.usederp=="x"?(u(),m("ul",Mr,jr)):(u(),m("ul",Ir,[(u(!0),m(te,null,re(f.value.derps,(D,O)=>(u(),m("li",null,[e("strong",Br,S(O)+" 号中继",1),q(": "+S(D)+" ms ",1),f.value.usederp==O?(u(),m("svg",Ar,Lr)):$("",!0)]))),256))]))])])]),e("div",Dr,[e("dl",Ur,[Tr,e("dd",Hr,S(f.value.createat),1)]),e("dl",zr,[Vr,e("dd",Gr,S(f.value.lastseen),1)]),e("dl",Kr,[qr,f.value.neverExpires?(u(),m("dd",Fr," 永不过期 ")):$("",!0),f.value.neverExpires?$("",!0):(u(),m("dd",Wr,S(f.value.expirydesc),1))]),Qr,e("dl",Xr,[Yr,f.value.varies?(u(),m("dd",Zr,"是")):(u(),m("dd",Jr,"否"))]),e("dl",ec,[tc,f.value.hairpinning?(u(),m("dd",sc,"是")):(u(),m("dd",nc,"否"))]),e("dl",oc,[ac,f.value.ipv6en?(u(),m("dd",ic,"是")):(u(),m("dd",lc,"否"))]),e("dl",rc,[cc,f.value.udpen?(u(),m("dd",dc,"是")):(u(),m("dd",uc,"否"))]),e("dl",hc,[vc,f.value.upnpen?(u(),m("dd",mc,"是")):(u(),m("dd",fc,"否"))]),e("dl",pc,[gc,f.value.pcpen?(u(),m("dd",_c,"是")):(u(),m("dd",bc,"否"))]),e("dl",xc,[yc,f.value.pmpen?(u(),m("dd",wc,"是")):(u(),m("dd",kc,"否"))])])])])])]),(u(),Z(fe,{to:".toast-container"},[ne(tt,{show:a.value,msg:c.value,onClose:T[1]||(T[1]=D=>a.value=!1)},null,8,["show","msg"])])),(u(),Z(fe,{to:"body"},[i.value?(u(),Z(Vt,{key:0,toleft:r.value,totop:l.value,neverExpires:f.value.neverExpires,onClose:_,onSetExpires:ee,onShowdialogRemove:N,onShowdialogUpdatehostname:R,onShowdialogSetsubnet:U},null,8,["toleft","totop","neverExpires"])):$("",!0)])),(u(),Z(fe,{to:"body"},[b.value?(u(),Z(Gt,{key:0,"machine-name":f.value.name,onClose:T[2]||(T[2]=D=>b.value=!1),onConfirm:ye},null,8,["machine-name"])):$("",!0),I.value?(u(),Z(Kt,{key:1,id:w.value,"host-name":f.value.hostname,"given-name":f.value.name,"auto-gen":f.value.automaticNameMode,onClose:T[3]||(T[3]=D=>I.value=!1),onUpdateDone:we,onUpdateFail:ke},null,8,["id","host-name","given-name","auto-gen"])):$("",!0),x.value?(u(),Z(qt,{key:2,id:w.value,"current-machine":f.value,onClose:T[4]||(T[4]=D=>x.value=!1),onUpdateDone:$e,onUpdateFail:de},null,8,["id","current-machine"])):$("",!0)]))],64)}}},Sc=Me($c,[["__scopeId","data-v-2820c8a8"]]);const ae=t=>(Ue("data-v-a6bfe761"),t=t(),Te(),t),Cc={class:"container mx-auto pb-20 md:pb-24"},Ec={class:"mb-24"},Pc=ae(()=>e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2",tabindex:"-1"},"DNS")])])],-1)),Rc={class:"mb-16 max-w-2xl"},Mc=ae(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},"蜃境网域"),e("p",{class:"text-gray-600"},"这个名称用来注册DNS条目、分享设备给其他蜃境网域以及发放TLS证书")],-1)),Nc={class:"max-w-sm"},jc={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0"},Ic=["value"],Bc={class:"mb-16 max-w-2xl"},Ac=ae(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},"幻域"),e("p",{class:"text-gray-600"},"自动为您蜃境网域中的设备注册域名，令您从而可以使用名称替代IP地址访问设备")],-1)),Oc={key:0,class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit"},Lc={key:1,class:"btn border-0 bg-blue-500 hover:bg-blue-900 text-white h-9 min-h-fit"},Dc={class:"mb-16 max-w-2xl"},Uc=ae(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},"域名服务器"),e("p",{class:"text-gray-600"},"设置您网络中设备可用来解析DNS的域名服务器")],-1)),Tc={class:"text-gray-900"},Hc={key:0,class:"py-3"},zc={class:"flex mb-1"},Vc={class:"font-medium text-gray-600 mr-2 mb-1"},Gc=ge('<div class="space-x-2 mb-1" data-v-a6bfe761><div class="inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs relative -top-px" data-v-a6bfe761><svg width="0.9em" height="0.9em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-1" data-v-a6bfe761><path d="M6.5 12.5L8.05719 15.9428L11.5 17.5L8.05719 19.0572L6.5 22.5L4.94281 19.0572L1.5 17.5L4.94281 15.9428L6.5 12.5Z" fill="currentColor" data-v-a6bfe761></path><path d="M15.5 1L17.8358 6.16421L23 8.5L17.8358 10.8358L15.5 16L13.1642 10.8358L8 8.5L13.1642 6.16421L15.5 1Z" fill="currentColor" data-v-a6bfe761></path></svg><span data-v-a6bfe761>幻域</span></div></div>',1),Kc={class:"border border-gray-200 bg-white rounded-md divide-y overflow-hidden"},qc={class:"flex justify-between select-none"},Fc=ae(()=>e("div",{class:"pl-4 flex flex-1 items-start"},[e("div",{class:"tabular-nums pr-2 py-2 w-full"},"100.100.100.100")],-1)),Wc={class:"p-2 pr-4 flex items-center justify-center"},Qc={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400",style:{transform:"translateX(0.125rem) scale(0.75)"}},Xc=ae(()=>e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},null,-1)),Yc=ae(()=>e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)),Zc=[Xc,Yc],Jc={"data-rbd-droppable-id":"search-domains","data-rbd-droppable-context-id":"0"},ed={class:"DNSDomainGroup py-3 -mx-3 px-3 rounded-md","data-rbd-draggable-context-id":"0","data-rbd-draggable-id":"abc.com"},td={class:"flex items-center mb-1",tabindex:"0",role:"button","aria-describedby":"rbd-hidden-text-0-hidden-text-0","data-rbd-drag-handle-draggable-id":"abc.com","data-rbd-drag-handle-context-id":"0",draggable:"false"},sd=ge('<div class="py-1 px-2 -ml-2" data-v-a6bfe761><svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" class="relative -top-px text-gray-400" data-v-a6bfe761><circle cx="12" cy="12" r="10" data-v-a6bfe761></circle><line x1="2" y1="12" x2="22" y2="12" data-v-a6bfe761></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" data-v-a6bfe761></path></svg></div>',1),nd={class:"font-medium mb-1 mr-2 text-gray-600"},od=ge('<div class="space-x-2 mb-1" data-v-a6bfe761><span data-state="closed" data-v-a6bfe761><div class="inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs" data-v-a6bfe761><svg xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1" data-v-a6bfe761><polyline points="16 3 21 3 21 8" data-v-a6bfe761></polyline><line x1="4" y1="20" x2="21" y2="3" data-v-a6bfe761></line><polyline points="21 16 21 21 16 21" data-v-a6bfe761></polyline><line x1="15" y1="15" x2="21" y2="21" data-v-a6bfe761></line><line x1="4" y1="4" x2="9" y2="9" data-v-a6bfe761></line></svg>分离 DNS </div></span></div>',1),ad={class:"border border-gray-200 bg-white rounded-md divide-y overflow-hidden"},id={class:"transition-shadow -mb-px flex justify-between select-none"},ld={class:"pl-4 flex flex-1 items-start"},rd={class:"tabular-nums pr-2 py-2 w-full"},cd=ge('<div class="pr-2 pt-1.5" data-v-a6bfe761><button type="button" id="radix-:r19:" aria-haspopup="menu" aria-expanded="false" data-state="closed" class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 group-hover:border-gray-300/100 hover:border-gray-300/100 group-hover:bg-white hover:!bg-gray-0 group-hover:shadow-md hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-50" data-v-a6bfe761><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Actions…" class="text-gray-500" data-v-a6bfe761><circle cx="12" cy="12" r="1" data-v-a6bfe761></circle><circle cx="19" cy="12" r="1" data-v-a6bfe761></circle><circle cx="5" cy="12" r="1" data-v-a6bfe761></circle></svg></button></div>',1),dd={class:"pt-3"},ud={class:"flex items-center mb-2"},hd=ae(()=>e("h4",{class:"font-medium text-gray-600 mr-2"},"全球域名服务器",-1)),vd={class:"flex items-center space-x-2 ml-auto"},md=ae(()=>e("label",{class:"flex items-center cursor-pointer text-sm font-medium select-none space-x-1 text-gray-500",for:"fallback"},[e("span",null,"覆盖本地 DNS")],-1)),fd={class:"border border-gray-200 bg-white rounded-md divide-y overflow-hidden"},pd={key:0,class:"-mb-px flex justify-between select-none"},gd=ae(()=>e("div",{class:"pl-4 flex flex-1 items-start text-gray-400"},[e("div",{class:"tabular-nums pr-2 py-2 w-full"},"本地 DNS 设置")],-1)),_d={class:"p-2 pr-4 flex items-center justify-center"},bd={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400",style:{transform:"translateX(0.125rem) scale(0.75)"}},xd=ae(()=>e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},null,-1)),yd=ae(()=>e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,-1)),wd=[xd,yd],kd={class:"transition-shadow -mb-px flex justify-between select-none"},$d={class:"pl-4 flex flex-1 items-start"},Sd={class:"tabular-nums pr-2 py-2 w-full"},Cd=ge('<div class="pr-2 pt-1.5" data-v-a6bfe761><button type="button" id="radix-:r26:" aria-haspopup="menu" aria-expanded="false" data-state="closed" class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 group-hover:border-gray-300/100 hover:border-gray-300/100 group-hover:bg-white hover:!bg-gray-0 group-hover:shadow-md hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-50" data-v-a6bfe761><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Actions…" class="text-gray-500" data-v-a6bfe761><circle cx="12" cy="12" r="1" data-v-a6bfe761></circle><circle cx="19" cy="12" r="1" data-v-a6bfe761></circle><circle cx="5" cy="12" r="1" data-v-a6bfe761></circle></svg></button></div>',1),Ed=ae(()=>e("button",{class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit mt-8"},[q(" 添加域名服务器 "),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.2","stroke-linecap":"round","stroke-linejoin":"round",class:"ml-2"},[e("polyline",{points:"6 9 12 15 18 9"})])],-1)),Pd={key:0,class:"mb-16 max-w-2xl"},Rd=ae(()=>e("header",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold tracking-tight mb-1"},[q("HTTPS 证书"),e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-yellow-50 bg-yellow-50 text-yellow-600 rounded-full px-2 py-1 leading-none relative text-sm ml-2 -top-px"}," Unavailable")]),e("p",{class:"text-gray-600"},"允许用户为他们的设备生辰HTTPS证书")],-1)),Md={key:0,class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit"},Nd={__name:"DNS",setup(t){const s=y("true"),n=y(""),o=y([]),a=y([]),c=y({}),g=y(!1),h=y(!1),r=y("复制");function l(){navigator.clipboard.writeText(n.value).then(function(){r.value="已复制!",setTimeout(()=>{r.value="复制"},3e3)})}return pe(()=>{axios.get("/admin/api/dns").then(function(i){if(i.data.status=="success"){n.value=i.data.data.magicDNSDomains[0],g.value=i.data.data.magicDNS,h.value=i.data.data.resolvers&&i.data.data.resolvers.length>0,h.value?o.value=i.data.data.resolvers:o.value=i.data.data.fallbackResolvers,a.value=i.data.data.domains;for(var d in i.data.data.routes)c.value[d]=i.data.data.routes[d]}else i.data.status.substring(6)=="用户信息核对失败"}).catch(function(i){alert(i)})}),(i,d)=>(u(),m("main",Cc,[e("section",Ec,[Pc,e("section",Rc,[Mc,e("div",Nc,[e("div",jc,[e("input",{onclick:"this.select()",class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:n.value},null,8,Ic),e("button",{onClick:l,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},S(r.value),1)])]),e("button",{disabled:"",onClick:d[0]||(d[0]=v=>i.$emit("")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit mt-8"},"网域重命名")]),e("section",Bc,[Ac,g.value?(u(),m("button",Oc,"停用幻域…")):$("",!0),g.value?$("",!0):(u(),m("button",Lc,"启用幻域"))]),e("section",Dc,[Uc,e("div",Tc,[g.value?(u(),m("div",Hc,[e("header",zc,[e("h4",Vc,S(n.value),1),Gc]),e("div",Kc,[e("div",qc,[Fc,e("div",Wc,[(u(),m("svg",Qc,Zc))])])])])):$("",!0),e("div",Jc,[(u(!0),m(te,null,re(a.value,v=>(u(),m("div",ed,[e("header",td,[sd,e("h4",nd,S(v),1),od]),(u(!0),m(te,null,re(c.value[v],_=>(u(),m("div",ad,[e("div",id,[e("div",ld,[e("div",rd,S(_),1)]),cd])]))),256))]))),256))]),e("div",dd,[e("header",ud,[hd,e("div",vd,[md,xe(e("input",{"onUpdate:modelValue":d[1]||(d[1]=v=>h.value=v),id:"fallback",ref:"fallback",type:"checkbox",class:"toggle toggle-xs"},null,512),[[Mt,h.value]])])]),e("div",fd,[h.value?$("",!0):(u(),m("div",pd,[gd,e("div",_d,[(u(),m("svg",bd,wd))])])),(u(!0),m(te,null,re(o.value,v=>(u(),m("div",kd,[e("div",$d,[e("div",Sd,S(v),1)]),Cd]))),256))])])]),Ed]),s.value?$("",!0):(u(),m("section",Pd,[Rd,(u(),m("button",Md,"停用HTTPS证书…")),$("",!0)]))])]))}},jd=Me(Nd,[["__scopeId","data-v-a6bfe761"]]),Id={class:"flex-1"},Bd=e("div",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"},[e("h1",{class:"mr-2",tabindex:"-1"},"通用")],-1),Ad=e("div",{class:"text-gray-600 mt-3 mb-10"},[e("p",null,"管理您的蜃境网络配置")],-1),Od={class:"mt-10"},Ld={class:"space-y-10"},Dd=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"机构"),e("p",{class:"mt-1 text-gray-600"}," 这是您所属机构名称（个人用户显示您的账户），无法修改！ ")],-1),Ud={class:"mt-4"},Td={class:"max-w-sm"},Hd={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0"},zd=["value"],Vd=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"密钥过期"),e("p",{class:"mt-1 text-gray-600"}," 设置设备可以保持登录蜃境网络而不需重新登录认证的天数 ")],-1),Gd={class:"mt-4"},Kd={class:"flex"},qd={class:"relative"},Fd={class:"bg-white top-1 bottom-1 right-1 rounded-r-md absolute flex items-center"},Wd={class:"flex items-center"},Qd=["disabled"],Xd=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),Yd=[Xd],Zd=["disabled"],Jd=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),eu=[Jd],tu=e("div",{class:"flex items-center px-3 bg-gray-50 text-gray-500 border rounded-r border-l-0 border-gray-300"}," 天 ",-1),su=e("p",{class:"text-sm text-gray-500 mt-1"},"请设置为1~180天",-1),nu={class:"mt-4"},ou=["disabled"],au=["disabled"],iu={class:"mt-8"},lu=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"注销蜃境"),e("p",{class:"mt-1 text-gray-600"}," 永久注销蜃境网络（删除所有设备及用户信息），无法恢复！ ")],-1),ru={class:"mt-4"},cu=["disabled"],Ie={__name:"General",setup(t){const s=y(!0),n=y(!1),o=y("");Ee(n,()=>{n.value&&setTimeout(function(){n.value=!1},5e3)});const a=y(""),c=y(""),g=y(""),h=y(""),r=y(""),l=y(180),i=y(180),d=y(!1),v=y(!1),_=y(!1),b=y("复制");function N(){navigator.clipboard.writeText(r.value).then(function(){b.value="已复制!",setTimeout(()=>{b.value="复制"},3e3)})}function I(){Number(i.value)>1?d.value=!1:d.value=!0,Number(i.value)<180?v.value=!1:v.value=!0,Number(i.value)!=l.value?_.value=!1:_.value=!0}function R(w){i.value=i.value.replace(/[^\d]+/g,"").replace(/^0+(\d)/,"$1"),i.value==""&&(i.value=0),w&&Number(i.value)>180&&(i.value=180),I()}function x(w){w==!0?i.value=Number(i.value)+1:i.value=Number(i.value)-1,I()}function U(){i.value=l.value,I()}pe(()=>{axios.get("/admin/api/self").then(function(w){(w.data.errormsg==null||w.data.errormsg==="")&&(a.value=w.data.useraccount,c.value=w.data.basedomain,g.value=w.data.username,h.value=w.data.usernamehead,r.value=w.data.orgname)}).catch(function(w){alert(w)}).then(function(){}),axios.get("/admin/api/netsettings").then(function(w){w.data.status=="success"?(l.value=w.data.data.maxKeyDurationDays,i.value=w.data.data.maxKeyDurationDays,I()):w.data.status.substring(6)=="用户信息核对失败"}).catch(function(w){alert(w)}).then(function(){})});function f(){axios.post("/admin/api/netsetting/updatekeyexpiry",{maxKeyDurationDays:Number(i.value)}).then(function(w){w.data.status=="success"?(l.value=w.data.data,I(),o.value="已更新您网络中节点密钥最长有效期！",n.value=!0):(o.value="失败："+w.data.status.substring(6),n.value=!0)}).catch(function(w){console.log(w)})}return(w,z)=>(u(),m(te,null,[e("div",Id,[Bd,Ad,e("div",Od,[e("div",Ld,[e("div",null,[Dd,e("div",Ud,[e("div",Td,[e("div",Hd,[e("input",{onclick:"this.select()",class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:r.value},null,8,zd),e("button",{onClick:N,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},S(b.value),1)])])])]),e("div",null,[Vd,e("div",Gd,[e("div",Kd,[e("div",qd,[xe(e("input",{"onUpdate:modelValue":z[0]||(z[0]=ee=>i.value=ee),onInput:z[1]||(z[1]=ee=>R(!1)),onBlur:z[2]||(z[2]=ee=>R(!0)),class:"input z-0 border focus:outline-blue-500/60 hover:border border-stone-200 hover:border-stone-400 rounded-r-none h-9 min-h-fit",inputmode:"numeric",pattern:"[0-9]*",id:"key-expiry-duration",tabindex:"0"},null,544),[[Nt,i.value]]),e("div",Fd,[e("div",Wd,[e("button",{onClick:z[3]||(z[3]=ee=>x(!1)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:d.value,type:"button",tabindex:"-1"},Yd,8,Qd),e("button",{onClick:z[4]||(z[4]=ee=>x(!0)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:v.value,type:"button",tabindex:"-1"},eu,8,Zd)])])]),tu]),su,e("div",nu,[e("button",{onClick:f,class:"btn border-0 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-600/60 text-white disabled:text-white/60 h-9 min-h-fit",disabled:_.value}," 保存 ",8,ou),e("button",{onClick:U,class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3",disabled:_.value}," 重置 ",8,au)])])])]),e("div",iu,[lu,e("div",ru,[e("button",{disabled:s.value,class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit"}," 注销蜃境… ",8,cu)])])])]),(u(),Z(fe,{to:".toast-container"},[ne(tt,{show:n.value,msg:o.value,onClose:z[5]||(z[5]=ee=>n.value=!1)},null,8,["show","msg"])]))],64))}},du={},uu={class:"flex-1"},hu=ge('<div class="text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"><h1 class="mr-2" tabindex="-1">密钥管理</h1></div><div class="text-gray-600 mt-3 mb-10"><p>查看和管理您的<strong>授权密钥</strong>和<strong>API密钥</strong></p><p class="mt-2">您个人设备的私钥<strong>不</strong>在此管理，它们永远是<strong>私有</strong>并存在于您的设备上，<strong>不</strong>向蜃境披露</p></div><div class="mt-10"><div class="flex justify-between items-center mt-16"><div><h3 class="text-xl font-semibold tracking-tight">授权密钥</h3><p class="text-gray-600">用于无需交互式登录即可实现设备鉴别接入 </p></div><button class="btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"> 生成授权密钥…</button></div><div class="rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"><div class="flex justify-center"><div class="w-full text-center max-w-xl text-gray-500">你还没有任何密钥</div></div></div><div class="flex justify-between items-center mt-16"><div><h3 class="text-xl font-semibold tracking-tight">API 密钥</h3><p class="text-gray-600">API 密钥用于访问蜃境API.</p></div><button class="btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"> 生成 API 密钥…</button></div><div class="rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"><div class="flex justify-center"><div class="w-full text-center max-w-xl text-gray-500">你还没有任何密钥</div></div></div></div>',3),vu=[hu];function mu(t,s){return u(),m("div",uu,vu)}const fu=Me(du,[["render",mu]]),pu={class:"container mx-auto pb-20 md:pb-24"},gu={class:"md:flex md:mt-16"},_u={class:"mb-10 md:mr-20 lg:mr-40"},bu={class:"hidden md:block"},xu={class:"flex flex-row mb-12"},yu=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),wu={class:"ml-4"},ku=e("h2",{class:"text-gray-500 font-medium"},"网络配置",-1),$u={class:"flex flex-row mb-12"},Su=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),Cu={class:"ml-4"},Eu=e("h2",{class:"text-gray-500 font-medium"},"个人设置",-1),Pu={class:"select-with-arrow md:hidden mb-4"},Ru=ge('<optgroup label="网络配置"><option value="features">敬请期待</option><option value="general">通用</option><option value="webhooks">敬请期待</option><option value="billing">敬请期待</option><option value="contact-preferences">敬请期待</option></optgroup><optgroup label="个人设置"><option value="keys">密钥管理</option></optgroup>',2),Mu=[Ru],Nu={__name:"Settings",setup(t){const s={general:Ie,features:Ie,webhooks:Ie,billing:Ie,"contact-preferences":Ie,keys:fu},n=it(),o=at(),a=y("");function c(g){o.push("/settings/"+g.target.value)}return Qs((g,h)=>{a.value=g.params.setpart}),pe(()=>{a.value=n.params.setpart}),(g,h)=>{const r=Oe("router-link");return u(),m("main",pu,[e("section",gu,[e("div",_u,[e("div",bu,[e("div",xu,[yu,e("div",wu,[ku,ne(r,{class:oe(["flex font-medium mt-4",{"text-blue-600":a.value=="general","text-gray-700":a.value!="general"}]),to:"/settings/general"},{default:le(()=>[q("通用")]),_:1},8,["class"]),ne(r,{class:oe(["flex font-medium mt-4",{"text-blue-600":a.value=="features","text-gray-700":a.value!="features"}]),to:"/settings/features"},{default:le(()=>[q("敬请期待")]),_:1},8,["class"]),ne(r,{class:oe(["flex font-medium mt-4",{"text-blue-600":a.value=="webhooks","text-gray-700":a.value!="webhooks"}]),to:"/settings/webhooks"},{default:le(()=>[q("敬请期待")]),_:1},8,["class"]),ne(r,{class:oe(["flex font-medium mt-4",{"text-blue-600":a.value=="billing","text-gray-700":a.value!="billing"}]),to:"/settings/billing"},{default:le(()=>[q("敬请期待")]),_:1},8,["class"]),ne(r,{class:oe(["flex font-medium mt-4",{"text-blue-600":a.value=="contact-preferences","text-gray-700":a.value!="contact-preferences"}]),to:"/settings/contact-preferences"},{default:le(()=>[q("敬请期待")]),_:1},8,["class"])])]),e("div",$u,[Su,e("div",Cu,[Eu,ne(r,{class:oe(["flex font-medium mt-4",{"text-blue-600":a.value=="keys","text-gray-700":a.value!="keys"}]),to:"/settings/keys"},{default:le(()=>[q("密钥管理")]),_:1},8,["class"])])])]),e("div",Pu,[xe(e("select",{"onUpdate:modelValue":h[0]||(h[0]=l=>a.value=l),onChange:c,class:"select select-bordered w-full text-lg"},Mu,544),[[Xt,a.value,void 0,{lazy:!0}]])])]),(u(),Z(Yt(s[a.value])))])])}}},ju=[{path:"/",redirect:"/machines"},{path:"/machines",component:$i},{path:"/machines/:mip",component:Sc},{path:"/dns",component:jd},{path:"/settings",redirect:"/settings/general"},{path:"/settings/:setpart",component:Nu}],Iu=nn({history:_s(),routes:ju}),qe=Zt(Yn);qe.config.errorHandler=t=>{};qe.use(Jt);qe.use(Iu);qe.mount("#app");
