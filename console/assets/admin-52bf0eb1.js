import{s as Ut,u as K,d as Q,r as gt,i as ie,n as $e,e as _t,f as Lt,g as zt,h as xt,j as bt,p as Le,k as y,w as fe,l as me,o as v,c as x,m as e,t as E,q as yt,v as wt,x as ge,y as Y,z as P,A as X,T as ce,B as te,C as oe,F as ue,D as Ee,E as se,G as Se,_ as kt,H as Dt,I as $t,J as Vt,K as Gt,L as Pe,a as Ne,M as Kt,N as qt,b as Ft}from"./plugin-vueexport-helper-ac4b9177.js";import{u as je,_ as Fe,p as Wt}from"./Toast-74b886ba.js";/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const he=typeof window<"u";function Qt(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const H=Object.assign;function ze(t,s){const n={};for(const o in s){const a=s[o];n[o]=ne(a)?a.map(t):t(a)}return n}const we=()=>{},ne=Array.isArray,Yt=/\/$/,Xt=t=>t.replace(Yt,"");function De(t,s,n="/"){let o,a={},u="",p="";const h=s.indexOf("#");let l=s.indexOf("?");return h<l&&h>=0&&(l=-1),l>-1&&(o=s.slice(0,l),u=s.slice(l+1,h>-1?h:s.length),a=t(u)),h>-1&&(o=o||s.slice(0,h),p=s.slice(h,s.length)),o=ts(o??s,n),{fullPath:o+(u&&"?")+u+p,path:o,query:a,hash:p}}function Zt(t,s){const n=s.query?t(s.query):"";return s.path+(n&&"?")+n+(s.hash||"")}function tt(t,s){return!s||!t.toLowerCase().startsWith(s.toLowerCase())?t:t.slice(s.length)||"/"}function Jt(t,s,n){const o=s.matched.length-1,a=n.matched.length-1;return o>-1&&o===a&&ve(s.matched[o],n.matched[a])&&Et(s.params,n.params)&&t(s.query)===t(n.query)&&s.hash===n.hash}function ve(t,s){return(t.aliasOf||t)===(s.aliasOf||s)}function Et(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(!es(t[n],s[n]))return!1;return!0}function es(t,s){return ne(t)?st(t,s):ne(s)?st(s,t):t===s}function st(t,s){return ne(s)?t.length===s.length&&t.every((n,o)=>n===s[o]):t.length===1&&t[0]===s}function ts(t,s){if(t.startsWith("/"))return t;if(!t)return s;const n=s.split("/"),o=t.split("/");let a=n.length-1,u,p;for(u=0;u<o.length;u++)if(p=o[u],p!==".")if(p==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+o.slice(u-(u===o.length?1:0)).join("/")}var Ce;(function(t){t.pop="pop",t.push="push"})(Ce||(Ce={}));var ke;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ke||(ke={}));function ss(t){if(!t)if(he){const s=document.querySelector("base");t=s&&s.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Xt(t)}const ns=/^[^#]+#/;function os(t,s){return t.replace(ns,"#")+s}function as(t,s){const n=document.documentElement.getBoundingClientRect(),o=t.getBoundingClientRect();return{behavior:s.behavior,left:o.left-n.left-(s.left||0),top:o.top-n.top-(s.top||0)}}const Ae=()=>({left:window.pageXOffset,top:window.pageYOffset});function is(t){let s;if("el"in t){const n=t.el,o=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;s=as(a,t)}else s=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(s):window.scrollTo(s.left!=null?s.left:window.pageXOffset,s.top!=null?s.top:window.pageYOffset)}function nt(t,s){return(history.state?history.state.position-s:-1)+t}const Ge=new Map;function ls(t,s){Ge.set(t,s)}function rs(t){const s=Ge.get(t);return Ge.delete(t),s}let cs=()=>location.protocol+"//"+location.host;function Ct(t,s){const{pathname:n,search:o,hash:a}=s,u=t.indexOf("#");if(u>-1){let h=a.includes(t.slice(u))?t.slice(u).length:1,l=a.slice(h);return l[0]!=="/"&&(l="/"+l),tt(l,"")}return tt(n,t)+o+a}function us(t,s,n,o){let a=[],u=[],p=null;const h=({state:m})=>{const g=Ct(t,location),_=n.value,M=s.value;let j=0;if(m){if(n.value=g,s.value=m,p&&p===_){p=null;return}j=M?m.position-M.position:0}else o(g);a.forEach(C=>{C(n.value,_,{delta:j,type:Ce.pop,direction:j?j>0?ke.forward:ke.back:ke.unknown})})};function l(){p=n.value}function c(m){a.push(m);const g=()=>{const _=a.indexOf(m);_>-1&&a.splice(_,1)};return u.push(g),g}function i(){const{history:m}=window;m.state&&m.replaceState(H({},m.state,{scroll:Ae()}),"")}function d(){for(const m of u)m();u=[],window.removeEventListener("popstate",h),window.removeEventListener("beforeunload",i)}return window.addEventListener("popstate",h),window.addEventListener("beforeunload",i),{pauseListeners:l,listen:c,destroy:d}}function ot(t,s,n,o=!1,a=!1){return{back:t,current:s,forward:n,replaced:o,position:window.history.length,scroll:a?Ae():null}}function ds(t){const{history:s,location:n}=window,o={value:Ct(t,n)},a={value:s.state};a.value||u(o.value,{back:null,current:o.value,forward:null,position:s.length-1,replaced:!0,scroll:null},!0);function u(l,c,i){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:cs()+t+l;try{s[i?"replaceState":"pushState"](c,"",m),a.value=c}catch(g){console.error(g),n[i?"replace":"assign"](m)}}function p(l,c){const i=H({},s.state,ot(a.value.back,l,a.value.forward,!0),c,{position:a.value.position});u(l,i,!0),o.value=l}function h(l,c){const i=H({},a.value,s.state,{forward:l,scroll:Ae()});u(i.current,i,!0);const d=H({},ot(o.value,l,null),{position:i.position+1},c);u(l,d,!1),o.value=l}return{location:o,state:a,push:h,replace:p}}function hs(t){t=ss(t);const s=ds(t),n=us(t,s.state,s.location,s.replace);function o(u,p=!0){p||n.pauseListeners(),history.go(u)}const a=H({location:"",base:t,go:o,createHref:os.bind(null,t)},s,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>s.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>s.state.value}),a}function fs(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),hs(t)}function ms(t){return typeof t=="string"||t&&typeof t=="object"}function Rt(t){return typeof t=="string"||typeof t=="symbol"}const le={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},St=Symbol("");var at;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(at||(at={}));function pe(t,s){return H(new Error,{type:t,[St]:!0},s)}function ae(t,s){return t instanceof Error&&St in t&&(s==null||!!(t.type&s))}const it="[^/]+?",vs={sensitive:!1,strict:!1,start:!0,end:!0},ps=/[.+*?^${}()[\]/\\]/g;function gs(t,s){const n=H({},vs,s),o=[];let a=n.start?"^":"";const u=[];for(const c of t){const i=c.length?[]:[90];n.strict&&!c.length&&(a+="/");for(let d=0;d<c.length;d++){const m=c[d];let g=40+(n.sensitive?.25:0);if(m.type===0)d||(a+="/"),a+=m.value.replace(ps,"\\$&"),g+=40;else if(m.type===1){const{value:_,repeatable:M,optional:j,regexp:C}=m;u.push({name:_,repeatable:M,optional:j});const r=C||it;if(r!==it){g+=10;try{new RegExp(`(${r})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${_}" (${r}): `+I.message)}}let k=M?`((?:${r})(?:/(?:${r}))*)`:`(${r})`;d||(k=j&&c.length<2?`(?:/${k})`:"/"+k),j&&(k+="?"),a+=k,g+=20,j&&(g+=-8),M&&(g+=-20),r===".*"&&(g+=-50)}i.push(g)}o.push(i)}if(n.strict&&n.end){const c=o.length-1;o[c][o[c].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&(a+="(?:/|$)");const p=new RegExp(a,n.sensitive?"":"i");function h(c){const i=c.match(p),d={};if(!i)return null;for(let m=1;m<i.length;m++){const g=i[m]||"",_=u[m-1];d[_.name]=g&&_.repeatable?g.split("/"):g}return d}function l(c){let i="",d=!1;for(const m of t){(!d||!i.endsWith("/"))&&(i+="/"),d=!1;for(const g of m)if(g.type===0)i+=g.value;else if(g.type===1){const{value:_,repeatable:M,optional:j}=g,C=_ in c?c[_]:"";if(ne(C)&&!M)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const r=ne(C)?C.join("/"):C;if(!r)if(j)m.length<2&&(i.endsWith("/")?i=i.slice(0,-1):d=!0);else throw new Error(`Missing required param "${_}"`);i+=r}}return i||"/"}return{re:p,score:o,keys:u,parse:h,stringify:l}}function _s(t,s){let n=0;for(;n<t.length&&n<s.length;){const o=s[n]-t[n];if(o)return o;n++}return t.length<s.length?t.length===1&&t[0]===40+40?-1:1:t.length>s.length?s.length===1&&s[0]===40+40?1:-1:0}function xs(t,s){let n=0;const o=t.score,a=s.score;for(;n<o.length&&n<a.length;){const u=_s(o[n],a[n]);if(u)return u;n++}if(Math.abs(a.length-o.length)===1){if(lt(o))return 1;if(lt(a))return-1}return a.length-o.length}function lt(t){const s=t[t.length-1];return t.length>0&&s[s.length-1]<0}const bs={type:0,value:""},ys=/[a-zA-Z0-9_]/;function ws(t){if(!t)return[[]];if(t==="/")return[[bs]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function s(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,o=n;const a=[];let u;function p(){u&&a.push(u),u=[]}let h=0,l,c="",i="";function d(){c&&(n===0?u.push({type:0,value:c}):n===1||n===2||n===3?(u.length>1&&(l==="*"||l==="+")&&s(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:c,regexp:i,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):s("Invalid state to consume buffer"),c="")}function m(){c+=l}for(;h<t.length;){if(l=t[h++],l==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),p()):l===":"?(d(),n=1):m();break;case 4:m(),n=o;break;case 1:l==="("?n=2:ys.test(l)?m():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&h--);break;case 2:l===")"?i[i.length-1]=="\\"?i=i.slice(0,-1)+l:n=3:i+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&h--,i="";break;default:s("Unknown state");break}}return n===2&&s(`Unfinished custom RegExp for param "${c}"`),d(),p(),a}function ks(t,s,n){const o=gs(ws(t.path),n),a=H(o,{record:t,parent:s,children:[],alias:[]});return s&&!a.record.aliasOf==!s.record.aliasOf&&s.children.push(a),a}function $s(t,s){const n=[],o=new Map;s=ut({strict:!1,end:!0,sensitive:!1},s);function a(i){return o.get(i)}function u(i,d,m){const g=!m,_=Es(i);_.aliasOf=m&&m.record;const M=ut(s,i),j=[_];if("alias"in i){const k=typeof i.alias=="string"?[i.alias]:i.alias;for(const I of k)j.push(H({},_,{components:m?m.record.components:_.components,path:I,aliasOf:m?m.record:_}))}let C,r;for(const k of j){const{path:I}=k;if(d&&I[0]!=="/"){const N=d.record.path,U=N[N.length-1]==="/"?"":"/";k.path=d.record.path+(I&&U+I)}if(C=ks(k,d,M),m?m.alias.push(C):(r=r||C,r!==C&&r.alias.push(C),g&&i.name&&!ct(C)&&p(i.name)),_.children){const N=_.children;for(let U=0;U<N.length;U++)u(N[U],C,m&&m.children[U])}m=m||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&l(C)}return r?()=>{p(r)}:we}function p(i){if(Rt(i)){const d=o.get(i);d&&(o.delete(i),n.splice(n.indexOf(d),1),d.children.forEach(p),d.alias.forEach(p))}else{const d=n.indexOf(i);d>-1&&(n.splice(d,1),i.record.name&&o.delete(i.record.name),i.children.forEach(p),i.alias.forEach(p))}}function h(){return n}function l(i){let d=0;for(;d<n.length&&xs(i,n[d])>=0&&(i.record.path!==n[d].record.path||!Pt(i,n[d]));)d++;n.splice(d,0,i),i.record.name&&!ct(i)&&o.set(i.record.name,i)}function c(i,d){let m,g={},_,M;if("name"in i&&i.name){if(m=o.get(i.name),!m)throw pe(1,{location:i});M=m.record.name,g=H(rt(d.params,m.keys.filter(r=>!r.optional).map(r=>r.name)),i.params&&rt(i.params,m.keys.map(r=>r.name))),_=m.stringify(g)}else if("path"in i)_=i.path,m=n.find(r=>r.re.test(_)),m&&(g=m.parse(_),M=m.record.name);else{if(m=d.name?o.get(d.name):n.find(r=>r.re.test(d.path)),!m)throw pe(1,{location:i,currentLocation:d});M=m.record.name,g=H({},d.params,i.params),_=m.stringify(g)}const j=[];let C=m;for(;C;)j.unshift(C.record),C=C.parent;return{name:M,path:_,params:g,matched:j,meta:Rs(j)}}return t.forEach(i=>u(i)),{addRoute:u,resolve:c,removeRoute:p,getRoutes:h,getRecordMatcher:a}}function rt(t,s){const n={};for(const o of s)o in t&&(n[o]=t[o]);return n}function Es(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Cs(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Cs(t){const s={},n=t.props||!1;if("component"in t)s.default=n;else for(const o in t.components)s[o]=typeof n=="boolean"?n:n[o];return s}function ct(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Rs(t){return t.reduce((s,n)=>H(s,n.meta),{})}function ut(t,s){const n={};for(const o in t)n[o]=o in s?s[o]:t[o];return n}function Pt(t,s){return s.children.some(n=>n===t||Pt(t,n))}const Mt=/#/g,Ss=/&/g,Ps=/\//g,Ms=/=/g,Ns=/\?/g,Nt=/\+/g,js=/%5B/g,As=/%5D/g,jt=/%5E/g,Bs=/%60/g,At=/%7B/g,Os=/%7C/g,Bt=/%7D/g,Is=/%20/g;function We(t){return encodeURI(""+t).replace(Os,"|").replace(js,"[").replace(As,"]")}function Ts(t){return We(t).replace(At,"{").replace(Bt,"}").replace(jt,"^")}function Ke(t){return We(t).replace(Nt,"%2B").replace(Is,"+").replace(Mt,"%23").replace(Ss,"%26").replace(Bs,"`").replace(At,"{").replace(Bt,"}").replace(jt,"^")}function Hs(t){return Ke(t).replace(Ms,"%3D")}function Us(t){return We(t).replace(Mt,"%23").replace(Ns,"%3F")}function Ls(t){return t==null?"":Us(t).replace(Ps,"%2F")}function Me(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function zs(t){const s={};if(t===""||t==="?")return s;const o=(t[0]==="?"?t.slice(1):t).split("&");for(let a=0;a<o.length;++a){const u=o[a].replace(Nt," "),p=u.indexOf("="),h=Me(p<0?u:u.slice(0,p)),l=p<0?null:Me(u.slice(p+1));if(h in s){let c=s[h];ne(c)||(c=s[h]=[c]),c.push(l)}else s[h]=l}return s}function dt(t){let s="";for(let n in t){const o=t[n];if(n=Hs(n),o==null){o!==void 0&&(s+=(s.length?"&":"")+n);continue}(ne(o)?o.map(u=>u&&Ke(u)):[o&&Ke(o)]).forEach(u=>{u!==void 0&&(s+=(s.length?"&":"")+n,u!=null&&(s+="="+u))})}return s}function Ds(t){const s={};for(const n in t){const o=t[n];o!==void 0&&(s[n]=ne(o)?o.map(a=>a==null?null:""+a):o==null?o:""+o)}return s}const Qe=Symbol(""),ht=Symbol(""),Be=Symbol(""),Ye=Symbol(""),qe=Symbol("");function be(){let t=[];function s(o){return t.push(o),()=>{const a=t.indexOf(o);a>-1&&t.splice(a,1)}}function n(){t=[]}return{add:s,list:()=>t,reset:n}}function Ot(t,s,n){const o=()=>{t[s].delete(n)};_t(o),Lt(o),zt(()=>{t[s].add(n)}),t[s].add(n)}function Vs(t){const s=ie(Qe,{}).value;s&&Ot(s,"leaveGuards",t)}function Gs(t){const s=ie(Qe,{}).value;s&&Ot(s,"updateGuards",t)}function re(t,s,n,o,a){const u=o&&(o.enterCallbacks[a]=o.enterCallbacks[a]||[]);return()=>new Promise((p,h)=>{const l=d=>{d===!1?h(pe(4,{from:n,to:s})):d instanceof Error?h(d):ms(d)?h(pe(2,{from:s,to:d})):(u&&o.enterCallbacks[a]===u&&typeof d=="function"&&u.push(d),p())},c=t.call(o&&o.instances[a],s,n,l);let i=Promise.resolve(c);t.length<3&&(i=i.then(l)),i.catch(d=>h(d))})}function Ve(t,s,n,o){const a=[];for(const u of t)for(const p in u.components){let h=u.components[p];if(!(s!=="beforeRouteEnter"&&!u.instances[p]))if(Ks(h)){const c=(h.__vccOpts||h)[s];c&&a.push(re(c,n,o,u,p))}else{let l=h();a.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${p}" at "${u.path}"`));const i=Qt(c)?c.default:c;u.components[p]=i;const m=(i.__vccOpts||i)[s];return m&&re(m,n,o,u,p)()}))}}return a}function Ks(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ft(t){const s=ie(Be),n=ie(Ye),o=Q(()=>s.resolve(K(t.to))),a=Q(()=>{const{matched:l}=o.value,{length:c}=l,i=l[c-1],d=n.matched;if(!i||!d.length)return-1;const m=d.findIndex(ve.bind(null,i));if(m>-1)return m;const g=mt(l[c-2]);return c>1&&mt(i)===g&&d[d.length-1].path!==g?d.findIndex(ve.bind(null,l[c-2])):m}),u=Q(()=>a.value>-1&&Qs(n.params,o.value.params)),p=Q(()=>a.value>-1&&a.value===n.matched.length-1&&Et(n.params,o.value.params));function h(l={}){return Ws(l)?s[K(t.replace)?"replace":"push"](K(t.to)).catch(we):Promise.resolve()}return{route:o,href:Q(()=>o.value.href),isActive:u,isExactActive:p,navigate:h}}const qs=xt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ft,setup(t,{slots:s}){const n=gt(ft(t)),{options:o}=ie(Be),a=Q(()=>({[vt(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[vt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const u=s.default&&s.default(n);return t.custom?u:bt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},u)}}}),Fs=qs;function Ws(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const s=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return t.preventDefault&&t.preventDefault(),!0}}function Qs(t,s){for(const n in s){const o=s[n],a=t[n];if(typeof o=="string"){if(o!==a)return!1}else if(!ne(a)||a.length!==o.length||o.some((u,p)=>u!==a[p]))return!1}return!0}function mt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const vt=(t,s,n)=>t??s??n,Ys=xt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:s,slots:n}){const o=ie(qe),a=Q(()=>t.route||o.value),u=ie(ht,0),p=Q(()=>{let c=K(u);const{matched:i}=a.value;let d;for(;(d=i[c])&&!d.components;)c++;return c}),h=Q(()=>a.value.matched[p.value]);Le(ht,Q(()=>p.value+1)),Le(Qe,h),Le(qe,a);const l=y();return fe(()=>[l.value,h.value,t.name],([c,i,d],[m,g,_])=>{i&&(i.instances[d]=c,g&&g!==i&&c&&c===m&&(i.leaveGuards.size||(i.leaveGuards=g.leaveGuards),i.updateGuards.size||(i.updateGuards=g.updateGuards))),c&&i&&(!g||!ve(i,g)||!m)&&(i.enterCallbacks[d]||[]).forEach(M=>M(c))},{flush:"post"}),()=>{const c=a.value,i=t.name,d=h.value,m=d&&d.components[i];if(!m)return pt(n.default,{Component:m,route:c});const g=d.props[i],_=g?g===!0?c.params:typeof g=="function"?g(c):g:null,j=bt(m,H({},_,s,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(d.instances[i]=null)},ref:l}));return pt(n.default,{Component:j,route:c})||j}}});function pt(t,s){if(!t)return null;const n=t(s);return n.length===1?n[0]:n}const Xs=Ys;function Zs(t){const s=$s(t.routes,t),n=t.parseQuery||zs,o=t.stringifyQuery||dt,a=t.history,u=be(),p=be(),h=be(),l=Ut(le);let c=le;he&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const i=ze.bind(null,f=>""+f),d=ze.bind(null,Ls),m=ze.bind(null,Me);function g(f,w){let b,$;return Rt(f)?(b=s.getRecordMatcher(f),$=w):$=f,s.addRoute($,b)}function _(f){const w=s.getRecordMatcher(f);w&&s.removeRoute(w)}function M(){return s.getRoutes().map(f=>f.record)}function j(f){return!!s.getRecordMatcher(f)}function C(f,w){if(w=H({},w||l.value),typeof f=="string"){const B=De(n,f,w.path),W=s.resolve({path:B.path},w),xe=a.createHref(B.fullPath);return H(B,W,{params:m(W.params),hash:Me(B.hash),redirectedFrom:void 0,href:xe})}let b;if("path"in f)b=H({},f,{path:De(n,f.path,w.path).path});else{const B=H({},f.params);for(const W in B)B[W]==null&&delete B[W];b=H({},f,{params:d(f.params)}),w.params=d(w.params)}const $=s.resolve(b,w),L=f.hash||"";$.params=i(m($.params));const F=Zt(o,H({},f,{hash:Ts(L),path:$.path})),O=a.createHref(F);return H({fullPath:F,hash:L,query:o===dt?Ds(f.query):f.query||{}},$,{redirectedFrom:void 0,href:O})}function r(f){return typeof f=="string"?De(n,f,l.value.path):H({},f)}function k(f,w){if(c!==f)return pe(8,{from:w,to:f})}function I(f){return Z(f)}function N(f){return I(H(r(f),{replace:!0}))}function U(f){const w=f.matched[f.matched.length-1];if(w&&w.redirect){const{redirect:b}=w;let $=typeof b=="function"?b(f):b;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=r($):{path:$},$.params={}),H({query:f.query,hash:f.hash,params:"path"in $?{}:f.params},$)}}function Z(f,w){const b=c=C(f),$=l.value,L=f.state,F=f.force,O=f.replace===!0,B=U(b);if(B)return Z(H(r(B),{state:typeof B=="object"?H({},L,B.state):L,force:F,replace:O}),w||b);const W=b;W.redirectedFrom=w;let xe;return!F&&Jt(o,$,b)&&(xe=pe(16,{to:W,from:$}),Je($,$,!0,!1)),(xe?Promise.resolve(xe):A(W,$)).catch(ee=>ae(ee)?ae(ee,2)?ee:Re(ee):q(ee,W,$)).then(ee=>{if(ee){if(ae(ee,2))return Z(H({replace:O},r(ee.to),{state:typeof ee.to=="object"?H({},L,ee.to.state):L,force:F}),w||W)}else ee=V(W,$,!0,O,L);return z(W,$,ee),ee})}function _e(f,w){const b=k(f,w);return b?Promise.reject(b):Promise.resolve()}function A(f,w){let b;const[$,L,F]=Js(f,w);b=Ve($.reverse(),"beforeRouteLeave",f,w);for(const B of $)B.leaveGuards.forEach(W=>{b.push(re(W,f,w))});const O=_e.bind(null,f,w);return b.push(O),de(b).then(()=>{b=[];for(const B of u.list())b.push(re(B,f,w));return b.push(O),de(b)}).then(()=>{b=Ve(L,"beforeRouteUpdate",f,w);for(const B of L)B.updateGuards.forEach(W=>{b.push(re(W,f,w))});return b.push(O),de(b)}).then(()=>{b=[];for(const B of f.matched)if(B.beforeEnter&&!w.matched.includes(B))if(ne(B.beforeEnter))for(const W of B.beforeEnter)b.push(re(W,f,w));else b.push(re(B.beforeEnter,f,w));return b.push(O),de(b)}).then(()=>(f.matched.forEach(B=>B.enterCallbacks={}),b=Ve(F,"beforeRouteEnter",f,w),b.push(O),de(b))).then(()=>{b=[];for(const B of p.list())b.push(re(B,f,w));return b.push(O),de(b)}).catch(B=>ae(B,8)?B:Promise.reject(B))}function z(f,w,b){for(const $ of h.list())$(f,w,b)}function V(f,w,b,$,L){const F=k(f,w);if(F)return F;const O=w===le,B=he?history.state:{};b&&($||O?a.replace(f.fullPath,H({scroll:O&&B&&B.scroll},L)):a.push(f.fullPath,L)),l.value=f,Je(f,w,b,O),Re()}let D;function T(){D||(D=a.listen((f,w,b)=>{if(!et.listening)return;const $=C(f),L=U($);if(L){Z(H(L,{replace:!0}),$).catch(we);return}c=$;const F=l.value;he&&ls(nt(F.fullPath,b.delta),Ae()),A($,F).catch(O=>ae(O,12)?O:ae(O,2)?(Z(O.to,$).then(B=>{ae(B,20)&&!b.delta&&b.type===Ce.pop&&a.go(-1,!1)}).catch(we),Promise.reject()):(b.delta&&a.go(-b.delta,!1),q(O,$,F))).then(O=>{O=O||V($,F,!1),O&&(b.delta&&!ae(O,8)?a.go(-b.delta,!1):b.type===Ce.pop&&ae(O,20)&&a.go(-1,!1)),z($,F,O)}).catch(we)}))}let S=be(),G=be(),R;function q(f,w,b){Re(f);const $=G.list();return $.length?$.forEach(L=>L(f,w,b)):console.error(f),Promise.reject(f)}function J(){return R&&l.value!==le?Promise.resolve():new Promise((f,w)=>{S.add([f,w])})}function Re(f){return R||(R=!f,T(),S.list().forEach(([w,b])=>f?b(f):w()),S.reset()),f}function Je(f,w,b,$){const{scrollBehavior:L}=t;if(!he||!L)return Promise.resolve();const F=!b&&rs(nt(f.fullPath,0))||($||!b)&&history.state&&history.state.scroll||null;return $e().then(()=>L(f,w,F)).then(O=>O&&is(O)).catch(O=>q(O,f,w))}const Te=f=>a.go(f);let He;const Ue=new Set,et={currentRoute:l,listening:!0,addRoute:g,removeRoute:_,hasRoute:j,getRoutes:M,resolve:C,options:t,push:I,replace:N,go:Te,back:()=>Te(-1),forward:()=>Te(1),beforeEach:u.add,beforeResolve:p.add,afterEach:h.add,onError:G.add,isReady:J,install(f){const w=this;f.component("RouterLink",Fs),f.component("RouterView",Xs),f.config.globalProperties.$router=w,Object.defineProperty(f.config.globalProperties,"$route",{enumerable:!0,get:()=>K(l)}),he&&!He&&l.value===le&&(He=!0,I(a.location).catch(L=>{}));const b={};for(const L in le)b[L]=Q(()=>l.value[L]);f.provide(Be,w),f.provide(Ye,gt(b)),f.provide(qe,l);const $=f.unmount;Ue.add(f),f.unmount=function(){Ue.delete(f),Ue.size<1&&(c=le,D&&D(),D=null,l.value=le,He=!1,R=!1),$()}}};return et}function de(t){return t.reduce((s,n)=>s.then(()=>n()),Promise.resolve())}function Js(t,s){const n=[],o=[],a=[],u=Math.max(s.matched.length,t.matched.length);for(let p=0;p<u;p++){const h=s.matched[p];h&&(t.matched.find(c=>ve(c,h))?o.push(h):n.push(h));const l=t.matched[p];l&&(s.matched.find(c=>ve(c,l))||a.push(l))}return[n,o,a]}function Xe(){return ie(Be)}function Ze(){return ie(Ye)}const en="/img/logo.svg",tn={class:"dropdown bg-white rounded-md py-1 z-20",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},sn={class:"block px-4 py-2"},nn={class:"opacity-75"},on=e("div",{class:"my-1 border-b border-base-300"},null,-1),an=e("div",{class:"relative block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},[e("a",{class:"stretched-link",href:"/admin/logout"},"登出")],-1),ln={__name:"UserMenu",props:{userName:String,userAccount:String,toleft:Number,totop:Number},emits:["close"],setup(t,{emit:s}){const n=t;je();const o=y(null),a=Q(()=>{var h;return String(String(n.toleft+32-((h=o.value)==null?void 0:h.clientWidth)))}),u=Q(()=>String(n.totop+40)),p=h=>{s("close")};return(h,l)=>{const c=wt("click-away");return me((v(),x("div",{ref_key:"userMenu",ref:o,class:"shadow-lg border border-base-300 rounded-md z-20",style:yt("position: fixed; left: "+K(a)+"px; top: "+K(u)+"px; min-width: max-content; --radix-popper-transform-origin: 100% 0px;")},[e("div",tn,[e("div",sn,[e("div",null,[e("strong",null,E(t.userName),1)]),e("div",nn,E(t.userAccount),1)]),on,an])],4)),[[c,p]])}}};const rn={key:0,class:"bg-amber-700 text-white font-medium py-2 px-4 text-center"},cn=["href"],un={class:"bg-base-200 border-b border-base-300 pt-4 mb-6"},dn={class:"container mx-auto mb-4 md:mb-6"},hn={class:"flex justify-between items-center px-2 md:px-0"},fn={href:"/",class:"flex items-center",style:{"max-width":"80%"}},mn=e("img",{width:"18",height:"18",src:en},null,-1),vn={role:"banner",class:"text-lg font-semibold ml-3 truncate"},pn=e("span",{class:"badge badge-secondary"},"仅供测试",-1),gn={class:"flex items-center"},_n=e("a",{class:"hidden text-gray-600 hover:text-gray-800 sm:inline-block px-2 py-1",href:"https://github.com/gps949/tailscale/releases",target:"_blank",rel:"noopener noreferrer"},"下载客户端",-1),xn={class:"relative rounded-full"},bn={class:"relative shrink-0 rounded-full overflow-hidden w-8 h-8"},yn={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-8 h-8",style:{"background-color":"rgb(161, 56, 33)"}},wn={class:"relative overflow-hidden",style:{top:"1px"}},kn={id:"nav",class:"navigation flex items-center overflow-auto left-1 relative md:container md:mx-auto md:px-0 md:-left-3"},$n=["stroke-width"],En=e("rect",{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"},null,-1),Cn=e("rect",{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"},null,-1),Rn=e("line",{x1:"6",y1:"6",x2:"6.01",y2:"6"},null,-1),Sn=e("line",{x1:"6",y1:"18",x2:"6.01",y2:"18"},null,-1),Pn=[En,Cn,Rn,Sn],Mn=["stroke-width"],Nn=e("circle",{cx:"12",cy:"12",r:"3"},null,-1),jn=e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},null,-1),An=[Nn,jn],Bn={key:2,class:"container mx-auto pb-20 md:pb-24"},On={class:"mb-24"},In=e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2"},"错误")])])],-1),Tn={class:"w-full p-3 flex items-center justify-center text-sm"},Hn={class:"flex items-center justify-center"},Un=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-3 text-red-400 h-5 w-5"},[e("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1),Ln=e("strong",null,"错误：",-1),zn={__name:"Console",setup(t){Xe();const s=Ze(),n=y(null),o=y(0),a=y(0),u=y(!1),p=y(""),h=Q(()=>s.path);function l(){var r,k;o.value=(r=n.value)==null?void 0:r.getBoundingClientRect().left,a.value=(k=n.value)==null?void 0:k.getBoundingClientRect().top}const c=y(!1);function i(){c.value=!c.value,c.value?document.body.style.pointerEvents="none":document.body.style.removeProperty("pointer-events")}const d=Q(()=>{let r=s.path;if(r=="/"||r.substring(0,8)=="/machine")return"machine";if(r.substring(0,8)=="/setting")return"setting"}),m=y(""),g=y(""),_=y(""),M=y(""),j=y("");function C(){return new Promise((r,k)=>{axios.get("/admin/api/self").then(function(I){(I.data.errormsg==null||I.data.errormsg==="")&&(m.value=I.data.useraccount,g.value=I.data.basedomain,_.value=I.data.username,M.value=I.data.usernamehead,j.value=I.data.orgname,r("success")),k("err")}).catch(function(I){k("error")})})}return ge(()=>{l(),window.addEventListener("resize",l),window.addEventListener("scroll",l),axios.interceptors.response.use(r=>(r.status==200?(p.value="",u.value=!1):(p.value="登录状态超时失效",u.value=!0),r),r=>{if(r&&r.response)switch(r.response.status){case 400:r.message="请求错误(400)";break;case 401:r.message="未授权，请重新登录(401)";break;case 403:r.message="拒绝访问(403)";break;case 404:r.message="请求出错(404)";break;case 408:r.message="请求超时(408)";break;case 500:r.message="服务器错误(500)";break;case 501:r.message="服务未实现(501)";break;case 502:r.message="网络错误(502)";break;case 503:r.message="服务不可用(503)";break;case 504:r.message="网络超时(504)";break;case 505:r.message="HTTP版本不受支持(505)";break;default:r.message="连接出错"+r.response.status}else r.message="连接服务器失败!";return p.value=r.message,u.value=!0,Promise.reject(r)}),C().then().catch(),setInterval(()=>{C().then().catch()},15e3)}),(r,k)=>{const I=Ee("router-link"),N=Ee("router-view");return v(),x(ue,null,[u.value?(v(),x("div",rn,[Y("连接服务器出现"+E(p.value)+"，请尝试 ",1),e("a",{class:"text-amber-100",href:"/login?next_url=/admin#"+K(h)},"重新登录",8,cn)])):P("",!0),e("div",un,[e("div",dn,[e("header",hn,[e("a",fn,[mn,e("div",vn,E(j.value),1),pn]),e("nav",gn,[_n,e("div",{ref_key:"userAvatar",ref:n,onClick:i,class:"heart-wrapper ml-2"},[e("button",xn,[e("div",bn,[e("div",yn,E(M.value),1)])])],512),(v(),X(ce,{to:"body"},[c.value?(v(),X(ln,{key:0,toleft:o.value,totop:a.value,"user-account":m.value,"user-name":_.value,onClose:i},null,8,["toleft","totop","user-account","user-name"])):P("",!0)]))])])]),e("div",wn,[e("nav",kn,[te(I,{class:"whitespace-nowrap py-2 group relative",to:"/machines"},{default:oe(()=>[e("div",{class:se([{"text-blue-600 after:visible":K(d)=="machine","text-gray-600 group-hover:text-gray-800 after:invisible":K(d)!="machine"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(v(),x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":K(d)=="machine"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},Pn,8,$n)),e("div",{class:se({"font-medium":K(d)=="machine"})},"设备",2)],2)]),_:1}),te(I,{class:"whitespace-nowrap py-2 group relative",to:"/settings"},{default:oe(()=>[e("div",{class:se([{"text-blue-600 after:visible":K(d)=="setting","text-gray-600 group-hover:text-gray-800 after:invisible":K(d)!="setting"},"px-3 py-2 flex items-center rounded-md group-hover:bg-gray-200 after:absolute after:bottom-0 after:right-3 after:left-3 after:h-0.5 after:bg-blue-600"])},[(v(),x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.125em",height:"1.125em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":K(d)=="setting"?"2.5":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2 inline-block"},An,8,Mn)),e("div",{class:se({"font-medium":K(d)=="setting"})},"设置",2)],2)]),_:1})])])]),u.value?P("",!0):(v(),X(N,{key:1})),u.value?(v(),x("main",Bn,[e("section",On,[In,e("div",Tn,[e("div",Hn,[Un,e("div",null,[Ln,Y(" 请求失败 "+E(p.value),1)])])])])])):P("",!0)],64)}}},Dn={class:"dropdown bg-white rounded-md py-1 z-20",style:{outline:"none","--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","pointer-events":"auto"}},Vn=["hidden"],Gn=["hidden"],Kn=e("div",{class:"my-1 border-b border-base-300"},null,-1),qn=["hidden"],Fn=["hidden"],Wn=e("div",{class:"my-1 border-b border-base-300"},null,-1),It={__name:"MachineMenu",props:{toleft:Number,totop:Number,neverExpires:Boolean},emits:["close"],setup(t,{emit:s}){const n=t,o=y(!0);je();const a=y(null),u=Q(()=>{var l;return String(String(n.toleft+32-((l=a.value)==null?void 0:l.clientWidth)))}),p=Q(()=>{var l;return n.totop<=window.innerHeight/2?String(n.totop+36):String(n.totop-10-((l=a.value)==null?void 0:l.clientHeight))}),h=l=>{s("close")};return(l,c)=>{const i=wt("click-away");return me((v(),x("div",{ref_key:"machineMenu",ref:a,class:"shadow-xl border border-base-300 rounded-md z-20",style:yt("position: fixed; left: "+K(u)+"px; top: "+K(p)+"px; min-width: max-content; --radix-popper-transform-origin: 0% 0px;")},[e("div",Dn,[e("div",{onClick:c[0]||(c[0]=d=>l.$emit("showdialog-updatehostname")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 编辑设备名称…",8,Vn),e("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 分享…",8,Gn),e("div",{onClick:c[1]||(c[1]=d=>l.$emit("set-expires")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100"},E(t.neverExpires?"启用密钥过期":"禁用密钥过期"),1),Kn,e("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 编辑子网转发…",8,qn),e("div",{class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100",hidden:o.value}," 编辑ACL标签…",8,Fn),Wn,e("div",{onClick:c[2]||(c[2]=d=>l.$emit("showdialog-remove")),class:"block px-4 py-2 cursor-pointer hover:bg-gray-100 focus:outline-none focus:bg-gray-100 text-red-400"}," 移除…")])],4)),[[i,h]])}}},Qn={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},Yn={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},Xn={class:"font-semibold text-lg truncate"},Zn=e("p",{class:"text-gray-700 mb-4"},"这个设备将从您的蜃境网络中永久删除！如需重新添加该设备，您将需要在该设备上重新进行授权",-1),Jn={class:"flex mt-10 justify-end space-x-4"},eo=e("button",{class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit",type:"submit"},"删除设备",-1),to=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),so=[to],Tt={__name:"RemoveMachine",props:{machineName:String},setup(t){return je(),(s,n)=>(v(),x("div",{onClick:n[3]||(n[3]=Se(o=>s.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",Qn,[e("header",Yn,[e("div",Xn,"删除 "+E(t.machineName),1)]),e("form",{onSubmit:n[1]||(n[1]=Se(o=>s.$emit("confirm"),["prevent"]))},[Zn,e("footer",Jn,[e("button",{onClick:n[0]||(n[0]=o=>s.$emit("close")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消"),eo])],32),e("button",{onClick:n[2]||(n[2]=o=>s.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},so)])]))}};const Oe=t=>(Vt("data-v-f163f6d8"),t=t(),Gt(),t),no={class:"bg-white rounded-lg relative p-4 md:p-6 text-gray-700 max-w-lg min-w-[19rem] my-8 mx-auto w-[97%] shadow-2xl",style:{"pointer-events":"auto"}},oo={class:"flex items-center justify-between space-x-4 mb-5 mr-8"},ao={class:"font-semibold text-lg truncate"},io=Oe(()=>e("p",{class:"text-gray-700 mb-6"},[Y("这个名称显示在控制台、客户端，以及生成对应的「"),e("strong",null,"幻域"),Y("」名称")],-1)),lo={class:"flex items-center"},ro=["disabled"],co=Oe(()=>e("label",{for:"auto-generate-checkbox",class:"font-medium ml-3"},"由设备OS主机名生成",-1)),uo=Oe(()=>e("label",{for:"machine-name",class:"block font-medium mt-6 mb-2"},"设备名称",-1)),ho={class:"flex mb-2"},fo={class:"relative w-full z-30"},mo=["disabled"],vo={key:0,class:"text-sm text-red-500 mb-2"},po={key:1,class:"text-sm text-red-500 mb-2"},go={key:2,class:"text-sm text-red-500 mb-2"},_o={key:3,class:"text-sm text-gray-600"},xo={class:"text-xs break-words bg-gray-200 px-1 rounded"},bo={key:4,class:"text-sm text-gray-600"},yo={class:"text-xs break-words bg-gray-200 px-1 rounded"},wo={class:"text-xs break-words bg-gray-200 px-1 rounded"},ko={class:"flex mt-10 justify-end space-x-4"},$o=["disabled"],Eo=["disabled"],Co=Oe(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),Ro=[Co],So={__name:"UpdateHostname",props:{id:String,hostName:String,givenName:String,autoGen:Boolean},emits:["update-done","update-fail","close"],setup(t,{emit:s}){const n=t;je();const o=y(!1),a=y(!0),u=y(""),p=y(!1),h=y(!1),l=y(""),c=y(!1),i=y(!1),d=y(!1);fe(()=>a.value,g=>{c.value=!1,i.value=!1,d.value=!1,g==n.autoGen?p.value=!1:p.value=!0,g&&(n.autoGen?u.value=n.givenName:u.value=n.hostName)}),fe(()=>u.value,g=>{c.value=!1,i.value=!1,d.value=!1,u.value=u.value.toLowerCase().replace(/[^-0-9a-z]/ig,"-").replace(/--*/g,"-"),g==n.givenName?h.value=!1:h.value=!0}),ge(()=>{p.value=!1,h.value=!1,a.value=n.autoGen,u.value=n.givenName,c.value=!1,i.value=!1,d.value=!1});function m(){if(!/^([0-9a-z]|-(?!-))+$/.test(u.value)){d.value=!0;return}if(/^(-.*|.*-)$/.test(u.value)){d.value=!0;return}o.value=!0;var g="";l.value=n.hostName,a.value||(g=u.value,l.value=u.value),axios.post("/admin/api/machines",{mid:n.id,state:"rename-node",nodeName:g}).then(function(_){_.data.status=="success"?_.data.data.name==l.value?s("update-done",_.data.data.name,_.data.data.automaticNameMode,!0):g===""?(c.value=!0,s("update-done",_.data.data.name,_.data.data.automaticNameMode,!1)):_.data.data.name==n.givenName?(i.value=!0,s("update-fail","目标主机名已存在！")):(console.log("unexpected case happended during the hostname updating!"),s("update-fail","意外情形发生了！")):s("update-fail",_.data.status.substring(6))}).catch(function(_){console.log(_),s("update-fail",_)}),o.value=!1}return(g,_)=>(v(),x("div",{onClick:_[6]||(_[6]=Se(M=>g.$emit("close"),["self"])),class:"fixed overflow-y-auto inset-0 py-8 z-30 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},[e("div",no,[e("header",oo,[e("div",ao,"修改设备名称 "+E(t.givenName),1)]),e("form",{onSubmit:_[4]||(_[4]=Se(M=>g.$emit("confirm"),["prevent"]))},[io,e("div",lo,[me(e("input",{disabled:o.value,onChange:_[0]||(_[0]=(...M)=>g.autoGenToggle&&g.autoGenToggle(...M)),"onUpdate:modelValue":_[1]||(_[1]=M=>a.value=M),id:"auto-generate-checkbox",type:"checkbox",class:"toggle"},null,40,ro),[[Dt,a.value]]),co]),uo,e("div",ho,[e("div",fo,[me(e("input",{"onUpdate:modelValue":_[2]||(_[2]=M=>u.value=M),class:"input w-full z-30 border focus:outline-blue-500/60 hover:border disabled:hover:border-stone-200 disabled:border-stone-200 border-stone-200 hover:border-stone-400 rounded-md h-9 min-h-fit",type:"text",disabled:o.value||a.value,id:"machine-name"},null,8,mo),[[$t,u.value]])])]),c.value?(v(),x("p",vo,"名称 “"+E(l.value)+"” 已有设备占用 , 因此设备被自动命名为 “"+E(u.value)+"”.",1)):P("",!0),i.value?(v(),x("p",po,"名称 “"+E(l.value)+"” 已有设备占用",1)):P("",!0),d.value?(v(),x("p",go,"名称不能为空，只能是字母数字和连接线组成，且不能以连接线开头结尾")):P("",!0),h.value?P("",!0):(v(),x("div",_o,[Y("这个设备可以通过「幻域」使用 "),e("code",xo,E(t.givenName),1),Y(" 进行访问")])),h.value?(v(),x("div",bo,[Y("这个设备可以通过「幻域」使用 "),e("code",yo,E(u.value),1),Y(" 进行访问。 "),e("code",wo,E(t.givenName),1),Y(" 不再指向该设备。")])):P("",!0),e("footer",ko,[e("button",{disabled:o.value,onClick:_[3]||(_[3]=M=>g.$emit("close")),class:"btn border border-base-300 hover:border-base-300 bg-base-200 hover:bg-base-300 text-black h-9 min-h-fit",type:"button"},"取消",8,$o),e("button",{disabled:o.value||!p.value&&!h.value,onClick:m,class:"btn border-0 bg-blue-500 hover:bg-blue-900 disabled:bg-blue-500/60 text-white disabled:text-white/60 h-9 min-h-fit",type:"submit"},"更新",8,Eo)])],32),e("button",{onClick:_[5]||(_[5]=M=>g.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},Ro)])]))}},Ht=kt(So,[["__scopeId","data-v-f163f6d8"]]),Po={class:"container mx-auto pb-20 md:pb-24"},Mo={class:"mb-24"},No=e("header",{class:"mb-8"},[e("div",{class:"flex justify-between items-center"},[e("div",{class:"flex items-center"},[e("h1",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2",tabindex:"-1"}," 设备 ")])])],-1),jo={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-full px-2 py-1 leading-none text-sm mb-8"},Ao={class:"table w-full"},Bo=e("thead",null,[e("tr",null,[e("th",{class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"}," 设备 "),e("th",{class:"hidden md:table-cell md:w-1/4"},"IP"),e("th",{class:"hidden md:table-cell w-1/4 lg:w-1/5"},"系统"),e("th",{class:"hidden lg:table-cell md:flex-auto"},"状态"),e("th",{class:"table-cell justify-end ml-auto md:ml-0 relative w-1/6 lg:w-12"},[e("span",{class:"sr-only"},"设备操作菜单")])])],-1),Oo=["id","v-if","onMouseenter","onMouseleave"],Io={class:"md:w-1/4 flex-auto md:flex-initial md:shrink-0 w-0 text-ellipsis"},To={class:"items-center text-gray-900"},Ho={class:"font-semibold hover:text-blue-500"},Uo={class:"stretched-link"},Lo={class:"md:hidden flex space-x-1 truncate"},zo={class:"text-sm"},Do=e("span",null,"·",-1),Vo={class:"md:hidden text-gray-600 text-sm",title:"m.version"},Go={class:"flex items-center text-gray-600 text-sm"},Ko={class:"my-1"},qo={key:0},Fo=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1),Wo=[Fo],Qo={key:1},Yo=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1),Xo=[Yo],Zo={key:2},Jo=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1),ea=[Jo],ta={key:3},sa=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1),na=[sa],oa={key:4},aa={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},ia={key:5},la=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"}," 出口节点 ",-1),ra=[la],ca={key:6},ua=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"}," 子网转发 ",-1),da=[ua],ha={class:"hidden md:table-cell md:w-1/4"},fa={class:"font-medium pr-6"},ma={class:"truncate"},va={key:0,class:"absolute -mt-1 -ml-2 -top-px -left-px shadow-md cursor-pointer rounded-md active:shadow-sm transition-shadow duration-100 ease-in-out z-20",style:{visibility:"visible","max-width":"934px"}},pa={class:"flex border rounded-md button-outline bg-white"},ga={class:"inline-block select-none truncate"},_a=e("span",{class:"cursor-pointer text-blue-500 pl-2"},"复制",-1),xa={class:"hidden md:table-cell w-1/4 lg:w-1/5"},ba={class:"flex items-center relative"},ya={class:"text-sm text-gray-600"},wa={class:"hidden lg:table-cell md:flex-auto"},ka={class:"inline-flex items-center cursor-default"},$a=["data-tip"],Ea=["data-tip"],Ca={class:"table-cell justify-end ml-auto md:ml-0 relative w-12 justify-items-end items-center md:items-start"},Ra=["onClick"],Sa=Ne('<button class="py-0.5 px-2 shadow-none rounded-md border border-gray-300/0 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 active:shadow focus:outline-none focus:ring transition-shadow duration-100 ease-in-out z-20"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></button>',1),Pa=[Sa],Ma=["onClick"],Na=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})],-1),ja=[Na],Aa={__name:"Machines",setup(t){const s=y(null),n=y(0),o=y(0);function a(){var T,S;s.value!=null&&(n.value=((T=s.value)==null?void 0:T.getBoundingClientRect().left)+14,o.value=(S=s.value)==null?void 0:S.getBoundingClientRect().top)}function u(T,S){var G,R,q,J;for(s.value=S.target;((G=s.value)==null?void 0:G.tagName)!="DIV"&&((R=s.value)==null?void 0:R.tagName)!="div";)s.value=s.value.parentNode;c.value=T,n.value=((q=s.value)==null?void 0:q.getBoundingClientRect().left)+14,o.value=(J=s.value)==null?void 0:J.getBoundingClientRect().top,g.value=!0}function p(){s.value=null,g.value=!1}const h=y(!1),l=y("");fe(h,()=>{h.value&&setTimeout(function(){h.value=!1},5e3)});const c=y("-1");function i(T){c.value=T,_.value=!0}function d(){_.value=!1}const m=y(!1),g=y(!1),_=y(!1),M=y(!1);function j(){_.value=!1,p(c.value),M.value=!0}const C=y(!1);function r(){_.value=!1,p(c.value),C.value=!0}const k=y({}),I=Q(()=>Object.getOwnPropertyNames(k.value).length);let N;function U(){return new Promise((T,S)=>{axios.get("/admin/api/machines").then(function(G){if((G.data.needreauth!=null||G.data.needreauth==!0)&&(l.value=G.data.needreauthreason+"，登录状态失效，请重新登录",h.value=!0,S()),G.data.errormsg==null||G.data.errormsg===""){for(var R in G.data.mlist){k.value[R]=G.data.mlist[R];let q=k.value[R].expirydesc.slice(-2);k.value[R].expirydesc=="马上就要过期"||q=="分钟"||q=="小时"||q=="1天"?k.value[R].soonexpiry=!0:k.value[R].soonexpiry=!1}T()}else G.data.errormsg!=null&&(l.value="获设备信息出错："+G.data.errormsg,h.value=!0,S())}).catch(function(G){l.value="更新页面出错："+G,h.value=!0,S()}).then(function(){})})}ge(()=>{a(),window.addEventListener("resize",a),window.addEventListener("scroll",a),U().then().catch(),N=setInterval(()=>{U().then().catch()},15e3)}),_t(()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a)}),Vs(()=>{clearInterval(N)});function Z(T){p(),axios.post("/admin/api/machines",{mid:T,state:"set-expires"}).then(function(S){S.data.status=="success"?(k.value[T].neverExpires=S.data.data.neverExpires,k.value[T].expirydesc=S.data.data.expires,S.data.data.neverExpires==!0?l.value="已禁用密钥过期":l.value="已启用密钥过期",h.value=!0):(l.value="失败："+S.data.status.substring(6),h.value=!0)}).catch(function(S){console.log(S)})}function _e(T){axios.post("/admin/api/machine/remove",{mid:T}).then(function(S){S.data.status=="OK"?(M.value=!1,l.value=k.value[T].name+"已从您的蜃境网络移除！",h.value=!0,delete k.value[T]):alert("失败："+S.data.errmsg)}).catch(function(S){console.log(S)})}function A(T,S,G){k.value[c.value].name=T,k.value[c.value].automaticNameMode=S,$e(()=>{C.value=!G,$e(()=>{l.value="已更新设备名称！",h.value=!0})})}function z(T){l.value="更新设备名称失败！",h.value=!0}function V(){navigator.clipboard.writeText(k.value[c.value].mipv4).then(function(){l.value="蜃境网络IPv4地址已复制到粘贴板！",h.value=!0})}function D(){navigator.clipboard.writeText(k.value[c.value].mipv6).then(function(){l.value="蜃境网络IPv6地址已复制到粘贴板！",h.value=!0})}return(T,S)=>{const G=Ee("router-link");return v(),x(ue,null,[e("main",Po,[e("section",Mo,[No,e("div",jo,E(K(I))+" 个设备 ",1),e("table",Ao,[Bo,e("tbody",null,[(v(!0),x(ue,null,Pe(k.value,(R,q)=>(v(),x("tr",{id:q,"v-if":k.value[q]!=T.nil,onMouseenter:J=>i(q),onMouseleave:J=>d(),class:"w-full px-0.5 hover"},[e("td",Io,[te(G,{class:"relative",to:"/machines/"+R.mipv4},{default:oe(()=>[e("div",To,[e("p",Ho,[e("span",{class:se([{"bg-green-500":R.ifonline,"bg-gray-300":!R.ifonline},"inline-block w-2 h-2 rounded-full relative -top-px lg:hidden mr-2"])},null,2),e("a",Uo,E(R.name),1)]),e("div",Lo,[e("span",zo,E(R.mipv4),1),Do,e("span",Vo,E(R.os),1)])]),e("div",null,[e("div",Go,[e("span",null,E(R.useraccount),1)])])]),_:2},1032,["to"]),e("div",Ko,[e("div",null,[R.issharedin?(v(),x("span",qo,Wo)):P("",!0),R.issharedout?(v(),x("span",Qo,Xo)):P("",!0),R.expirydesc=="已过期"?(v(),x("span",Zo,ea)):P("",!0),R.neverExpires?(v(),x("span",ta,na)):P("",!0),R.soonexpiry?(v(),x("span",oa,[e("div",aa,E(R.expirydesc),1)])):P("",!0),R.isexitnode?(v(),x("span",ia,ra)):P("",!0),R.issubnet?(v(),x("span",ca,da)):P("",!0)])])]),e("td",ha,[e("ul",null,[e("li",fa,[e("div",{onMouseenter:S[0]||(S[0]=J=>m.value=!0),onMouseleave:S[1]||(S[1]=J=>m.value=!1),class:"flex relative min-w-0"},[e("div",ma,[e("span",null,E(R.mipv4),1)]),m.value&&c.value==q?(v(),x("div",va,[e("div",pa,[e("div",{onClick:V,class:"flex min-w-0 py-1 px-2 hover:bg-gray-100 rounded-l-md"},[e("span",ga,[e("span",null,E(R.mipv4),1)]),_a]),e("div",{onClick:D,class:"text-blue-500 py-1 px-2 border-l hover:bg-gray-100 rounded-r-md"}," IPv6 ")])])):P("",!0)],32)]),(v(!0),x(ue,null,Pe(R.msubnetlist,(J,Re)=>(v(),x("li",null,[e("span",null,E(J),1)]))),256))])]),e("td",xa,[e("div",ba,[e("div",null,E(R.os),1)]),e("div",ya,E(R.version),1)]),e("td",wa,[e("span",null,[e("div",ka,[e("span",{class:se(["inline-block w-2 h-2 rounded-full mr-2",{"bg-green-500":R.ifonline,"bg-gray-300":!R.ifonline}])},null,2),R.ifonline?(v(),x("span",{key:0,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+R.lastseen},"已连接",8,$a)):(v(),x("span",{key:1,class:"text-sm text-gray-600 tooltip tooltip-top","data-tip":"最近在线于"+R.lastseen},E(R.lastseen),9,Ea))])])]),e("td",Ca,[!_.value&&!g.value||c.value!=q?(v(),x("div",{key:0,onClick:J=>u(q,J),class:"flex-none w-12 -mt-0.5 relative"},Pa,8,Ra)):P("",!0),(_.value||g.value)&&c.value==q?(v(),x("div",{key:1,onClick:J=>u(q,J),class:"flex-none w-12 border button-outline bg-white shadow-md cursor-pointer focus:outline-none focus:ring -mt-0.5 relative py-0.5 px-2 rounded-md border-gray-300/100 hover:border-gray-300/100 hover:bg-gray-100 hover:shadow-md hover:cursor-pointer active:border-gray-300/100 transition-shadow duration-100 ease-in-out z-20"},ja,8,Ma)):P("",!0)])],40,Oo))),256))])])])]),(v(),X(ce,{to:".toast-container"},[te(Fe,{show:h.value,msg:l.value,onClose:S[2]||(S[2]=R=>h.value=!1)},null,8,["show","msg"])])),(v(),X(ce,{to:"body"},[g.value?(v(),X(It,{key:0,toleft:n.value,totop:o.value,neverExpires:k.value[c.value].neverExpires,onClose:p,onSetExpires:S[3]||(S[3]=R=>Z(c.value)),onShowdialogRemove:j,onShowdialogUpdatehostname:r},null,8,["toleft","totop","neverExpires"])):P("",!0)])),(v(),X(ce,{to:"body"},[M.value?(v(),X(Tt,{key:0,"machine-name":k.value[c.value].name,onClose:S[4]||(S[4]=R=>M.value=!1),onConfirm:S[5]||(S[5]=R=>_e(c.value))},null,8,["machine-name"])):P("",!0),C.value?(v(),X(Ht,{key:1,id:c.value,"given-name":k.value[c.value].name,"host-name":k.value[c.value].hostname,"auto-gen":k.value[c.value].automaticNameMode,onClose:S[6]||(S[6]=R=>C.value=!1),onUpdateDone:A,onUpdateFail:z},null,8,["id","given-name","host-name","auto-gen"])):P("",!0)]))],64)}}},Ba={class:"container mx-auto pb-20 md:pb-24"},Oa={class:"mb-24"},Ia={class:"pb-4 mb-8"},Ta={class:"font-medium space-x-2 mb-5 truncate flex"},Ha=e("span",{class:"text-gray-400"},"/",-1),Ua={class:"flex flex-wrap gap-2 items-center justify-between"},La={class:"text-2xl font-semibold tracking-tight leading-tight truncate flex-shrink-0 max-w-full",tabindex:"-1"},za={class:"flex"},Da={class:"flex gap-2 flex-wrap"},Va=e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]),Y("设备设置 ")],-1),Ga=[Va],Ka={class:"flex border-t border-gray-200 text-sm mt-4 pt-4"},qa={class:"max-w-sm"},Fa=e("div",{class:"text-gray-500 mb-2"},"归属于",-1),Wa={class:"mt-0.5"},Qa={class:"flex items-center text-gray-600 text-sm"},Ya={class:"relative shrink-0 rounded-full overflow-hidden w-5 h-5 text-xs mr-2"},Xa={class:"flex items-center justify-center text-center capitalize text-white font-medium pointer-events-none w-5 h-5 text-xs",style:{"background-color":"rgb(161, 56, 33)"}},Za={"data-state":"closed"},Ja={key:0,class:"max-w-sm border-l border-gray-200 ml-4 pl-4"},ei=e("p",{class:"text-gray-500 mb-2"},"状态",-1),ti={key:0},si=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 外部共享 ",-1),ni=[si],oi={key:1},ai=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-orange-50 bg-orange-50 text-orange-600 rounded-sm px-1 text-xs mr-1"}," 对外共享+1 ",-1),ii=[ai],li={key:2},ri=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-red-50 bg-red-50 text-red-600 rounded-sm px-1 text-xs mr-1"}," 已过期 ",-1),ci=[ri],ui={key:3},di=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"}," 永不过期 ",-1),hi=[di],fi={key:4},mi={class:"inline-flex items-center align-middle justify-center font-medium border border-gray-200 bg-gray-200 text-gray-600 rounded-sm px-1 text-xs mr-1"},vi={key:5},pi=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"}," 子网转发 ",-1),gi=[pi],_i={key:6},xi=e("div",{class:"inline-flex items-center align-middle justify-center font-medium border border-blue-50 bg-blue-50 text-blue-600 rounded-sm px-1 text-xs mr-1"}," 出口节点 ",-1),bi=[xi],yi={class:"mb-8"},wi={class:"flex justify-between mb-4"},ki=e("div",{class:"max-w-xl"},[e("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"子网转发"),e("p",{class:"text-gray-600"}," “子网转发”允许你暴露设备可访问物理网络路由给您的蜃境网络 ")],-1),$i={key:0},Ei=e("button",{class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 mt-2"}," 配置 ",-1),Ci=[Ei],Ri={key:0,class:"p-4 md:p-6 border border-gray-200 rounded-md"},Si=Ne('<ul class="leading-normal"><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 192.168.0.0/24 </li><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 192.168.1.0/24 </li><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 192.168.166.0/24 </li><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 192.168.168.0/24 </li><li title="This IP is a subnet that has not been enabled." class="font-medium text-gray-400"> 198.18.0.0/16 </li></ul>',1),Pi=[Si],Mi={key:1,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},Ni=e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备未暴露任何子网可供转发 ")],-1),ji=[Ni],Ai={key:2,class:"p-4 md:p-6 border border-gray-200 rounded-md flex items-center justify-center text-gray-500 text-center"},Bi=e("div",{class:"flex justify-center"},[e("div",{class:"w-full text-center max-w-xl text-gray-500"}," 该设备来自外部共享，不能暴露子网转发给你 ")],-1),Oi=[Bi],Ii={class:"mb-8"},Ti=e("header",{class:"max-w-xl mb-4"},[e("h3",{class:"text-xl font-semibold tracking-tight mb-2"},"设备信息"),e("p",{class:"text-gray-600"},"关于该设备网络的信息，用于调试连接问题")],-1),Hi={class:"p-4 md:p-6 border border-gray-200 rounded-md grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-2"},Ui={class:"space-y-2"},Li={class:"flex text-sm"},zi=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建者",-1),Di={class:"min-w-0 truncate"},Vi={class:"flex text-sm"},Gi=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备名称",-1),Ki={class:"min-w-0"},qi={class:"flex relative min-w-0"},Fi={class:"truncate"},Wi={key:0,class:"cursor-pointer text-blue-500 pl-2"},Qi={class:"flex text-sm"},Yi=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"域名",-1),Xi={class:"min-w-0"},Zi={class:"flex relative min-w-0"},Ji={class:"truncate"},el={key:0,class:"cursor-pointer text-blue-500 pl-2"},tl={class:"flex text-sm"},sl=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"系统主机名",-1),nl={class:"min-w-0 truncate"},ol={class:"flex text-sm"},al=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"操作系统",-1),il={class:"min-w-0 truncate"},ll={class:"flex text-sm"},rl=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境客户端版本",-1),cl={class:"min-w-0 truncate"},ul={class:"flex items-center"},dl={class:"flex text-sm"},hl=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv4",-1),fl={class:"min-w-0"},ml={class:"flex relative min-w-0"},vl={class:"truncate"},pl={key:0,class:"cursor-pointer text-blue-500 pl-2"},gl={class:"flex text-sm"},_l=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"蜃境网络 IPv6",-1),xl={class:"min-w-0"},bl={class:"flex relative min-w-0"},yl={class:"truncate"},wl={class:"inline-flex justify-start min-w-0 max-w-full"},kl={class:"truncate w-fit flex-shrink"},$l={key:0,class:"cursor-pointer text-blue-500 pl-2"},El={class:"flex text-sm"},Cl=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备ID",-1),Rl={class:"min-w-0 truncate"},Sl={class:"flex text-sm"},Pl=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"设备端点信息",-1),Ml={class:"min-w-0 truncate"},Nl={class:"pl-3 -indent-3"},jl={class:"select-all"},Al={class:"flex text-sm"},Bl=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"中继器",-1),Ol={class:"min-w-0 truncate"},Il={key:0},Tl=e("li",null," 中继器未设定或出错 ",-1),Hl=[Tl],Ul={key:1},Ll={class:"font-medium"},zl={key:0,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"relative inline-block ml-1 -top-px"},Dl=e("polyline",{points:"20 6 9 17 4 12"},null,-1),Vl=[Dl],Gl={class:"space-y-2"},Kl={class:"flex text-sm"},ql=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"创建于",-1),Fl={class:"min-w-0 truncate"},Wl={class:"flex text-sm"},Ql=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"最近更新",-1),Yl={class:"min-w-0 truncate"},Xl={class:"flex text-sm"},Zl=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"密钥过期",-1),Jl={key:0,class:"min-w-0 truncate"},er={key:1,class:"min-w-0 truncate"},tr=e("h2",{class:"pt-2 text-xs uppercase font-semibold text-gray-500 tracking-wide"}," 客户端连通性 ",-1),sr={class:"flex text-sm"},nr=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"复杂网络 Varies",-1),or={key:0,class:"min-w-0 truncate"},ar={key:1,class:"min-w-0 truncate"},ir={class:"flex text-sm"},lr=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"}," 需发夹机制 Hairpinning ",-1),rr={key:0,class:"min-w-0 truncate"},cr={key:1,class:"min-w-0 truncate"},ur={class:"flex text-sm"},dr=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"IPv6",-1),hr={key:0,class:"min-w-0 truncate"},fr={key:1,class:"min-w-0 truncate"},mr={class:"flex text-sm"},vr=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UDP",-1),pr={key:0,class:"min-w-0 truncate"},gr={key:1,class:"min-w-0 truncate"},_r={class:"flex text-sm"},xr=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"UPnP",-1),br={key:0,class:"min-w-0 truncate"},yr={key:1,class:"min-w-0 truncate"},wr={class:"flex text-sm"},kr=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"PCP",-1),$r={key:0,class:"min-w-0 truncate"},Er={key:1,class:"min-w-0 truncate"},Cr={class:"flex text-sm"},Rr=e("dt",{class:"text-gray-500 w-1/3 md:w-1/4 mr-1 shrink-0"},"NAT-PMP",-1),Sr={key:0,class:"min-w-0 truncate"},Pr={key:1,class:"min-w-0 truncate"},Mr={__name:"Machine",setup(t){const s=y(!1),n=Xe(),o=Ze(),a=y(!1),u=y("");fe(a,()=>{a.value&&setTimeout(function(){a.value=!1},5e3)});const p=Q(()=>r.value.issharedin||r.value.issharedout||r.value.expirydesc=="已过期"||r.value.neverExpires||r.value.soonexpiry||r.value.isexitnode||r.value.issubnet),h=y(null),l=y(0),c=y(0),i=y(!1);function d(){var A,z;h.value!=null&&(l.value=((A=h.value)==null?void 0:A.getBoundingClientRect().left)+78,c.value=((z=h.value)==null?void 0:z.getBoundingClientRect().top)+20),window.onresize=()=>{var V,D;h.value!=null&&(l.value=((V=h.value)==null?void 0:V.getBoundingClientRect().left)+78,c.value=((D=h.value)==null?void 0:D.getBoundingClientRect().top)+20)},window.onscroll=()=>{var V,D;h.value!=null&&(l.value=((V=h.value)==null?void 0:V.getBoundingClientRect().left)+78,c.value=((D=h.value)==null?void 0:D.getBoundingClientRect().top)+20)}}function m(A){var z,V,D,T,S;for(h.value=A.target;((z=h.value)==null?void 0:z.tagName)!="BUTTON"&&((V=h.value)==null?void 0:V.tagName)!="button";)h.value=(D=h.value)==null?void 0:D.parentNode;l.value=((T=h.value)==null?void 0:T.getBoundingClientRect().left)+78,c.value=((S=h.value)==null?void 0:S.getBoundingClientRect().top)+20,i.value=!0}function g(){h.value=null,i.value=!1}const _=y(!1);function M(){g(),_.value=!0}const j=y(!1);function C(){g(),j.value=!0}const r=y({}),k=y(""),I=y("");ge(()=>{d(),axios.get("/admin/api/machines").then(function(A){if((A.data.needreauth!=null||A.data.needreauth==!0)&&(u.value=A.data.needreauthreason+"，登录状态失效，请重新登录",a.value=!0,reject()),A.data.errormsg==null||A.data.errormsg===""){I.value=A.data.basedomain;for(var z in A.data.mlist)if(A.data.mlist[z].mipv4===o.params.mip){r.value=A.data.mlist[z],k.value=z;let V=r.value.expirydesc.slice(-2);r.value.expirydesc=="马上就要过期"||V=="分钟"||V=="小时"||V=="1天"?r.value.soonexpiry=!0:r.value.soonexpiry=!1;break}}}).catch(function(A){alert(A)}).then(function(){})});function N(){g(),axios.post("/admin/api/machines",{mid:k.value,state:"set-expires"}).then(function(A){A.data.status=="success"?(r.value.neverExpires=A.data.data.neverExpires,r.value.expirydesc=A.data.data.expires,A.data.data.neverExpires==!0?u.value="已禁用密钥过期":u.value="已启用密钥过期",a.value=!0):(u.value="失败："+A.data.status.substring(6),a.value=!0)}).catch(function(A){console.log(A)})}function U(){axios.post("/admin/api/machine/remove",{mid:k}).then(function(A){A.data.status=="OK"?(_.value=!1,u.value=r.value.name+"已从您的蜃境网络移除！",a.value=!0,n.push("/machines")):alert("失败："+A.data.errmsg)}).catch(function(A){console.log(A)})}function Z(A,z,V){r.value.name=A,r.value.automaticNameMode=z,$e(()=>{j.value=!V,$e(()=>{u.value="已更新设备名称！",a.value=!0})})}function _e(A){u.value="更新设备名称失败！",a.value=!0}return(A,z)=>{const V=Ee("router-link");return v(),x(ue,null,[e("main",Ba,[e("section",Oa,[e("header",Ia,[e("div",Ta,[te(V,{to:"/machines",class:"text-blue-500"},{default:oe(()=>[Y("全部设备")]),_:1}),Ha,e("span",null,E(r.value.mipv4),1)]),e("div",Ua,[e("h1",La,E(r.value.name),1),e("div",za,[e("div",Da,[e("button",{onClick:z[0]||(z[0]=D=>m(D)),class:"btn btn-outline bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700 min-w-0"},Ga)])])]),e("div",Ka,[e("div",qa,[Fa,e("div",Wa,[e("div",Qa,[e("div",Ya,[e("div",Xa,E(r.value.usernamehead),1)]),e("span",Za,E(r.value.useraccount),1)])])]),K(p)?(v(),x("div",Ja,[ei,e("div",null,[r.value.issharedin?(v(),x("span",ti,ni)):P("",!0),r.value.issharedout?(v(),x("span",oi,ii)):P("",!0),r.value.expirydesc=="已过期"?(v(),x("span",li,ci)):P("",!0),r.value.neverExpires?(v(),x("span",ui,hi)):P("",!0),r.value.soonexpiry?(v(),x("span",fi,[e("div",mi,E(r.value.expirydesc),1)])):P("",!0),r.value.isexitnode?(v(),x("span",vi,gi)):P("",!0),r.value.issubnet?(v(),x("span",_i,bi)):P("",!0)])])):P("",!0)])]),e("section",yi,[e("header",wi,[ki,r.value.issubnet?(v(),x("div",$i,Ci)):P("",!0)]),r.value.issubnet?(v(),x("div",Ri,Pi)):P("",!0),!r.value.issubnet&&!r.value.issharedin?(v(),x("div",Mi,ji)):P("",!0),r.value.issharedin?(v(),x("div",Ai,Oi)):P("",!0)]),e("section",Ii,[Ti,e("div",Hi,[e("div",Ui,[e("dl",Li,[zi,e("dd",Di,E(r.value.useraccount),1)]),e("dl",Vi,[Gi,e("dd",Ki,[e("div",qi,[e("div",Fi,E(r.value.name),1),s.value?(v(),x("div",Wi,"复制")):P("",!0)])])]),e("dl",Qi,[Yi,e("dd",Xi,[e("div",Zi,[e("div",Ji,E(r.value.name)+"."+E(r.value.useraccount)+"."+E(I.value),1),s.value?(v(),x("div",el,"复制")):P("",!0)])])]),e("dl",tl,[sl,e("dd",nl,E(r.value.hostname),1)]),e("dl",ol,[al,e("dd",il,E(r.value.os),1)]),e("dl",ll,[rl,e("dd",cl,[e("div",ul,E(r.value.version),1)])]),e("dl",dl,[hl,e("dd",fl,[e("div",ml,[e("div",vl,[e("span",null,E(r.value.mipv4),1)]),s.value?(v(),x("div",pl,"复制")):P("",!0)])])]),e("dl",gl,[_l,e("dd",xl,[e("div",bl,[e("div",yl,[e("span",wl,[e("span",kl,E(r.value.mipv6),1)])]),s.value?(v(),x("div",$l,"复制")):P("",!0)])])]),e("dl",El,[Cl,e("dd",Rl,E(k.value),1)]),e("dl",Sl,[Pl,e("dd",Ml,[e("ul",Nl,[(v(!0),x(ue,null,Pe(r.value.eps,D=>(v(),x("li",jl,[e("span",null,E(D),1)]))),256))])])]),e("dl",Al,[Bl,e("dd",Ol,[r.value.usederp=="x"?(v(),x("ul",Il,Hl)):(v(),x("ul",Ul,[(v(!0),x(ue,null,Pe(r.value.derps,(D,T)=>(v(),x("li",null,[e("strong",Ll,E(T)+" 号中继",1),Y(": "+E(D)+" ms ",1),r.value.usederp==T?(v(),x("svg",zl,Vl)):P("",!0)]))),256))]))])])]),e("div",Gl,[e("dl",Kl,[ql,e("dd",Fl,E(r.value.createat),1)]),e("dl",Wl,[Ql,e("dd",Yl,E(r.value.lastseen),1)]),e("dl",Xl,[Zl,r.value.neverExpires?(v(),x("dd",Jl," 永不过期 ")):P("",!0),r.value.neverExpires?P("",!0):(v(),x("dd",er,E(r.value.expirydesc),1))]),tr,e("dl",sr,[nr,r.value.varies?(v(),x("dd",or,"是")):(v(),x("dd",ar,"否"))]),e("dl",ir,[lr,r.value.hairpinning?(v(),x("dd",rr,"是")):(v(),x("dd",cr,"否"))]),e("dl",ur,[dr,r.value.ipv6en?(v(),x("dd",hr,"是")):(v(),x("dd",fr,"否"))]),e("dl",mr,[vr,r.value.udpen?(v(),x("dd",pr,"是")):(v(),x("dd",gr,"否"))]),e("dl",_r,[xr,r.value.upnpen?(v(),x("dd",br,"是")):(v(),x("dd",yr,"否"))]),e("dl",wr,[kr,r.value.pcpen?(v(),x("dd",$r,"是")):(v(),x("dd",Er,"否"))]),e("dl",Cr,[Rr,r.value.pmpen?(v(),x("dd",Sr,"是")):(v(),x("dd",Pr,"否"))])])])])])]),(v(),X(ce,{to:".toast-container"},[te(Fe,{show:a.value,msg:u.value,onClose:z[1]||(z[1]=D=>a.value=!1)},null,8,["show","msg"])])),(v(),X(ce,{to:"body"},[i.value?(v(),X(It,{key:0,toleft:l.value,totop:c.value,neverExpires:r.value.neverExpires,onClose:g,onSetExpires:N,onShowdialogRemove:M,onShowdialogUpdatehostname:C},null,8,["toleft","totop","neverExpires"])):P("",!0)])),(v(),X(ce,{to:"body"},[_.value?(v(),X(Tt,{key:0,"machine-name":r.value.name,onClose:z[2]||(z[2]=D=>_.value=!1),onConfirm:U},null,8,["machine-name"])):P("",!0),j.value?(v(),X(Ht,{key:1,id:k.value,"host-name":r.value.hostname,"given-name":r.value.name,"auto-gen":r.value.automaticNameMode,onClose:z[3]||(z[3]=D=>j.value=!1),onUpdateDone:Z,onUpdateFail:_e},null,8,["id","host-name","given-name","auto-gen"])):P("",!0)]))],64)}}},Nr={class:"flex-1"},jr=e("div",{class:"text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"},[e("h1",{class:"mr-2",tabindex:"-1"},"通用")],-1),Ar=e("div",{class:"text-gray-600 mt-3 mb-10"},[e("p",null,"管理您的蜃境网络配置")],-1),Br={class:"mt-10"},Or={class:"space-y-10"},Ir=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"机构"),e("p",{class:"mt-1 text-gray-600"}," 这是您所属机构名称（个人用户显示您的账户），无法修改！ ")],-1),Tr={class:"mt-4"},Hr={class:"max-w-sm"},Ur={class:"flex border border-stone-200 hover:border-stone-400 rounded-md relative overflow-hidden min-w-0"},Lr=["value"],zr=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"密钥过期"),e("p",{class:"mt-1 text-gray-600"}," 设置设备可以保持登录蜃境网络而不需重新登录认证的天数 ")],-1),Dr={class:"mt-4"},Vr={class:"flex"},Gr={class:"relative"},Kr={class:"bg-white top-1 bottom-1 right-1 rounded-r-md absolute flex items-center"},qr={class:"flex items-center"},Fr=["disabled"],Wr=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),Qr=[Wr],Yr=["disabled"],Xr=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),Zr=[Xr],Jr=e("div",{class:"flex items-center px-3 bg-gray-50 text-gray-500 border rounded-r border-l-0 border-gray-300"}," 天 ",-1),ec=e("p",{class:"text-sm text-gray-500 mt-1"},"请设置为1~180天",-1),tc={class:"mt-4"},sc=["disabled"],nc=["disabled"],oc={class:"mt-8"},ac=e("header",{class:"max-w-2xl"},[e("h3",{class:"text-xl font-semibold tracking-tight"},"注销蜃境"),e("p",{class:"mt-1 text-gray-600"}," 永久注销蜃境网络（删除所有设备及用户信息），无法恢复！ ")],-1),ic={class:"mt-4"},lc=["disabled"],ye={__name:"General",setup(t){const s=y(!0),n=y(!1),o=y("");fe(n,()=>{n.value&&setTimeout(function(){n.value=!1},5e3)});const a=y(""),u=y(""),p=y(""),h=y(""),l=y(""),c=y(180),i=y(180),d=y(!1),m=y(!1),g=y(!1),_=y("复制");function M(){navigator.clipboard.writeText(l.value).then(function(){_.value="已复制!",setTimeout(()=>{_.value="复制"},3e3)})}function j(){Number(i.value)>1?d.value=!1:d.value=!0,Number(i.value)<180?m.value=!1:m.value=!0,Number(i.value)!=c.value?g.value=!1:g.value=!0}function C(N){i.value=i.value.replace(/[^\d]+/g,"").replace(/^0+(\d)/,"$1"),i.value==""&&(i.value=0),N&&Number(i.value)>180&&(i.value=180),j()}function r(N){N==!0?i.value=Number(i.value)+1:i.value=Number(i.value)-1,j()}function k(){i.value=c.value,j()}ge(()=>{axios.get("/admin/api/self").then(function(N){(N.data.errormsg==null||N.data.errormsg==="")&&(a.value=N.data.useraccount,u.value=N.data.basedomain,p.value=N.data.username,h.value=N.data.usernamehead,l.value=N.data.orgname)}).catch(function(N){alert(N)}).then(function(){}),axios.get("/admin/api/netsettings").then(function(N){N.data.status=="success"?(c.value=N.data.data.maxKeyDurationDays,i.value=N.data.data.maxKeyDurationDays,j()):N.data.status.substring(6)=="用户信息核对失败"}).catch(function(N){alert(N)}).then(function(){})});function I(){axios.post("/admin/api/netsetting/updatekeyexpiry",{maxKeyDurationDays:Number(i.value)}).then(function(N){N.data.status=="success"?(c.value=N.data.data,j(),o.value="已更新您网络中节点密钥最长有效期！",n.value=!0):(o.value="失败："+N.data.status.substring(6),n.value=!0)}).catch(function(N){console.log(N)})}return(N,U)=>(v(),x(ue,null,[e("div",Nr,[jr,Ar,e("div",Br,[e("div",Or,[e("div",null,[Ir,e("div",Tr,[e("div",Hr,[e("div",Ur,[e("input",{class:"outline-none py-2 px-3 w-full h-full font-mono text-sm text-ellipsis",readonly:"",value:l.value},null,8,Lr),e("button",{onClick:M,class:"flex justify-center py-2 pl-3 pr-4 rounded-md bg-white focus:outline-none font-sans text-blue-500 hover:text-blue-800 font-medium text-sm whitespace-nowrap"},E(_.value),1)])])])]),e("div",null,[zr,e("div",Dr,[e("div",Vr,[e("div",Gr,[me(e("input",{"onUpdate:modelValue":U[0]||(U[0]=Z=>i.value=Z),onInput:U[1]||(U[1]=Z=>C(!1)),onBlur:U[2]||(U[2]=Z=>C(!0)),class:"input z-0 border focus:outline-blue-500/60 hover:border border-stone-200 hover:border-stone-400 rounded-r-none h-9 min-h-fit",inputmode:"numeric",pattern:"[0-9]*",id:"key-expiry-duration",tabindex:"0"},null,544),[[$t,i.value]]),e("div",Kr,[e("div",qr,[e("button",{onClick:U[3]||(U[3]=Z=>r(!1)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:d.value,type:"button",tabindex:"-1"},Qr,8,Fr),e("button",{onClick:U[4]||(U[4]=Z=>r(!0)),class:"btn btn-ghost btn-sm px-2 hover:bg-stone-100 disabled:bg-transparent",disabled:m.value,type:"button",tabindex:"-1"},Zr,8,Yr)])])]),Jr]),ec,e("div",tc,[e("button",{onClick:I,class:"btn border-0 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-600/60 text-white disabled:text-white/60 h-9 min-h-fit",disabled:g.value}," 保存 ",8,sc),e("button",{onClick:k,class:"btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3",disabled:g.value}," 重置 ",8,nc)])])])]),e("div",oc,[ac,e("div",ic,[e("button",{disabled:s.value,class:"btn border-0 bg-red-600 hover:bg-red-700 text-white h-9 min-h-fit"}," 注销蜃境… ",8,lc)])])])]),(v(),X(ce,{to:".toast-container"},[te(Fe,{show:n.value,msg:o.value,onClose:U[5]||(U[5]=Z=>n.value=!1)},null,8,["show","msg"])]))],64))}},rc={},cc={class:"flex-1"},uc=Ne('<div class="text-3xl font-semibold tracking-tight leading-tight mb-2 flex items-center"><h1 class="mr-2" tabindex="-1">密钥管理</h1></div><div class="text-gray-600 mt-3 mb-10"><p>查看和管理您的<strong>授权密钥</strong>和<strong>API密钥</strong></p><p class="mt-2">您个人设备的私钥<strong>不</strong>在此管理，它们永远是<strong>私有</strong>并存在于您的设备上，<strong>不</strong>向蜃境披露</p></div><div class="mt-10"><div class="flex justify-between items-center mt-16"><div><h3 class="text-xl font-semibold tracking-tight">授权密钥</h3><p class="text-gray-600">用于无需交互式登录即可实现设备鉴别接入 </p></div><button class="btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"> 生成授权密钥…</button></div><div class="rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"><div class="flex justify-center"><div class="w-full text-center max-w-xl text-gray-500">你还没有任何密钥</div></div></div><div class="flex justify-between items-center mt-16"><div><h3 class="text-xl font-semibold tracking-tight">API 密钥</h3><p class="text-gray-600">API 密钥用于访问蜃境API.</p></div><button class="btn border border-stone-300 hover:border-stone-300 disabled:border-stone-300 bg-base-200 hover:bg-base-300 disabled:bg-base-200/60 text-black disabled:text-black/30 h-9 min-h-fit ml-3 font-normal"> 生成 API 密钥…</button></div><div class="rounded-md border border-stone-200 mt-4 bg-stone-50 p-6"><div class="flex justify-center"><div class="w-full text-center max-w-xl text-gray-500">你还没有任何密钥</div></div></div></div>',3),dc=[uc];function hc(t,s){return v(),x("div",cc,dc)}const fc=kt(rc,[["render",hc]]),mc={class:"container mx-auto pb-20 md:pb-24"},vc={class:"md:flex md:mt-16"},pc={class:"mb-10 md:mr-20 lg:mr-40"},gc={class:"hidden md:block"},_c={class:"flex flex-row mb-12"},xc=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),bc={class:"ml-4"},yc=e("h2",{class:"text-gray-500 font-medium"},"网络配置",-1),wc={class:"flex flex-row mb-12"},kc=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1),$c={class:"ml-4"},Ec=e("h2",{class:"text-gray-500 font-medium"},"个人设置",-1),Cc={class:"select-with-arrow md:hidden mb-4"},Rc=Ne('<optgroup label="网络配置"><option value="features">敬请期待</option><option value="general">通用</option><option value="webhooks">敬请期待</option><option value="billing">敬请期待</option><option value="contact-preferences">敬请期待</option></optgroup><optgroup label="个人设置"><option value="keys">密钥管理</option></optgroup>',2),Sc=[Rc],Pc={__name:"Settings",setup(t){const s={general:ye,features:ye,webhooks:ye,billing:ye,"contact-preferences":ye,keys:fc},n=Ze(),o=Xe(),a=y("");function u(p){o.push("/settings/"+p.target.value)}return Gs((p,h)=>{a.value=p.params.setpart}),ge(()=>{a.value=n.params.setpart}),(p,h)=>{const l=Ee("router-link");return v(),x("main",mc,[e("section",vc,[e("div",pc,[e("div",gc,[e("div",_c,[xc,e("div",bc,[yc,te(l,{class:se(["flex font-medium mt-4",{"text-blue-600":a.value=="general","text-gray-700":a.value!="general"}]),to:"/settings/general"},{default:oe(()=>[Y("通用")]),_:1},8,["class"]),te(l,{class:se(["flex font-medium mt-4",{"text-blue-600":a.value=="features","text-gray-700":a.value!="features"}]),to:"/settings/features"},{default:oe(()=>[Y("敬请期待")]),_:1},8,["class"]),te(l,{class:se(["flex font-medium mt-4",{"text-blue-600":a.value=="webhooks","text-gray-700":a.value!="webhooks"}]),to:"/settings/webhooks"},{default:oe(()=>[Y("敬请期待")]),_:1},8,["class"]),te(l,{class:se(["flex font-medium mt-4",{"text-blue-600":a.value=="billing","text-gray-700":a.value!="billing"}]),to:"/settings/billing"},{default:oe(()=>[Y("敬请期待")]),_:1},8,["class"]),te(l,{class:se(["flex font-medium mt-4",{"text-blue-600":a.value=="contact-preferences","text-gray-700":a.value!="contact-preferences"}]),to:"/settings/contact-preferences"},{default:oe(()=>[Y("敬请期待")]),_:1},8,["class"])])]),e("div",wc,[kc,e("div",$c,[Ec,te(l,{class:se(["flex font-medium mt-4",{"text-blue-600":a.value=="keys","text-gray-700":a.value!="keys"}]),to:"/settings/keys"},{default:oe(()=>[Y("密钥管理")]),_:1},8,["class"])])])]),e("div",Cc,[me(e("select",{"onUpdate:modelValue":h[0]||(h[0]=c=>a.value=c),onChange:u,class:"select select-bordered w-full text-lg"},Sc,544),[[Kt,a.value,void 0,{lazy:!0}]])])]),(v(),X(qt(s[a.value])))])])}}},Mc=[{path:"/",redirect:"/machines"},{path:"/machines",component:Aa},{path:"/machines/:mip",component:Mr},{path:"/settings",redirect:"/settings/general"},{path:"/settings/:setpart",component:Pc}],Nc=Zs({history:fs(),routes:Mc}),Ie=Ft(zn);Ie.config.errorHandler=t=>{};Ie.use(Wt);Ie.use(Nc);Ie.mount("#app");
