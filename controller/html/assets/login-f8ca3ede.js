import{w as L,x as R,o as m,c as p,m as e,k as u,l as B,I as j,_ as ie,Q as re,B as $,C as V,z as g,E as ue,t as E,G as q,P as D,A as N,T as O,F as Q,J as de,K as ce,y as X,u as K,a as ve,b as me}from"./plugin-vueexport-helper-bfb13166.js";import{_ as G,b as he,p as fe}from"./Toast-fca8bcc7.js";const pe="/img/logo_withname@60.png",be={class:"s-canvas -ml-20"},ge=["width","height"],xe={__name:"Identify",props:{identifyCode:{type:String,default:"jida"},fontSizeMin:{type:Number,default:25},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:200},backgroundColorMax:{type:Number,default:220},dotColorMin:{type:Number,default:60},dotColorMax:{type:Number,default:120},contentWidth:{type:Number,default:80},contentHeight:{type:Number,default:36}},setup(r){const l=r;function d(a,o){return Math.floor(Math.random()*(o-a)+a)}function c(a,o){let t=d(a,o),s=d(a,o),y=d(a,o);return"rgb("+t+","+s+","+y+")"}function n(){let o=document.getElementById("s-canvas").getContext("2d");o.textBaseline="bottom",o.fillStyle=c(l.backgroundColorMin,l.backgroundColorMax),o.fillRect(0,0,l.contentWidth,l.contentHeight);for(let t=0;t<l.identifyCode.length;t++)h(o,l.identifyCode[t],t);f(o),b(o)}function h(a,o,t){a.fillStyle=c(50,160),a.font=d(l.fontSizeMin,l.fontSizeMax)+"px SimHei";let s=(t+1)*(l.contentWidth/(l.identifyCode.length+1)),y=d(l.fontSizeMax,l.contentHeight-5);var S=d(-30,30);a.translate(s,y),a.rotate(S*Math.PI/180),a.fillText(o,0,0),a.rotate(-S*Math.PI/180),a.translate(-s,-y)}function f(a){for(let o=0;o<4;o++)a.strokeStyle=c(100,200),a.beginPath(),a.moveTo(d(0,l.contentWidth),d(0,l.contentHeight)),a.lineTo(d(0,l.contentWidth),d(0,l.contentHeight)),a.stroke()}function b(a){for(let o=0;o<30;o++)a.fillStyle=c(0,255),a.beginPath(),a.arc(d(0,l.contentWidth),d(0,l.contentHeight),1,0,2*Math.PI),a.fill()}return L(()=>l.identifyCode,()=>{n()}),R(()=>{n()}),(a,o)=>(m(),p("div",be,[e("canvas",{id:"s-canvas",class:"rounded-r-md",width:r.contentWidth,height:r.contentHeight},null,8,ge)]))}};const we=["disabled"],_e=["disabled"],ye=["disabled"],ke=["disabled"],Ce=["disabled"],Me=["disabled"],Se={__name:"VerifyCode",props:{switchoff:Boolean,setFocus:Boolean},emits:["focusSet","complete"],setup(r,{emit:l}){const d=r;L(()=>d.setFocus,o=>{var t;o&&(l("focusSet"),(t=c.value)==null||t.focus())});const c=u(null),n=u(Array(6));function h(o){var t=o.target.dataset.index*1,s=o.target;s.value=s.value.replace(/Digit|Numpad/i,"").slice(0,1),n.value[t]=s.value,n.value.join("").length===6&&(document.activeElement.blur(),l("complete",n.value.join("")))}function f(o){var t=o.target.dataset.index*1,s=o.target;o.key==="Backspace"?n.value[t].length>0?(n.value[t]="",l("complete",[])):s.previousElementSibling&&(s.previousElementSibling.focus(),n.value[t-1]="",l("complete",[])):o.key==="Delete"?(n.value[t].length>0?(n.value[t]="",l("complete",[])):s.nextElementSibling&&(n.value[1]="",l("complete",[])),s.nextElementSibling&&s.nextElementSibling.focus()):o.key==="Home"?s.parentElement.children[0]&&s.parentElement.children[0].focus():o.key==="End"?s.parentElement.children[n.value.length-1]&&s.parentElement.children[n.value.length-1].focus():o.key==="ArrowLeft"?s.previousElementSibling&&s.previousElementSibling.focus():o.key==="ArrowRight"&&s.nextElementSibling&&s.nextElementSibling.focus()}function b(o){var t=o.target.dataset.index*1,s=o.target;s.value=s.value.replace(/Digit|Numpad/i,"").slice(0,1),/Digit|Numpad/i.test(o.code)?(n.value[t]=o.code.replace(/Digit|Numpad/i,""),s.nextElementSibling&&s.nextElementSibling.focus(),n.value.join("").length===6&&(document.activeElement.blur(),l("complete",n.value.join("")))):n.value[t]===""&&(n.value[t]="",l("complete",[]))}function a(o){o.clipboardData.items[0].getAsString(t=>{t.toString().length===6&&/^\d{6}$/.test(t.toString())?(n.value=t.split(""),document.activeElement.blur(),l("complete",n.value.join(""))):(n.value[0]=new Array(6),l("complete",[]))})}return R(()=>{}),(o,t)=>(m(),p("div",{class:"flex space-x-3",onKeydown:f,onKeyup:b,onPaste:a,onInput:h},[B(e("input",{disabled:r.switchoff,ref_key:"firstInput",ref:c,class:"ml-2 border-1 border-stone-200 bg-stone-100 rounded-md shadow-inner h-9 w-7 text-2xl text-center",max:"9",min:"0",maxlength:"1","data-index":"0","onUpdate:modelValue":t[0]||(t[0]=s=>n.value[0]=s),type:"number"},null,8,we),[[j,n.value[0],void 0,{trim:!0,number:!0}]]),B(e("input",{disabled:r.switchoff,class:"border-1 border-stone-200 bg-stone-100 rounded-md shadow-inner h-9 w-7 text-2xl text-center",max:"9",min:"0",maxlength:"1","data-index":"1","onUpdate:modelValue":t[1]||(t[1]=s=>n.value[1]=s),type:"number"},null,8,_e),[[j,n.value[1],void 0,{trim:!0,number:!0}]]),B(e("input",{disabled:r.switchoff,class:"border-1 border-stone-200 bg-stone-100 rounded-md shadow-inner h-9 w-7 text-2xl text-center",max:"9",min:"0",maxlength:"1","data-index":"2","onUpdate:modelValue":t[2]||(t[2]=s=>n.value[2]=s),type:"number"},null,8,ye),[[j,n.value[2],void 0,{trim:!0,number:!0}]]),B(e("input",{disabled:r.switchoff,class:"border-1 border-stone-200 bg-stone-100 rounded-md shadow-inner h-9 w-7 text-2xl text-center",max:"9",min:"0",maxlength:"1","data-index":"3","onUpdate:modelValue":t[3]||(t[3]=s=>n.value[3]=s),type:"number"},null,8,ke),[[j,n.value[3],void 0,{trim:!0,number:!0}]]),B(e("input",{disabled:r.switchoff,class:"border-1 border-stone-200 bg-stone-100 rounded-md shadow-inner h-9 w-7 text-2xl text-center",max:"9",min:"0",maxlength:"1","data-index":"4","onUpdate:modelValue":t[4]||(t[4]=s=>n.value[4]=s),type:"number"},null,8,Ce),[[j,n.value[4],void 0,{trim:!0,number:!0}]]),B(e("input",{disabled:r.switchoff,class:"border-1 border-stone-200 bg-stone-100 rounded-md shadow-inner h-9 w-7 text-2xl text-center",max:"9",min:"0",maxlength:"1","data-index":"5","onUpdate:modelValue":t[5]||(t[5]=s=>n.value[5]=s),type:"number"},null,8,Me),[[j,n.value[5],void 0,{trim:!0,number:!0}]])],32))}};const _=r=>(de("data-v-91e70613"),r=r(),ce(),r),$e={key:0,class:"bg-white rounded-md relative p-4 md:p-6 text-stone-700 max-w-sm min-w-[19rem] my-8 mx-auto w-[97%] shadow-md border-stone-200 border",style:{"pointer-events":"auto"}},ze=_(()=>e("header",{class:"flex items-center justify-between space-x-4 mb-5 mr-8"},[e("div",{class:"font-semibold text-lg truncate"},"注册新用户")],-1)),Be=_(()=>e("p",{class:"flex justify-start text-stone-500 mt-2 mb-8 text-xs text-left"},"*测试阶段仅支持手机号注册",-1)),je=_(()=>e("input",{type:"hidden",id:"fp",name:"fp"},null,-1)),Ie={class:"flex flex-row mb-5 border rounded-md border-stone-300 hover:border-stone-400 max-w-xs tooltip-bottom tooltip-error"},Ee=_(()=>e("div",{class:"flex flex-row rounded-l-md rounded-r-none bg-stone-200 text-base align-middle content-center h-9 w-16 -mr-16"},[e("svg",{t:"1674637147479",class:"icon h-9 w-9 -mr-9",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3031"},[e("path",{d:"M511.991302 128.08519c-212.038254 0-383.906623 171.883719-383.906623 383.91481s171.868369 383.91481 383.906623 383.91481c212.031091 0 383.922996-171.883719 383.922996-383.91481S724.022393 128.08519 511.991302 128.08519zM511.991302 847.925842c-79.240739 0-151.927201-27.603685-209.382774-73.499991l158.574598-84.949764-37.632085-29.79049c-46.208415-36.601616-63.438844-113.00575-63.438844-152.559605L360.112196 406.961712c0-45.36521 75.061556-108.476597 148.966777-108.476597 74.154907 0 146.654105 62.111616 146.654105 108.476597l0 100.165304c0 39.646975-12.450567 116.412336-59.143005 152.747893l-38.601156 30.008454 162.253384 85.386716C662.981155 820.635289 590.731644 847.925842 511.991302 847.925842z",fill:"#78716c","p-id":"3032"})])],-1)),He=["disabled"],Le={key:0,t:"1674704280252",class:"icon h-9 -mr-16 animation-here",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3838"},Ne=_(()=>e("path",{d:"M689.664 917.504L290.816 552.96c-12.288-10.752-19.456-26.624-19.456-43.008s7.168-32.256 19.456-43.008L689.664 102.4c18.944-17.92 46.08-23.552 70.656-14.336 24.064 9.216 40.96 31.232 43.52 57.344v729.088c-2.048 26.112-18.944 48.128-43.52 57.344-24.576 9.216-51.712 3.584-70.656-14.336z",fill:"#ef4444","p-id":"3839"},null,-1)),Re=[Ne],We={key:0,class:"flex text-xs text-red-500 -mt-4 justify-end"},Te=_(()=>e("p",null,"请输入合法用户名",-1)),Ve=[Te],De={class:"flex flex-row justify-self-end mb-5 border rounded-md border-stone-300 hover:border-stone-400 max-w-xs"},Pe=_(()=>e("div",{class:"flex flex-row rounded-l-md rounded-r-none bg-stone-200 text-base align-middle content-center h-9 w-16 -mr-16"},[e("svg",{t:"1674636847709",class:"icon h-9 w-9",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3935"},[e("path",{d:"M693.352883 126.340453 329.308633 126.340453c-44.685735 0-80.910774 36.22197-80.910774 80.901565l0 606.755084c0 44.677549 36.224016 80.908728 80.910774 80.908728l364.04425 0c44.676525 0 80.901565-36.231179 80.901565-80.908728L774.254447 207.240995C774.254447 162.562423 738.030431 126.340453 693.352883 126.340453zM572.002071 834.222749 450.650235 834.222749l0-40.450271 121.350812 0L572.001047 834.222749zM713.57853 733.097584c0 11.156084-9.046027 20.224624-20.225647 20.224624L329.308633 753.322208c-11.178597 0-20.225647-9.067516-20.225647-20.224624L309.082986 207.240995c0-11.180644 9.04705-20.225647 20.225647-20.225647l364.04425 0c11.17962 0 20.225647 9.045003 20.225647 20.225647L713.57853 733.097584z",fill:"#78716c","p-id":"3936"})]),e("svg",{t:"1674641827678",class:"icon h-9 w-4",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4249"},[e("path",{d:"M427.469 451.738l55.091 61.747-73.165 58.726H160.922c-13.568 0-22.58 0-27.239-1.536-13.517 0-30.771-7.526-38.963-15.053L56.525 514.97l68.25-63.284 302.694 0.052z m91.443 512L453.427 1024l-54.937-60.262 33.587-373.504 64.256-57.242 56.217 57.242-33.638 373.504z m45.875-525.568l-65.485 60.262-53.606-61.747 32.205-371.917L544.563 0l53.863 64.768-33.639 373.402z m0.307 136.243l-56.115-60.877 72.243-59.904 248.423-3.994c13.568-0.204 22.579-0.358 27.29 1.076 13.516-0.205 30.873 7.014 39.219 14.438l38.81 40.038-67.226 64.359-302.644 4.864z","p-id":"4250",fill:"#78716c"})]),e("svg",{t:"1674641867132",class:"icon h-9 w-5",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"944"},[e("path",{d:"M303.95 890.37l-75.717 64.503-29.169-35.334c-8.477-9.21-14.18-21.502-15.374-35.296-0.54-6.165 0.346-13.795 1.194-21.501l19.652-231.812c2.735-21.5 8.9-38.416 21.655-50.631l52.52-49.13 52.288 53.715-27.05 305.485z m40.227-452.872l-64.118 56.796-30.44-32.213c-13.525-13.794-22.773-32.251-24.006-46.046-0.655-7.668 0.077-16.877 0.655-27.666l18.573-208.77c2.042-29.168 8.63-41.422 29.785-62.923l37.993-39.92 57.953 66.007-26.395 294.735z m289.263 463.66l61.614 72.172-31.366 27.628c-21.27 19.96-30.248 23.042-70.129 23.042H337.164c-38.378 0-54.138-4.624-69.55-23.042l-23.775-26.125 82.613-73.674H633.44z m40.46-449.827l56.18 62.962-68.434 59.84H356.122l-57.452-59.879 68.203-62.962h307.026zM393.421 122.84l-60.92-64.503 30.941-32.252C381.67 6.126 394.963 0 421.05 0h277.858c24.584 0 38.918 6.127 54.485 26.086l28.822 30.75-80.224 66.005H393.422z m285.294 471.252l68.318-61.382 33.793 35.296c10.134 10.75 15.952 24.545 17.301 39.92 0.81 9.17 0.077 18.418-0.54 29.169l-20.036 227.187c-0.463 12.292-2.736 21.501-3.892 26.086-2.273 9.21-7.707 16.916-23.39 30.71l-38.378 35.335-59.494-66.045 26.318-296.276z m40.228-452.872l78.683-66.006 25.547 29.17c10.288 12.291 15.953 24.583 17.032 36.836 0.655 7.668-0.193 15.336-0.925 24.584L820.515 389.91c-4.315 38.378-12.06 55.294-33.446 73.713l-36.952 33.754-57.452-59.88 26.279-296.276z","p-id":"945",fill:"#78716c"})]),e("svg",{t:"1674641902866",class:"icon h-9 w-5",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1130"},[e("path",{d:"M326.206 885.783l-75.562 66.006-27.28-30.71c-11.946-13.756-17.495-24.545-18.574-36.837-0.54-6.165 0.04-16.877 0.77-26.125l23.12-262.522 70.977-66.006 52.558 56.797-26.01 299.397z m40.498-449.827l-65.506 58.338-57.336-58.338 22.542-268.648c3.467-30.71 8.515-43.002 29.94-61.42l37.068-32.252 59.378 64.503-26.086 297.817z m283.252 465.203l63.116 72.17-25.624 23.005c-25.624 23.042-39.034 27.666-82.036 27.666H372.06c-50.67 0-58.608-3.083-80.687-27.666L269.41 973.33l79.647-72.17h300.9z m9.787-449.827c30.71 0 40.15 3.044 60.61 26.125l29.17 35.333-69.86 61.344h-302.44l-57.568-61.383 68.318-61.458h271.77z m-245.22-328.49L352.06 58.338l35.412-33.754C407.393 6.127 422.19 0 459.027 0H752.26l60.496 59.88-71.246 62.96H414.522z m286.45 466.666l65.659-56.797 35.45 36.837c11.83 12.254 15.567 19.96 16.76 33.755 0.81 9.21 0.888 27.666-0.731 44.505L800.54 850.45c-4.47 36.875-10.79 52.211-32.098 72.171l-35.411 33.793-59.65-67.586 27.59-299.32z","p-id":"1131",fill:"#78716c"})])],-1)),Ae=["disabled"],Xe={key:0,t:"1674704280252",class:"icon h-9 -mr-16 animation-here",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3838"},Ue=_(()=>e("path",{d:"M689.664 917.504L290.816 552.96c-12.288-10.752-19.456-26.624-19.456-43.008s7.168-32.256 19.456-43.008L689.664 102.4c18.944-17.92 46.08-23.552 70.656-14.336 24.064 9.216 40.96 31.232 43.52 57.344v729.088c-2.048 26.112-18.944 48.128-43.52 57.344-24.576 9.216-51.712 3.584-70.656-14.336z",fill:"#ef4444","p-id":"3839"},null,-1)),Ze=[Ue],Fe={key:1,class:"flex text-xs text-red-500 -mt-4 justify-end"},Ke=_(()=>e("p",null,"请输入合法手机号",-1)),qe=[Ke],Oe=["disabled"],Qe={key:0,t:"1674701202328",class:"icon h-9 mr-20",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7795"},Ge=_(()=>e("path",{d:"M802.922882 383.309012 428.076612 758.155283 220.943065 551.154765c-22.317285-22.317285-22.317285-55.993269 0-78.310553 22.450315-22.450315 55.993269-22.450315 78.443583 0l128.689964 128.689964L724.613352 304.999482c22.450315-22.450315 55.993269-22.450315 78.30953 0C825.373197 327.316767 825.373197 360.858698 802.922882 383.309012zM512 64.322981c-246.155283 0-447.677019 201.521736-447.677019 447.677019s201.521736 447.677019 447.677019 447.677019 447.677019-201.521736 447.677019-447.677019S758.155283 64.322981 512 64.322981z",fill:"#4ade80","p-id":"7796"},null,-1)),Je=[Ge],Ye={class:"flex flex-row justify-self-end mb-5 rounded-md max-w-xs"},et=["disabled"],tt={class:"flex mt-10 justify-end space-x-4"},ot=["disabled"],nt=_(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),st=[nt],lt={key:0,class:"flex fixed overflow-y-auto inset-0 py-8 z-100 bg-gray-900 bg-opacity-[0.07]",style:{"pointer-events":"auto"}},at=_(()=>e("svg",{t:"1674733336391",class:"icon w-full animate-slowspin self-center",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9256",width:"200",height:"200"},[e("path",{d:"M448 224a96 64 90 1 0 128 0 96 64 90 1 0-128 0Z",fill:"#57534e",opacity:".9","p-id":"9257"}),e("path",{d:"M448 800a96 64 90 1 0 128 0 96 64 90 1 0-128 0Z",fill:"#57534e",opacity:".5","p-id":"9258"}),e("path",{d:"M704 512a96 64 0 1 0 192 0 96 64 0 1 0-192 0Z",fill:"#57534e",opacity:".7","p-id":"9259"}),e("path",{d:"M128 512a96 64 0 1 0 192 0 96 64 0 1 0-192 0Z",fill:"#57534e",opacity:".3","p-id":"9260"}),e("path",{d:"M647.766905 374.606262a64 96 44.999 1 0 135.762133-135.766872 64 96 44.999 1 0-135.762133 135.766872Z",fill:"#57534e",opacity:".8","p-id":"9261"}),e("path",{d:"M240.470962 785.16061a64 96 44.999 1 0 135.762133-135.766872 64 96 44.999 1 0-135.762133 135.766872Z",fill:"#57534e",opacity:".4","p-id":"9262"}),e("path",{d:"M672.02313 760.903595a96 64 44.999 1 0 90.508088-90.511247 96 64 44.999 1 0-90.508088 90.511247Z",fill:"#57534e",opacity:".6","p-id":"9263"}),e("path",{d:"M261.468782 353.607652a96 64 44.999 1 0 90.508088-90.511247 96 64 44.999 1 0-90.508088 90.511247Z",fill:"#57534e",opacity:".2","p-id":"9264"})],-1)),it=[at],rt={__name:"Register",props:{show:Boolean,wantMeClose:Boolean},emits:["close","reg-done"],setup(r,{emit:l}){const d=r,c=u(!1),n=u("");L(c,()=>{c.value&&setTimeout(function(){c.value=!1},5e3)});const h=u(null),f=u(null),b=u(""),a=u(""),o=u("获取验证码"),t=u(!1),s=u(!1),y=u(!1),S=u(!1),w=u(!0),C=u(!0),x=u(!1),z=u(!1),W="0123456789abcdefghijklmnopqrstuvwxyz",I=u("jida");function T(i){if(w.value&&C.value){I.value="";for(let v=0;v<i;v++)I.value+=W[Math.floor(Math.random()*W.length)]}}R(()=>{T(4)});function P(){clearInterval(A.value),t.value=!1,s.value=!1,w.value=!0,C.value=!0,T(4),b.value="",a.value="",o.value="获取验证码",l("close")}L(()=>d.wantMeClose,i=>{i&&P()}),re(()=>{});const J=RegExp(/[(\ )(\`)(\~)(\!)(\@)(\#)(\$)(\%)(\^)(\&)(\*)(\()(\))(\-)(\_)(\+)(\=)(\[)(\])(\{)(\})(\|)(\\)(\;)(\:)(\')(\")(\,)(\.)(\/)(\<)(\>)(\?)(\)(\·)(\！)(\￥)(\…)(\（)(\）)(\——)(\【)(\】)(\「)(\」)(\、)(\；)(\：)(\“)(\”)(\’)(\‘)(\？)(\《)(\》)(\，)(\。)]+/),Y=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;function Z(){var i,v;J.test((i=h.value)==null?void 0:i.value)?t.value=!0:(t.value=!1,y.value=!1),((v=h.value)==null?void 0:v.value)==""&&(t.value=!0)}function F(){var i;Y.test((i=f.value)==null?void 0:i.value)?(s.value=!1,S.value=!1):s.value=!0}function ee(i){b.value.length==I.value.length&&(b.value!=I.value?(b.value="",T(4)):(i.target.blur(),w.value=!1))}function te(i){i.length==0?a.value="":a.value=i}const A=u();function oe(){let i=5;w.value=!0,o.value="重新获取("+i+"s)",A.value=setInterval(()=>{i>0&&(i--,o.value="重新获取("+i+"s)",i==0&&(clearInterval(A.value),o.value="重新获取",w.value=!1))},1e3)}function ne(){return new Promise((i,v)=>{var k,H;axios.post("/api/register",{name:(k=h.value)==null?void 0:k.value,mobile:(H=f.value)==null?void 0:H.value}).then(function(M){M.data.status=="success"?i("success"):v(M.data.status.substring(6))}).catch(function(M){v(M)})})}function se(){Z(),F(),t.value||s.value?(t.value&&(y.value=!0,setTimeout(()=>{y.value=!1},3e3)),s.value&&(S.value=!0,setTimeout(()=>{S.value=!1},3e3))):ne().then(function(i){C.value=!1,oe()}).catch(function(i){n.value=i,c.value=!0})}function le(){return new Promise((i,v)=>{var k,H;axios.post("/api/register",{name:(k=h.value)==null?void 0:k.value,mobile:(H=f.value)==null?void 0:H.value,verifyCode:a.value}).then(function(M){M.data.status=="success"?i(M):v(M.data.status.substring(6))}).catch(function(M){v(M)})})}function ae(){x.value=!0,le().then(i=>{x.value=!1,l("reg-done",i.data.data)}).catch(i=>{ccbejnchjvrvcdtlrhgbfbhncivnnlvjuleiighnr,x.value=!1,n.value=i,c.value=!0})}return(i,v)=>(m(),p(Q,null,[$(D,{"enter-from-class":"opacity-0 scale-y-75 ","leave-to-class":"opacity-0 scale-y-75","enter-active-class":"transition ease-in-out duration-100 delay-150","leave-active-class":"transition ease-in-out duration-100"},{default:V(()=>[r.show?(m(),p("div",$e,[ze,Be,e("form",{onSubmit:v[3]||(v[3]=q(k=>i.$emit("confirm"),["prevent"]))},[je,e("div",Ie,[Ee,e("input",{ref_key:"nameInput",ref:h,disabled:!C.value,onInput:Z,type:"text",name:"name",placeholder:"请输入您的姓名",class:"border-0 rounded-md bg-transparent w-full h-9 pr-3 pl-[4.5rem] leading-5 placeholder:text-sm text-sm"},null,40,He),y.value?(m(),p("svg",Le,Re)):g("",!0)]),t.value?(m(),p("div",We,Ve)):g("",!0),e("div",De,[Pe,e("input",{ref_key:"phoneInput",ref:f,disabled:!C.value,onInput:F,type:"text",name:"mobile",placeholder:"请输入您的手机号",class:"border-0 rounded-md bg-transparent w-full h-9 pr-3 pl-[4.5rem] leading-5 placeholder:text-sm text-sm"},null,40,Ae),S.value?(m(),p("svg",Xe,Ze)):g("",!0)]),s.value?(m(),p("div",Fe,qe)):g("",!0),e("div",{class:ue(["flex flex-row items-center justify-self-end mb-5 border rounded-md max-w-xs",{"border-stone-300 hover:border-stone-400":w.value&&o.value=="获取验证码","border-green-400":!w.value||o.value!="获取验证码"}])},[B(e("input",{"onUpdate:modelValue":v[0]||(v[0]=k=>b.value=k),disabled:!w.value||!C.value&&b.value==I.value,onInput:ee,type:"text",name:"captcha",placeholder:"请输入图形验证码",autocomplete:"off",class:"border-0 rounded-md w-full h-9 px-3 leading-5 pr-24 placeholder:text-sm text-sm"},null,40,Oe),[[j,b.value]]),!w.value||o.value!="获取验证码"?(m(),p("svg",Qe,Je)):g("",!0),$(xe,{onClick:v[1]||(v[1]=k=>T(4)),identifyCode:I.value},null,8,["identifyCode"])],2),e("div",Ye,[$(Se,{switchoff:C.value,setFocus:z.value,onFocusSet:v[2]||(v[2]=k=>z.value=!1),onComplete:te},null,8,["switchoff","setFocus"]),e("button",{ref:"sendCodeBtn",disabled:w.value,onClick:se,class:"text-xs h-9 w-20 z-0 text-blue-500 hover:text-blue-900 disabled:text-stone-500/60"},E(o.value),9,et)]),e("footer",tt,[e("button",{onClick:P,class:"btn border border-stone-300 hover:border-stone-300 bg-stone-200 hover:bg-stone-300 text-black h-9 min-h-fit",type:"button"},"取消"),e("button",{ref:"regBtn",disabled:C.value||a.value.length<6,onClick:ae,class:"btn border-0 bg-blue-500 hover:bg-blue-900 disabled:bg-blue-500/60 text-white disabled:text-white/60 h-9 min-h-fit",type:"button"},"注册",8,ot)])],32),e("button",{onClick:P,class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},st)])):g("",!0)]),_:1}),x.value?(m(),p("div",lt,it)):g("",!0),(m(),N(O,{to:".toast-container"},[$(G,{show:c.value,msg:n.value,onClose:v[4]||(v[4]=k=>c.value=!1)},null,8,["show","msg"])]))],64))}},ut=ie(rt,[["__scopeId","data-v-91e70613"]]),dt={key:0,class:"bg-white rounded-md relative p-4 md:p-6 text-stone-700 max-w-sm min-w-[19rem] my-8 mx-auto w-[97%] shadow-md border-stone-200 border",style:{"pointer-events":"auto"}},ct=e("header",{class:"flex items-center justify-between space-x-4 mb-5 mr-8"},[e("div",{class:"font-semibold text-lg truncate"},"注册成功！")],-1),vt={class:"flex justify-start text-stone-600 mt-2 mb-8 text-base text-left"},mt=e("br",null,null,-1),ht={class:"flex justify-start text-stone-600 mt-2 mb-8 text-base text-left"},ft=e("br",null,null,-1),pt={class:"flex justify-start text-stone-600 mt-2 mb-8 text-base text-left"},bt=e("br",null,null,-1),gt={class:"flex justify-start text-stone-600 mt-2 mb-8 text-base text-left"},xt=e("br",null,null,-1),wt=e("p",{class:"flex justify-start text-stone-500 mt-2 mb-8 text-base text-left"},"您可以使用上面的阿里云IDaaS登录控制台！",-1),_t=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),yt=[_t],kt={__name:"RegisterDone",props:{show:Boolean,welcomemsg:String},setup(r){return(l,d)=>(m(),N(D,{"enter-from-class":"opacity-0 scale-y-75 ","leave-to-class":"opacity-0 scale-y-75","enter-active-class":"transition ease-in-out duration-100 delay-150","leave-active-class":"transition ease-in-out duration-100"},{default:V(()=>[r.show?(m(),p("div",dt,[ct,e("p",vt,E(r.welcomemsg.split("#10")[0]),1),mt,e("p",ht,E(r.welcomemsg.split("#10")[1]),1),ft,e("p",pt,E(r.welcomemsg.split("#10")[2]),1),bt,e("p",gt,E(r.welcomemsg.split("#10")[3]),1),xt,wt,e("button",{onClick:d[0]||(d[0]=c=>l.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},yt)])):g("",!0)]),_:1}))}},Ct={key:0,class:"bg-white rounded-md relative p-4 md:p-6 text-stone-700 max-w-sm min-w-[19rem] my-8 mx-auto w-[97%] shadow-md border-stone-200 border",style:{"pointer-events":"auto"}},Mt=e("header",{class:"flex items-center justify-between space-x-4 mb-5 mr-8"},[e("div",{class:"font-semibold text-lg truncate"},"请使用微信扫描小程序码确认登录")],-1),St={class:"text-red-400"},$t=["src"],zt=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.25em",height:"1.25em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1),Bt=[zt],jt={__name:"WxQR",props:{show:Boolean,wxminicode:String,checkcode:String},setup(r){const l=r,d=u("");function c(){return new Promise((n,h)=>{axios.post("/wxmini",{state:l.checkcode}).then(function(f){n(f.data)}).catch(function(f){h("error")})})}return R(()=>{d.value=l.wxminicode;const n=setInterval(()=>{c().then(function(h){switch(h.status){case"Wait":break;case"New":d.value=h.code;break;case"OK":clearInterval(n),window.location.href="/a/oauth_response?code="+h.code+"&state="+l.checkcode;break}}).catch()},1500)}),(n,h)=>(m(),N(D,{"enter-from-class":"opacity-0 scale-y-75 ","leave-to-class":"opacity-0 scale-y-75","enter-active-class":"transition ease-in-out duration-100 delay-150","leave-active-class":"transition ease-in-out duration-100"},{default:V(()=>[r.show?(m(),p("div",Ct,[Mt,e("h2",null,[X("核验码: "),e("strong",St,E(r.checkcode.substring(3,9)),1)]),e("img",{src:"data:image/jpeg;base64,"+d.value},null,8,$t),e("button",{onClick:h[0]||(h[0]=f=>n.$emit("close")),class:"btn btn-sm btn-ghost absolute top-5 right-5 px-2 py-2 border-0 bg-base-0 focus:bg-base-200 hover:bg-base-200",type:"button"},Bt)])):g("",!0)]),_:1}))}},It=e("div",{class:"mb-10"},[e("img",{class:"h-8 w-24",src:pe})],-1),Et={key:0,method:"POST"},Ht=e("input",{type:"hidden",name:"provider",value:"Ali"},null,-1),Lt=["value"],Nt=e("button",{type:"submit",class:"btn btn-outline rounded-md shadow border-stone-300 hover:border-stone-400 hover:bg-transparent text-black hover:text-black h-10 min-h-fit w-64 justify-start"},[e("svg",{t:"1674566173646",class:"ml-8 mr-3",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2782",width:"20",height:"20"},[e("path",{d:"M959.2 383.9c-0.3-82.1-66.9-148.6-149.1-148.6H575.9l21.6 85.2 201 43.7c18.3 4.2 32.1 20.3 32.9 39.7 0.1 0.5 0.1 216.1 0 216.6-0.8 19.4-14.6 35.5-32.9 39.7l-201 43.7-21.6 85.3h234.2c82.1 0 148.8-66.5 149.1-148.6V383.9zM225.5 660.4c-18.3-4.2-32.1-20.3-32.9-39.7-0.1-0.6-0.1-216.1 0-216.6 0.8-19.4 14.6-35.5 32.9-39.7l201-43.7 21.6-85.2H213.8c-82.1 0-148.8 66.4-149.1 148.6V641c0.3 82.1 67 148.6 149.1 148.6H448l-21.6-85.3-200.9-43.9z m200.9-158.8h171v21.3h-171z",fill:"#ff7500","p-id":"2783"})]),X(" 登录（阿里云IDaaS） ")],-1),Rt=["onSubmit"],Wt=e("input",{type:"hidden",name:"provider",value:"WXScan"},null,-1),Tt=["value"],Vt=e("button",{type:"submit",class:"btn btn-outline rounded-md shadow border-stone-300 hover:border-stone-400 hover:bg-transparent text-black hover:text-black h-10 min-h-fit w-64 justify-start"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"ml-8 mr-3",viewBox:"0 0 24 24",width:"20",height:"20"},[e("path",{fill:"none",d:"M0 0h24v24H0z"}),e("path",{d:"M15.84 12.691l-.067.02a1.522 1.522 0 0 1-.414.062c-.61 0-.954-.412-.77-.921.136-.372.491-.686.925-.831.672-.245 1.142-.804 1.142-1.455 0-.877-.853-1.587-1.905-1.587s-1.904.71-1.904 1.587v4.868c0 1.17-.679 2.197-1.694 2.778a3.829 3.829 0 0 1-1.904.502c-1.984 0-3.598-1.471-3.598-3.28 0-.576.164-1.117.451-1.587.444-.73 1.184-1.287 2.07-1.541a1.55 1.55 0 0 1 .46-.073c.612 0 .958.414.773.924-.126.347-.466.645-.861.803a2.162 2.162 0 0 0-.139.052c-.628.26-1.061.798-1.061 1.422 0 .877.853 1.587 1.905 1.587s1.904-.71 1.904-1.587V9.566c0-1.17.679-2.197 1.694-2.778a3.829 3.829 0 0 1 1.904-.502c1.984 0 3.598 1.471 3.598 3.28 0 .576-.164 1.117-.451 1.587-.442.726-1.178 1.282-2.058 1.538zM2 12c0 5.523 4.477 10 10 10s10-4.477 10-10S17.523 2 12 2 2 6.477 2 12z",fill:"rgba(56,186,109,1)"})]),X(" 登录（微信小程序扫码） ")],-1),Dt={key:2,class:"mt-6 mb-2 text-stone-500 text-xs"},Pt=ve('<footer class="mt-10 text-sm text-stone-600"><p><strong>不会用？</strong> 了解更多请发邮件至<a class="underline" href="mailto:gps949@nopkt.com?subject=[关于蜃境]"> gps949 (AT) nopkt.com </a>. </p></footer><footer class="mt-16 max-w-md text-sm text-stone-600"><p>点击以上按钮进行操作，表明您已经阅读、理解并同意蜃境网络的 <br><a class="underline" href="#" target="_blank">服务条款</a> 以及 <a class="underline" href="#" target="_blank">隐私策略</a>. </p></footer>',2),At={__name:"Login",setup(r){const l=u(!1),d=u("");L(l,()=>{l.value&&setTimeout(function(){l.value=!1},5e3)});const c=he("next_url"),n=u(!1),h=u(!1),f=u(!1),b=u(""),a=u(""),o=u(""),t=u(!1);R(()=>{});function s(){n.value=!1,h.value=!1}function y(x){s(),b.value=x,f.value=!0}function S(){b.value=data,f.value=!1}function w(){t.value=!1}function C(){axios.post("/login?provider=WXScan&next_url="+c).then(function(x){x.data.status=="New"?(a.value=x.data.code,o.value=x.data.state,t.value=!0):(d.value="获取微信小程序码失败！",l.value=!0)}).catch(function(x){reject(x)})}return(x,z)=>(m(),p(Q,null,[It,t.value?g("",!0):(m(),p("form",Et,[Ht,e("input",{type:"hidden",name:"next_url",value:K(c)},null,8,Lt),Nt])),t.value?g("",!0):(m(),p("form",{key:1,onSubmit:q(C,["prevent"]),class:"mt-3"},[Wt,e("input",{type:"hidden",name:"next_url",value:K(c)},null,8,Tt),Vt],40,Rt)),!n.value&&!f.value&&!t.value?(m(),p("div",Dt,"还没有账号？")):g("",!0),$(ut,{wantMeClose:h.value,show:n.value,onClose:s,onRegDone:y},null,8,["wantMeClose","show"]),$(D,{"enter-from-class":"opacity-0","enter-active-class":"transition ease-in-out duration-75 delay-150"},{default:V(()=>[!n.value&&!f.value&&!t.value?(m(),p("button",{key:0,onClick:z[0]||(z[0]=W=>n.value=!0),class:"btn rounded-md border-0 bg-stone-700 hover:bg-stone-800 h-10 min-h-fit mt-4"},"注册账号")):g("",!0)]),_:1}),$(kt,{show:f.value,welcomemsg:b.value,onClose:S},null,8,["show","welcomemsg"]),t.value?(m(),N(jt,{key:3,show:t.value,wxminicode:a.value,checkcode:o.value,onClose:w},null,8,["show","wxminicode","checkcode"])):g("",!0),Pt,(m(),N(O,{to:".toast-container"},[$(G,{show:l.value,msg:d.value,onClose:z[1]||(z[1]=W=>l.value=!1)},null,8,["show","msg"])]))],64))}},U=me(At);U.config.errorHandler=r=>{console.log(r)};U.use(fe);U.mount("#app-root");
